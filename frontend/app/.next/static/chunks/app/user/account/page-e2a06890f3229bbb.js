(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5240],{802:(e,t,a)=>{"use strict";a.d(t,{vA:()=>c,H0:()=>n,wz:()=>l});let s={LIST:"/users/tickets",CANCEL:"/users/cancel/ticket",CANCEL_SINGLE:"/users/cancel/single/ticket"};var r=a(77567);let l=async(e,t,a)=>(await r.A.get(s.LIST,{params:{page:e,limit:t,type:a}})).data,n=async(e,t)=>(await r.A.delete(s.CANCEL,{params:{bookingId:e,amount:t}})).data,c=async(e,t)=>(console.log("calledddd"),(await r.A.post(s.CANCEL_SINGLE,{ticketIds:e,totalAmount:t})).data)},7430:(e,t,a)=>{"use strict";a.d(t,{Ru:()=>c,NI:()=>n,QI:()=>l});let s={WALLET:"/users/wallet",TRANSACTIONS:"/users/transaction",CREDIT_TRANSACTION:"/users/wallet/transactions"};var r=a(77567);let l=async()=>(await r.A.get(s.WALLET)).data,n=async()=>(await r.A.get(s.TRANSACTIONS)).data,c=async e=>(await r.A.post(s.CREDIT_TRANSACTION,e)).data},25919:(e,t,a)=>{"use strict";a.d(t,{R2:()=>n,DB:()=>c,x8:()=>l});let s={GET_BY_THEATER:"/users/coupon",GET_ALL:"/users/coupon",CHECK:"/users/coupon/check"};var r=a(77567);let l=async e=>(await r.A.get("".concat(s.GET_BY_THEATER,"/").concat(e))).data,n=async(e,t)=>(await r.A.post("".concat(s.CHECK),{couponCode:t,theaterId:e})).data,c=async e=>{let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString());let a=t.toString(),l=a?"".concat(s.GET_ALL,"?").concat(a):s.GET_ALL;return(await r.A.get(l)).data}},33991:(e,t,a)=>{"use strict";a.d(t,{ConfirmDialog:()=>f,f:()=>j});var s=a(95155),r=a(12115),l=a(67372),n=a(52596),c=a(39688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,c.QP)((0,n.$)(t))}let o=(0,a(74466).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{...t}=e;return(0,s.jsx)(l.bL,{"data-slot":"alert-dialog",...t})}function m(e){let{...t}=e;return(0,s.jsx)(l.ZL,{"data-slot":"alert-dialog-portal",...t})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(l.hJ,{"data-slot":"alert-dialog-overlay",className:i("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function h(e){let{className:t,...a}=e;return(0,s.jsxs)(m,{children:[(0,s.jsx)(x,{}),(0,s.jsx)(l.UC,{"data-slot":"alert-dialog-content",className:i("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-header",className:i("flex flex-col gap-2 text-center sm:text-left",t),...a})}function g(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-footer",className:i("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function b(e){let{className:t,...a}=e;return(0,s.jsx)(l.hE,{"data-slot":"alert-dialog-title",className:i("text-lg font-semibold",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)(l.VY,{"data-slot":"alert-dialog-description",className:i("text-muted-foreground text-sm",t),...a})}function w(e){let{className:t,...a}=e;return(0,s.jsx)(l.rc,{className:i(o(),t),...a})}function N(e){let{className:t,...a}=e;return(0,s.jsx)(l.ZD,{className:i(o({variant:"outline"}),t),...a})}let v=null;function f(e){let{title:t,message:a,confirmText:l="Confirm",cancelText:n="Cancel"}=e,[c,i]=(0,r.useState)(!1),[o,m]=(0,r.useState)({title:t,message:a,confirmText:l,cancelText:n});(0,r.useEffect)(()=>{window.__openConfirmDialog=e=>(m(e),i(!0),new Promise(e=>{v=e}))},[]);let x=e=>{i(!1),null==v||v(e),v=null};return(0,s.jsx)(d,{open:c,onOpenChange:i,children:(0,s.jsxs)(h,{className:"bg-slate-800 text-slate-50 dark:bg-slate-900 dark:text-slate-100 rounded-lg shadow-lg p-6 border border-slate-700",children:[(0,s.jsxs)(u,{children:[(0,s.jsx)(b,{children:o.title}),(0,s.jsx)(p,{children:o.message})]}),(0,s.jsxs)(g,{className:"flex justify-end space-x-2",children:[(0,s.jsx)(N,{onClick:()=>x(!1),className:"px-4 py-2 bg-muted text-muted-foreground rounded hover:bg-muted/90",children:o.cancelText}),(0,s.jsx)(w,{onClick:()=>x(!0),className:"px-4 py-2 bg-destructive text-destructive-foreground rounded hover:bg-destructive/90",children:o.confirmText})]})]})})}function j(e){return window.__openConfirmDialog(e)}},44326:(e,t,a)=>{"use strict";a.d(t,{E0:()=>c.default,HS:()=>n.default,Id:()=>i.default,jq:()=>s.default,lq:()=>r.default,wi:()=>o.default,y:()=>l.default});var s=a(81534),r=a(95502),l=a(48109),n=a(67670),c=a(72607),i=a(87081),o=a(5079)},46e3:(e,t,a)=>{"use strict";a.d(t,{kD:()=>l,Wr:()=>n,Gm:()=>c});let s={ADD_REVIEW:"/users/reviews",UPDATE_REVIEW:e=>"/users/reviews/".concat(e),DELETE_REVIEW:e=>"/users/reviews/".concat(e)};var r=a(77567);let l=async e=>(await r.A.post(s.ADD_REVIEW,e)).data,n=async e=>(await r.A.delete(s.DELETE_REVIEW(e))).data,c=async(e,t)=>(await r.A.put(s.UPDATE_REVIEW(e),t)).data},52643:(e,t,a)=>{Promise.resolve().then(a.bind(a,99304))},54409:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(95155),r=a(51154);a(12115);var l=a(70304),n=a.n(l);let c=e=>{let{text:t}=e;return(0,s.jsxs)("div",{children:["  ",(0,s.jsx)("div",{className:"flex items-center justify-center h-screen ",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(r.A,{className:"w-8 h-8 text-white animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"".concat(n().className," text-white"),children:t})]})})]})}},55261:(e,t,a)=>{"use strict";a.d(t,{Nt:()=>n,r7:()=>l});let s={PROFILE:"/users/profile",UPDATE_LOCATION:"/users/location"};var r=a(77567);let l=async e=>(await r.A.put(s.PROFILE,e)).data,n=async e=>(await r.A.patch(s.UPDATE_LOCATION,e)).data},63081:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(95155),r=a(12115),l=a(8724),n=a(86927),c=a(88453),i=a(53218);let o=e=>{let{height:t=3.5,baseWidth:a=5.5,animationType:o="rotate",glow:d=1,offset:m={x:0,y:0},noise:x=.5,transparent:h=!0,scale:u=3.6,hueShift:g=0,colorFrequency:b=1,hoverStrength:p=2,inertia:w=.05,bloom:N=1,suspendWhenOffscreen:v=!1,timeScale:f=.5}=e,j=(0,r.useRef)(null);return(0,r.useEffect)(()=>{var e,s;let r=j.current;if(!r)return;let y=Math.max(.001,t),k=.5*Math.max(.001,a),A=Math.max(0,d),C=Math.max(0,x),S=null!=(e=null==m?void 0:m.x)?e:0,P=null!=(s=null==m?void 0:m.y)?s:0,T=Math.max(.001,u),E=Math.max(0,b||1),F=Math.max(0,N||1),M=Math.max(0,f||1),I=Math.max(0,p||1),R=Math.max(0,Math.min(1,w||.12)),L=Math.min(2,window.devicePixelRatio||1),D=new l.A({dpr:L,alpha:h,antialias:!1}),z=D.gl;z.disable(z.DEPTH_TEST),z.disable(z.CULL_FACE),z.disable(z.BLEND),Object.assign(z.canvas.style,{position:"absolute",inset:"0",width:"100%",height:"100%",display:"block"}),r.appendChild(z.canvas);let _=new n.l(z),O=new Float32Array(2),B=new Float32Array(2),U=new c.B(z,{vertex:"\n      attribute vec2 position;\n      void main() {\n        gl_Position = vec4(position, 0.0, 1.0);\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec2  iResolution;\n      uniform float iTime;\n\n      uniform float uHeight;\n      uniform float uBaseHalf;\n      uniform mat3  uRot;\n      uniform int   uUseBaseWobble;\n      uniform float uGlow;\n      uniform vec2  uOffsetPx;\n      uniform float uNoise;\n      uniform float uSaturation;\n      uniform float uScale;\n      uniform float uHueShift;\n      uniform float uColorFreq;\n      uniform float uBloom;\n      uniform float uCenterShift;\n      uniform float uInvBaseHalf;\n      uniform float uInvHeight;\n      uniform float uMinAxis;\n      uniform float uPxScale;\n      uniform float uTimeScale;\n\n      vec4 tanh4(vec4 x){\n        vec4 e2x = exp(2.0*x);\n        return (e2x - 1.0) / (e2x + 1.0);\n      }\n\n      float rand(vec2 co){\n        return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453123);\n      }\n\n      float sdOctaAnisoInv(vec3 p){\n        vec3 q = vec3(abs(p.x) * uInvBaseHalf, abs(p.y) * uInvHeight, abs(p.z) * uInvBaseHalf);\n        float m = q.x + q.y + q.z - 1.0;\n        return m * uMinAxis * 0.5773502691896258;\n      }\n\n      float sdPyramidUpInv(vec3 p){\n        float oct = sdOctaAnisoInv(p);\n        float halfSpace = -p.y;\n        return max(oct, halfSpace);\n      }\n\n      mat3 hueRotation(float a){\n        float c = cos(a), s = sin(a);\n        mat3 W = mat3(\n          0.299, 0.587, 0.114,\n          0.299, 0.587, 0.114,\n          0.299, 0.587, 0.114\n        );\n        mat3 U = mat3(\n           0.701, -0.587, -0.114,\n          -0.299,  0.413, -0.114,\n          -0.300, -0.588,  0.886\n        );\n        mat3 V = mat3(\n           0.168, -0.331,  0.500,\n           0.328,  0.035, -0.500,\n          -0.497,  0.296,  0.201\n        );\n        return W + U * c + V * s;\n      }\n\n      void main(){\n        vec2 f = (gl_FragCoord.xy - 0.5 * iResolution.xy - uOffsetPx) * uPxScale;\n\n        float z = 5.0;\n        float d = 0.0;\n\n        vec3 p;\n        vec4 o = vec4(0.0);\n\n        float centerShift = uCenterShift;\n        float cf = uColorFreq;\n\n        mat2 wob = mat2(1.0);\n        if (uUseBaseWobble == 1) {\n          float t = iTime * uTimeScale;\n          float c0 = cos(t + 0.0);\n          float c1 = cos(t + 33.0);\n          float c2 = cos(t + 11.0);\n          wob = mat2(c0, c1, c2, c0);\n        }\n\n        const int STEPS = 100;\n        for (int i = 0; i < STEPS; i++) {\n          p = vec3(f, z);\n          p.xz = p.xz * wob;\n          p = uRot * p;\n          vec3 q = p;\n          q.y += centerShift;\n          d = 0.1 + 0.2 * abs(sdPyramidUpInv(q));\n          z -= d;\n          o += (sin((p.y + z) * cf + vec4(0.0, 1.0, 2.0, 3.0)) + 1.0) / d;\n        }\n\n        o = tanh4(o * o * (uGlow * uBloom) / 1e5);\n\n        vec3 col = o.rgb;\n        float n = rand(gl_FragCoord.xy + vec2(iTime));\n        col += (n - 0.5) * uNoise;\n        col = clamp(col, 0.0, 1.0);\n\n        float L = dot(col, vec3(0.2126, 0.7152, 0.0722));\n        col = clamp(mix(vec3(L), col, uSaturation), 0.0, 1.0);\n\n        if(abs(uHueShift) > 0.0001){\n          col = clamp(hueRotation(uHueShift) * col, 0.0, 1.0);\n        }\n\n        gl_FragColor = vec4(col, o.a);\n      }\n    ",uniforms:{iResolution:{value:O},iTime:{value:0},uHeight:{value:y},uBaseHalf:{value:k},uUseBaseWobble:{value:1},uRot:{value:new Float32Array([1,0,0,0,1,0,0,0,1])},uGlow:{value:A},uOffsetPx:{value:B},uNoise:{value:C},uSaturation:{value:h?1.5:1},uScale:{value:T},uHueShift:{value:g||0},uColorFreq:{value:E},uBloom:{value:F},uCenterShift:{value:.25*y},uInvBaseHalf:{value:1/k},uInvHeight:{value:1/y},uMinAxis:{value:Math.min(k,y)},uPxScale:{value:1/(.1*(z.drawingBufferHeight||1)*T)},uTimeScale:{value:M}}}),V=new i.e(z,{geometry:_,program:U}),W=()=>{let e=r.clientWidth||1,t=r.clientHeight||1;D.setSize(e,t),O[0]=z.drawingBufferWidth,O[1]=z.drawingBufferHeight,B[0]=S*L,B[1]=P*L,U.uniforms.uPxScale.value=1/(.1*(z.drawingBufferHeight||1)*T)},H=new ResizeObserver(W);H.observe(r),W();let q=new Float32Array(9),Y=(e,t,a,s)=>{let r=Math.cos(e),l=Math.sin(e),n=Math.cos(t),c=Math.sin(t),i=Math.cos(a),o=Math.sin(a);return s[0]=r*i+l*c*o,s[1]=n*o,s[2]=-l*i+r*c*o,s[3]=-r*o+l*c*i,s[4]=n*i,s[5]=l*o+r*c*i,s[6]=l*n,s[7]=-c,s[8]=r*n,s},G=C<1e-6,Q=0,Z=performance.now(),K=()=>{Q||(Q=requestAnimationFrame(eu))},X=()=>{Q&&(cancelAnimationFrame(Q),Q=0)},$=()=>Math.random(),J=(.3+.6*$())*1,ee=(.2+.7*$())*1,et=(.1+.5*$())*1,ea=$()*Math.PI*2,es=$()*Math.PI*2,er=0,el=0,en=0,ec=0,ei=0,eo=(e,t,a)=>e+(t-e)*a,ed={x:0,y:0,inside:!0},em=()=>{ed.inside=!1},ex=()=>{ed.inside=!1},eh=null;"hover"===o?(eh=e=>{(e=>{let t=Math.max(1,window.innerWidth),a=Math.max(1,window.innerHeight),s=(e.clientX-.5*t)/(.5*t),r=(e.clientY-.5*a)/(.5*a);ed.x=Math.max(-1,Math.min(1,s)),ed.y=Math.max(-1,Math.min(1,r)),ed.inside=!0})(e),K()},window.addEventListener("pointermove",eh,{passive:!0}),window.addEventListener("mouseleave",em),window.addEventListener("blur",ex),U.uniforms.uUseBaseWobble.value=0):"3drotate"===o?U.uniforms.uUseBaseWobble.value=0:U.uniforms.uUseBaseWobble.value=1;let eu=e=>{let t=(e-Z)*.001;U.uniforms.iTime.value=t;let a=!0;if("hover"===o){ec=(ed.inside?-ed.x:0)*(.6*I),ei=(ed.inside?ed.y:0)*(.6*I);let e=el,t=en;er=eo(er,ec,R),el=eo(e,ei,R),en=eo(t,0,.1),U.uniforms.uRot.value=Y(er,el,en,q),G&&1e-4>Math.abs(er-ec)&&1e-4>Math.abs(el-ei)&&1e-4>Math.abs(en)&&(a=!1)}else if("3drotate"===o){let e=t*M;er=e*ee,el=.6*Math.sin(e*J+ea),en=.5*Math.sin(e*et+es),U.uniforms.uRot.value=Y(er,el,en,q),M<1e-6&&(a=!1)}else q[0]=1,q[1]=0,q[2]=0,q[3]=0,q[4]=1,q[5]=0,q[6]=0,q[7]=0,q[8]=1,U.uniforms.uRot.value=q,M<1e-6&&(a=!1);D.render({scene:V}),Q=a?requestAnimationFrame(eu):0};if(v){let e=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)?K():X()});e.observe(r),K(),r.__prismIO=e}else K();return()=>{if(X(),H.disconnect(),"hover"===o&&(eh&&window.removeEventListener("pointermove",eh),window.removeEventListener("mouseleave",em),window.removeEventListener("blur",ex)),v){let e=r.__prismIO;e&&e.disconnect(),delete r.__prismIO}z.canvas.parentElement===r&&r.removeChild(z.canvas)}},[t,a,o,d,x,null==m?void 0:m.x,null==m?void 0:m.y,u,h,g,b,f,p,w,N,v]),(0,s.jsx)("div",{className:"w-full h-full relative",ref:j})}},94622:(e,t,a)=>{"use strict";a.d(t,{$:()=>l,G:()=>n});let s={CREATE_RAZORPAY_ORDER:"/users/razorpay/create-order",VERIFY_RAZORPAY_PAYMENT:"/users/razorpay/verify-payment"};var r=a(77567);let l=async e=>(await r.A.post(s.CREATE_RAZORPAY_ORDER,{amount:e.amount,currency:e.currency||"INR"})).data,n=async e=>(await r.A.post(s.VERIFY_RAZORPAY_PAYMENT,{razorpay_payment_id:e.razorpay_payment_id,razorpay_order_id:e.razorpay_order_id,razorpay_signature:e.razorpay_signature,bookingData:e.bookingData})).data},99304:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tV});var s=a(95155),r=a(47440),l=a(44326),n=a(12115),c=a(71007),i=a(69074),o=a(39785),d=a(51976),m=a(87137),x=a(59947),h=a(74783),u=a(34835),g=a(54416),b=a(75525),p=a(381),w=a(23861),N=a(51154),v=a(69037),f=a(40288),j=a(14186),y=a(34869),k=a(28883),A=a(19420),C=a(4516),S=a(69803),P=a(13568),T=a(83833);a(54534);var E=a(84355),F=a(5196),M=a(55261),I=a(55028);let R=(0,I.default)(()=>Promise.all([a.e(9484),a.e(1761),a.e(683)]).then(a.bind(a,70683)),{loadableGenerated:{webpack:()=>[70683]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"w-full h-64 bg-gray-800 rounded-xl flex items-center justify-center",children:(0,s.jsx)(N.A,{className:"w-6 h-6 animate-spin text-gray-400"})})}),L={className:"font-bold"},D={className:"font-medium"},z={className:"font-normal text-sm"};async function _(e,t,a){let s=t.getContext("2d");if(!s)throw Error("No 2d context");let r=e.naturalWidth/e.width,l=e.naturalHeight/e.height,n=window.devicePixelRatio;t.width=Math.floor(a.width*r*n),t.height=Math.floor(a.height*l*n),s.scale(n,n),s.imageSmoothingQuality="high";let c=a.x*r,i=a.y*l;s.save(),s.translate(-c,-i),s.drawImage(e,0,0,e.naturalWidth,e.naturalHeight,0,0,e.naturalWidth,e.naturalHeight),s.restore()}let O=e=>{var t,a,r,l,c,i,o,d;let{user:m,onClose:x,onDataUpdate:h}=e,[u,b]=(0,n.useState)(!1),[p,w]=(0,n.useState)({firstName:null!=(t=m.firstName)?t:"",lastName:null!=(a=m.lastName)?a:"",dateOfBirth:m.dateOfBirth?new Date(m.dateOfBirth).toISOString().split("T")[0]:"",language:null!=(r=m.language)?r:"en",gender:null!=(l=m.gender)?l:"",phone:null!=(c=m.phone)?c:"",location:m.location,locationCity:null!=(i=m.locationCity)?i:"",locationState:null!=(o=m.locationState)?o:"",profilePicture:null!=(d=m.profilePicture)?d:""}),[v,f]=(0,n.useState)(!1),[j,k]=(0,n.useState)(""),[S,I]=(0,n.useState)(),[O,B]=(0,n.useState)(),U=(0,n.useRef)(null),V=(0,n.useRef)(null),W=e=>{let{name:t,value:a}=e.target;w(e=>({...e,[t]:a}))},H=async()=>{if(!O||!U.current||!V.current)return void P.Ay.error("Please select a crop area");try{await _(U.current,V.current,O),V.current.toBlob(e=>{if(!e)return void P.Ay.error("Failed to crop image");let t=new FileReader;t.onload=()=>{w(e=>({...e,profilePicture:t.result})),f(!1),k(""),P.Ay.success("Image cropped successfully")},t.readAsDataURL(e)},"image/jpeg",.9)}catch(e){console.error("Error cropping image:",e),P.Ay.error("Failed to crop image")}},q=e=>e.firstName.trim()?e.lastName.trim()?e.dateOfBirth?e.gender?e.phone.trim()?e.locationCity.trim()?e.locationState.trim()?"":"State is required":"City is required":"Phone number is required":"Please select a gender":"Date of birth is required":"Last name is required":"First name is required",Y=!q(p),G=async()=>{let e=q(p);if(e)return void P.Ay.error(e);b(!0);try{await (0,M.r7)(p),P.Ay.success("Profile updated"),h&&await h(),x()}catch(e){var t,a;if(null==(a=e.response)||null==(t=a.statusText)?void 0:t.includes("Payload Too Large"))return void P.Ay.error("Image size too large");P.Ay.error("Update failed — try again.")}finally{b(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm",onClick:x}),(0,s.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] overflow-y-auto bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl backdrop-blur-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"".concat(L.className," text-2xl text-white"),children:"Edit Profile"}),(0,s.jsx)("p",{className:"".concat(z.className," text-gray-400"),children:"Update your personal information and preferences"})]}),(0,s.jsx)("button",{onClick:x,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,s.jsx)(g.A,{className:"w-6 h-6 text-gray-400"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"relative inline-block",children:[(0,s.jsx)("img",{src:p.profilePicture||m.profilePicture||"/api/placeholder/150/150",alt:"Profile",className:"w-32 h-32 rounded-2xl object-cover border-4 border-white/20 shadow-lg"}),(0,s.jsxs)("label",{className:"absolute -bottom-2 -right-2 w-10 h-10 bg-blue-500 hover:bg-blue-600 rounded-full flex items-center justify-center cursor-pointer shadow-lg transition-colors",children:[(0,s.jsx)(E.A,{className:"w-5 h-5 text-white"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;if(a.size>5e6)return void P.Ay.error("Image must be under 5 MB");if(!a.type.startsWith("image/"))return void P.Ay.error("Please select an image file");let s=new FileReader;s.addEventListener("load",()=>{var e;k((null==(e=s.result)?void 0:e.toString())||""),f(!0)}),s.readAsDataURL(a)},className:"hidden"})]})]}),(0,s.jsx)("p",{className:"".concat(z.className," text-gray-400 mt-2"),children:"Click the camera icon to change your profile picture"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"".concat(L.className," text-lg text-white border-b border-white/10 pb-2"),children:"Personal Details"}),(0,s.jsxs)("label",{className:"".concat(z.className," text-sm text-gray-200"),children:["First Name",(0,s.jsx)("input",{type:"text",name:"firstName",value:p.firstName,onChange:W,placeholder:"Enter your first name",maxLength:50,className:"".concat(D.className," mt-2 w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm")})]}),(0,s.jsxs)("label",{className:"".concat(z.className," text-sm text-gray-200"),children:["Last Name",(0,s.jsx)("input",{type:"text",name:"lastName",value:p.lastName,onChange:W,placeholder:"Enter your last name",maxLength:50,className:"".concat(D.className," mt-2 w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm")})]}),(0,s.jsxs)("label",{className:"".concat(z.className," text-sm text-gray-200"),children:["Date of Birth",(0,s.jsx)("input",{type:"date",name:"dateOfBirth",value:p.dateOfBirth,onChange:W,className:"".concat(D.className," mt-2 w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm")})]}),(0,s.jsxs)("label",{className:"".concat(z.className," text-sm text-gray-200"),children:["Gender",(0,s.jsxs)("select",{name:"gender",value:p.gender,onChange:W,className:"".concat(D.className," mt-2 w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm"),children:[(0,s.jsx)("option",{value:"",className:"bg-gray-800",children:"Select Gender"}),(0,s.jsx)("option",{value:"male",className:"bg-gray-800",children:"Male"}),(0,s.jsx)("option",{value:"female",className:"bg-gray-800",children:"Female"}),(0,s.jsx)("option",{value:"other",className:"bg-gray-800",children:"Other"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"".concat(L.className," text-lg text-white border-b border-white/10 pb-2"),children:"Contact & Location"}),(0,s.jsxs)("label",{className:"".concat(z.className," text-sm text-gray-200"),children:[(0,s.jsx)(A.A,{className:"w-4 h-4 inline mr-2"}),"Phone Number",(0,s.jsx)("input",{type:"tel",name:"phone",value:p.phone,onChange:W,placeholder:"Enter your phone number",className:"".concat(D.className," mt-2 w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm")})]}),(0,s.jsxs)("label",{className:"".concat(z.className," text-sm text-gray-200"),children:[(0,s.jsx)(C.A,{className:"w-4 h-4 inline mr-2"}),"City",(0,s.jsx)("input",{type:"text",name:"locationCity",value:p.locationCity,onChange:W,placeholder:"Enter your city",className:"".concat(D.className," mt-2 w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm")})]}),(0,s.jsxs)("label",{className:"".concat(z.className," text-sm text-gray-200"),children:[(0,s.jsx)(C.A,{className:"w-4 h-4 inline mr-2"}),"State",(0,s.jsx)("input",{type:"text",name:"locationState",value:p.locationState,onChange:W,placeholder:"Enter your state",className:"".concat(D.className," mt-2 w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm")})]}),(0,s.jsxs)("label",{className:"".concat(z.className," text-sm text-gray-200"),children:[(0,s.jsx)(y.A,{className:"w-4 h-4 inline mr-2"}),"Preferred Language",(0,s.jsxs)("select",{name:"language",value:p.language,onChange:W,className:"".concat(D.className," mt-2 w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm"),children:[(0,s.jsx)("option",{value:"en",className:"bg-gray-800",children:"English"}),(0,s.jsx)("option",{value:"hi",className:"bg-gray-800",children:"हिंदी"}),(0,s.jsx)("option",{value:"es",className:"bg-gray-800",children:"Espa\xf1ol"}),(0,s.jsx)("option",{value:"fr",className:"bg-gray-800",children:"Fran\xe7ais"}),(0,s.jsx)("option",{value:"de",className:"bg-gray-800",children:"Deutsch"})]})]})]})]}),p.location&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"".concat(L.className," text-lg text-white border-b border-white/10 pb-2"),children:"Location on Map"}),(0,s.jsx)(R,{onLocationSelect:(e,t)=>{var a;a={location:{type:"Point",coordinates:[t,e]}},w(e=>({...e,...a}))},initialPosition:[p.location.coordinates[1]||28.7041,p.location.coordinates[0]||77.1025]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-4 p-6 border-t border-white/10",children:[(0,s.jsx)("button",{onClick:x,className:"".concat(D.className," px-6 py-3 bg-white text-black hover:bg-white/5 border hover:text-white hover:border-gray-400 rounded-lg  transition-all"),children:"Cancel"}),(0,s.jsx)("button",{onClick:G,disabled:u||!Y,className:"".concat(D.className," px-6 py-3  bg-white text-black hover:bg-white/5 border  hover:text-white rounded-lg shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"),children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.A,{className:"w-4 h-4 animate-spin"}),"Saving…"]}):"Save Changes"})]})]})]}),v&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:"relative w-full max-w-2xl bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl backdrop-blur-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"".concat(L.className," text-xl text-white"),children:"Crop Profile Picture"}),(0,s.jsx)("p",{className:"".concat(z.className," text-gray-400"),children:"Adjust the crop area to create a perfect square image"})]}),(0,s.jsx)("button",{onClick:()=>f(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,s.jsx)(g.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsx)(T.Ay,{crop:S,onChange:(e,t)=>I(t),onComplete:e=>{B(e)},aspect:1,minWidth:100,minHeight:100,className:"max-w-full max-h-96",children:(0,s.jsx)("img",{ref:U,alt:"Crop me",src:j,style:{maxHeight:"400px",maxWidth:"100%"},onLoad:e=>{let{width:t,height:a}=e.currentTarget;I(function(e,t,a){return(0,T.ge)((0,T.dS)({unit:"%",width:90},1,e,t),e,t)}(t,a,0))}})})}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,s.jsx)("button",{onClick:()=>f(!1),className:"".concat(D.className," px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-all"),children:"Cancel"}),(0,s.jsxs)("button",{onClick:H,className:"".concat(D.className," px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-lg shadow-lg transition-all flex items-center gap-2"),children:[(0,s.jsx)(F.A,{className:"w-4 h-4"}),"Crop Image"]})]})]})]}),(0,s.jsx)("canvas",{ref:V,style:{display:"none"}})]})]})};var B=a(40646),U=a(78749),V=a(92657),W=a(30464);let H={className:"font-bold"},q={className:"font-medium"},Y={className:"font-normal text-sm"},G=e=>{let{onClose:t}=e,[a,r]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),[d,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(""),[u,b]=(0,n.useState)(""),[p,w]=(0,n.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),v=e=>{let{name:t,value:a}=e.target;w(e=>({...e,[t]:a})),h("")},f=async()=>{if(h(""),b(""),!p.currentPassword||!p.newPassword||!p.confirmPassword)return void h("All fields are required");if(p.newPassword!==p.confirmPassword)return void h("New passwords do not match");if(p.newPassword.length<6)return void h("New password must be at least 6 characters");if(p.currentPassword===p.newPassword)return void h("New password must be different from current password");r(!0);try{console.log("Changing password:",p);let e=await (0,W.xw)(p.newPassword,p.currentPassword);console.log(e),t(),P.Ay.success("Password changed successfully")}catch(e){console.log(e),h("Failed to change password. Please check your current password.")}finally{r(!1)}};return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm",onClick:t}),(0,s.jsxs)("div",{className:"relative w-full max-w-md bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl backdrop-blur-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-white  rounded-xl flex items-center justify-center",children:(0,s.jsx)(S.A,{className:"w-5 h-5 text-black"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"".concat(H.className," text-xl text-white"),children:"Change Password"}),(0,s.jsx)("p",{className:"".concat(Y.className," text-gray-400"),children:"Update your account password"})]})]}),(0,s.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,s.jsx)(g.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[x&&(0,s.jsx)("div",{className:" rounded-lg p-3",children:(0,s.jsx)("p",{className:"".concat(Y.className," text-red-400 text-sm"),children:x})}),u&&(0,s.jsx)("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:(0,s.jsxs)("p",{className:"".concat(Y.className," text-green-400 text-sm flex items-center gap-2"),children:[(0,s.jsx)(B.A,{className:"w-4 h-4"}),u]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"".concat(Y.className," block text-sm font-medium text-gray-200 mb-2"),children:"Current Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:l?"text":"password",name:"currentPassword",value:p.currentPassword,onChange:v,className:"".concat(q.className," w-full px-4 py-3 pr-12 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-sm"),placeholder:"Enter current password"}),(0,s.jsx)("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:l?(0,s.jsx)(U.A,{className:"w-5 h-5"}):(0,s.jsx)(V.A,{className:"w-5 h-5"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"".concat(Y.className," block text-sm font-medium text-gray-200 mb-2"),children:"New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:i?"text":"password",name:"newPassword",value:p.newPassword,onChange:v,className:"".concat(q.className," w-full px-4 py-3 pr-12 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-sm"),placeholder:"Enter new password"}),(0,s.jsx)("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:i?(0,s.jsx)(U.A,{className:"w-5 h-5"}):(0,s.jsx)(V.A,{className:"w-5 h-5"})})]}),p.newPassword&&p.newPassword.length<6&&(0,s.jsx)("p",{className:"".concat(Y.className," text-yellow-400 text-xs mt-1"),children:"Password must be at least 6 characters"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"".concat(Y.className," block text-sm font-medium text-gray-200 mb-2"),children:"Confirm New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:d?"text":"password",name:"confirmPassword",value:p.confirmPassword,onChange:v,className:"".concat(q.className," w-full px-4 py-3 pr-12 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-sm"),placeholder:"Confirm new password"}),(0,s.jsx)("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:d?(0,s.jsx)(U.A,{className:"w-5 h-5"}):(0,s.jsx)(V.A,{className:"w-5 h-5"})})]}),p.confirmPassword&&p.newPassword!==p.confirmPassword&&(0,s.jsx)("p",{className:"".concat(Y.className," text-red-400 text-xs mt-1"),children:"Passwords do not match"})]}),(0,s.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"".concat(Y.className," text-gray-300 text-xs mb-2"),children:"Password requirements:"}),(0,s.jsxs)("ul",{className:"".concat(Y.className," text-gray-400 text-xs space-y-1"),children:[(0,s.jsx)("li",{className:p.newPassword.length>=6?"text-green-400":"text-gray-400",children:"• At least 6 characters long"}),(0,s.jsx)("li",{className:p.newPassword!==p.currentPassword&&p.newPassword?"text-green-400":"text-gray-400",children:"• Different from current password"}),(0,s.jsx)("li",{className:p.newPassword===p.confirmPassword&&p.confirmPassword?"text-green-400":"text-gray-400",children:"• Passwords match"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-4 p-6 border-t border-white/10",children:[(0,s.jsx)("button",{onClick:t,className:"".concat(q.className," px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-all duration-200"),children:"Cancel"}),(0,s.jsx)("button",{onClick:f,disabled:a||!p.currentPassword||!p.newPassword||!p.confirmPassword||p.newPassword!==p.confirmPassword,className:"".concat(q.className," px-6 py-2 bg-gradient-to-r  text-black bg-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"),children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.A,{className:"w-4 h-4 animate-spin"}),"Changing..."]}):"Change Password"})]})]})]})};var Q=a(59362);let Z={className:"font-bold"},K={className:"font-medium"},X={className:"font-normal text-sm"},$={className:"font-normal"},J=e=>{let{currentEmail:t,onClose:a}=e,[r,l]=(0,n.useState)(!1),[c,i]=(0,n.useState)(!1),[o,d]=(0,n.useState)(0),[m,x]=(0,n.useState)(""),[h,u]=(0,n.useState)(""),[b,p]=(0,n.useState)(!1),[w,v]=(0,n.useState)(!1),f=(0,n.useRef)([]),[j,y]=(0,n.useState)({newEmail:"",password:"",otp:[]}),A=e=>{let{name:t,value:a}=e.target;y(e=>({...e,[t]:a})),x("")},C=async()=>{if(!j.newEmail||j.newEmail===t)return void x("Please enter a valid new email address");if(!j.password)return void x("Please enter your current password");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.newEmail))return void x("Please enter a valid email address");l(!0);try{let e=await (0,W.uV)({newEmail:j.newEmail,password:j.password});e.success?(i(!0),d(300),x(""),y(e=>({...e,otp:[]})),setTimeout(()=>{var e;null==(e=f.current[0])||e.focus()},100)):x(e.message||"Failed to send OTP. Please try again.")}catch(e){console.error("Send OTP error:",e),x("Failed to send OTP. Please try again.")}finally{l(!1)}},S=async()=>{p(!0);try{let t=await (0,W.uV)({newEmail:j.newEmail,password:j.password});if(t.success){var e;d(300),x(""),y(e=>({...e,otp:[]})),null==(e=f.current[0])||e.focus()}else x(t.message||"Failed to resend OTP. Please try again.")}catch(e){console.error("Resend OTP error:",e),x("Failed to resend OTP. Please try again.")}finally{p(!1)}},T=async()=>{var e,t;let s=j.otp.join("");if(6!==s.length)return void x("Please enter a valid 6-digit OTP");l(!0);try{let t=await (0,W.Dl)({email:j.newEmail,otp:s});t.success?(u("Email changed successfully!"),y({newEmail:"",password:"",otp:[]}),i(!1),P.Ay.success("Email changed succesfully"),a()):(x(t.message||"Invalid OTP. Please try again."),y(e=>({...e,otp:[]})),null==(e=f.current[0])||e.focus())}catch(e){e instanceof Q.pe&&(console.error("Verify OTP error:",e),x("Invalid OTP. Please try again."),y(e=>({...e,otp:[]})),null==(t=f.current[0])||t.focus())}finally{l(!1)}},E=0===o&&!b;(0,n.useEffect)(()=>{let e;return o>0&&(e=setInterval(()=>{d(e=>e-1)},1e3)),()=>clearInterval(e)},[o]);let F=()=>{y({newEmail:"",password:"",otp:[]}),i(!1),d(0),x(""),u(""),v(!1),a()};return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm",onClick:F}),(0,s.jsxs)("div",{className:"relative w-full max-w-md bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl backdrop-blur-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center",children:(0,s.jsx)(k.A,{className:"w-5 h-5 text-black"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"".concat(Z.className," text-xl text-white"),children:c?"Verify Your Email":"Change Email"}),(0,s.jsx)("p",{className:"".concat(X.className," text-gray-400"),children:c?"OTP sent to ".concat(j.newEmail):"Update your email address"})]})]}),(0,s.jsx)("button",{onClick:F,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,s.jsx)(g.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c?T():C()},className:"p-6 space-y-6",children:[m&&(0,s.jsx)("div",{className:" rounded-lg p-3",children:(0,s.jsx)("p",{className:"".concat(X.className," text-center text-red-400 text-sm"),children:m})}),c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h3",{className:"".concat($.className," text-lg text-white mb-2"),children:"Enter Verification Code"}),(0,s.jsxs)("p",{className:"".concat(X.className," text-gray-300"),children:["We've sent a 6-digit code to"," ",(0,s.jsx)("span",{className:"text-blue-400",children:j.newEmail})]})]}),(0,s.jsx)("div",{className:"flex justify-center space-x-3 mb-6",children:Array.from({length:6}).map((e,t)=>(0,s.jsx)("input",{type:"text",inputMode:"numeric",maxLength:1,className:"w-12 h-12 text-center text-white bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 text-lg font-medium",value:j.otp[t]||"",onChange:e=>((e,t)=>{let a=e.target.value.replace(/\D/g,"");if(a.length>1)return;let s=[...j.otp];if(s[t]=a,y(e=>({...e,otp:s})),x(""),a&&t<5){var r;null==(r=f.current[t+1])||r.focus()}})(e,t),onKeyDown:e=>((e,t)=>{var a,s,r;"Backspace"===e.key&&!j.otp[t]&&t>0?null==(a=f.current[t-1])||a.focus():"ArrowLeft"===e.key&&t>0?null==(s=f.current[t-1])||s.focus():"ArrowRight"===e.key&&t<5&&(null==(r=f.current[t+1])||r.focus())})(e,t),ref:e=>{e&&(f.current[t]=e)},disabled:r},t))}),(0,s.jsx)("button",{type:"submit",disabled:r||6!==j.otp.join("").length,className:"".concat(K.className," w-full px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"),children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.A,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):"Verify & Change Email"}),(0,s.jsx)("div",{className:"text-center",children:b?(0,s.jsxs)("span",{className:"".concat(X.className," flex items-center justify-center text-gray-400"),children:[(0,s.jsx)(N.A,{className:"w-4 h-4 animate-spin mr-2"}),"Sending..."]}):E?(0,s.jsx)("button",{type:"button",onClick:S,className:"".concat(X.className," text-blue-400 hover:text-blue-300 transition-colors"),children:"Resend OTP"}):(0,s.jsxs)("p",{className:"".concat(X.className," text-gray-400"),children:["Resend OTP in ",(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(o)]})}),(0,s.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"".concat(X.className," text-gray-300 text-xs mb-2"),children:"OTP Guidelines:"}),(0,s.jsxs)("ul",{className:"".concat(X.className," text-gray-400 text-xs space-y-1"),children:[(0,s.jsx)("li",{children:"• Check your email inbox and spam folder"}),(0,s.jsx)("li",{children:"• OTP is valid for 5 minutes"}),(0,s.jsx)("li",{children:"• Enter the 6-digit code exactly as received"})]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"".concat(X.className," block text-sm font-medium text-gray-200 mb-2"),children:"Current Email"}),(0,s.jsx)("div",{className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-gray-400 backdrop-blur-sm",children:t})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"".concat(X.className," block text-sm font-medium text-gray-200 mb-2"),children:"New Email Address"}),(0,s.jsx)("input",{type:"email",name:"newEmail",value:j.newEmail,onChange:A,className:"".concat(K.className," w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm"),placeholder:"Enter new email address",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"".concat(X.className," block text-sm font-medium text-gray-200 mb-2"),children:"Current Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:w?"text":"password",name:"password",value:j.password,onChange:A,className:"".concat(K.className," w-full px-4 py-3 pr-12 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm"),placeholder:"Enter your current password",required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>v(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:w?(0,s.jsx)(U.A,{className:"w-5 h-5"}):(0,s.jsx)(V.A,{className:"w-5 h-5"})})]})]}),(0,s.jsx)("button",{type:"submit",disabled:r||!j.newEmail||!j.password,className:"".concat(K.className," w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"),children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.A,{className:"w-4 h-4 animate-spin"}),"Sending OTP..."]}):"Send OTP"})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-end gap-4 p-6 border-t border-white/10",children:(0,s.jsx)("button",{onClick:F,className:"".concat(K.className," px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-all duration-200"),children:"Cancel"})})]})]})};var ee=a(54409);let et=(0,I.default)(()=>Promise.all([a.e(9484),a.e(1761),a.e(683)]).then(a.bind(a,70683)),{loadableGenerated:{webpack:()=>[70683]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"w-full h-64 bg-gray-800 rounded-xl flex items-center justify-center",children:(0,s.jsx)(N.A,{className:"w-6 h-6 animate-spin text-gray-400"})})}),ea={className:"font-bold"},es={className:"font-medium"},er={className:"font-normal text-sm"},el=e=>{let{label:t,icon:a,value:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"".concat(er.className," block text-sm font-medium text-gray-300 mb-3"),children:[a,t]}),(0,s.jsx)("div",{className:"bg-black/10 backdrop-blur-md border border-white/10 rounded-xl p-4",children:(0,s.jsx)("p",{className:"".concat(es.className," text-white"),children:r})})]})},en=e=>{let{iconBg:t,icon:a,label:r,actionLabel:l,onAction:n,statusChip:c,statusChipStyle:i,rightText:o}=e;return(0,s.jsx)("div",{className:"bg-black/10 backdrop-blur-md border border-white/10 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 ".concat(t," rounded-lg flex items-center justify-center"),children:a}),(0,s.jsx)("span",{className:"".concat(es.className," text-gray-200"),children:r})]}),l&&n&&(0,s.jsx)("button",{onClick:n,className:"px-4 py-2 bg-white/90 text-black hover:bg-white hover:shadow-lg rounded-lg text-sm font-medium transition-all duration-200",children:l}),c&&(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium border ".concat(i),children:c}),o&&(0,s.jsx)("span",{className:"".concat(es.className," text-white"),children:o})]})})},ec=e=>{var t,a,r,l,o,d,m,x,h,u;let{getUeserDetails:g,userData:p}=e,[w,N]=(0,n.useState)(!1),[P,T]=(0,n.useState)(!1),[E,F]=(0,n.useState)(!1);if(!p)return(0,s.jsx)("div",{className:"text-white ",children:(0,s.jsx)(ee.A,{text:"Loading Profile"})});let M=p.xpPoints>=5e3?"Premium":p.xpPoints>=2e3?"Gold":p.xpPoints>=500?"Silver":"Bronze",I=p.xpPoints>=5e3?0:p.xpPoints>=2e3?5e3-p.xpPoints:p.xpPoints>=500?2e3-p.xpPoints:500-p.xpPoints,R=(()=>{let e={Bronze:500,Silver:1500,Gold:3e3,Premium:1}[M];return Math.min(100,("Premium"===M?e:p.xpPoints%e)/e*100)})();return(0,s.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"text-center flex-1",children:(0,s.jsx)("h1",{className:"".concat(ea.className," text-5xl text-white mb-2"),children:"Profile & Settings"})})]}),(0,s.jsx)("div",{className:"mb-4 p-8 rounded-xl bg-black/30 border border-gray-600/30",children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center relative",children:[(0,s.jsx)("button",{onClick:()=>N(!0),className:"".concat(es.className," absolute top-0 right-0 flex items-center gap-2 px-6 py-3 bg-transparent border border-white text-white hover:bg-white/10 rounded-xl transition-all duration-200 z-10"),children:"Edit Profile"}),(0,s.jsxs)("div",{className:"relative mb-6 mt-16",children:[" ",(0,s.jsx)("img",{src:p.profilePicture||"https://upload.wikimedia.org/wikipedia/commons/8/89/Portrait_Placeholder.png",alt:p.username,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-600/30 shadow-lg"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"".concat(ea," text-white text-2xl mb-2"),children:p.firstName&&p.lastName?"".concat(p.firstName," ").concat(p.lastName):p.username}),(0,s.jsxs)("p",{className:"".concat(es," text-gray-300 text-sm mb-3 flex items-center justify-center gap-2"),children:["@",p.username]}),(0,s.jsxs)("div",{className:"".concat(er," bg-black/20 px-3 py-1 rounded-lg border border-gray-600/20 flex justify-center items-center text-gray-300 text-sm"),children:[(0,s.jsx)(v.A,{className:"w-3 h-3 mr-1"}),M," Member"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 w-full",children:[(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-black/20 border border-gray-600/20 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-2",children:(0,s.jsx)(f.A,{className:"w-5 h-5 text-white"})}),(0,s.jsx)("div",{className:"".concat(ea," text-white text-lg mb-1"),children:p.xpPoints.toLocaleString()}),(0,s.jsx)("div",{className:"".concat(er," text-gray-400 text-xs"),children:"XP Points"}),I>0&&(0,s.jsxs)("div",{className:"".concat(er," text-gray-500 text-xs mt-1"),children:[I," to next level"]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-black/20 border border-gray-600/20 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-2",children:(0,s.jsx)(i.A,{className:"w-5 h-5 text-white"})}),(0,s.jsx)("div",{className:"".concat(ea," text-white text-lg mb-1"),children:p.joinedAt.toLocaleDateString("en-US",{month:"short",year:"numeric"})}),(0,s.jsx)("div",{className:"".concat(er," text-gray-400 text-xs"),children:"Member Since"})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-black/20 border border-gray-600/20 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-2",children:(0,s.jsx)(j.A,{className:"w-5 h-5 text-white"})}),(0,s.jsx)("div",{className:"".concat(ea," text-white text-lg mb-1"),children:p.lastActive.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,s.jsx)("div",{className:"".concat(er," text-gray-400 text-xs"),children:"Last Active"})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-black/20 border border-gray-600/20 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-2",children:(0,s.jsx)(y.A,{className:"w-5 h-5 text-white"})}),(0,s.jsx)("div",{className:"".concat(ea," text-white text-lg mb-1"),children:"en"===p.language?"English":null!=(o=p.language)?o:"—"}),(0,s.jsx)("div",{className:"".concat(er," text-gray-400 text-xs"),children:"Language"})]})]})]})}),(0,s.jsxs)("div",{className:"bg-black/10 backdrop-blur-md border border-white/10 rounded-2xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-white/90 text-black rounded-xl flex items-center justify-center",children:(0,s.jsx)(c.A,{className:"w-5 h-5"})}),(0,s.jsx)("h3",{className:"".concat(ea.className," text-xl text-white"),children:"Personal Information"})]}),(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsx)(el,{label:"Email Address",icon:(0,s.jsx)(k.A,{className:"w-4 h-4 inline mr-2"}),value:p.email}),(0,s.jsx)(el,{label:"Username",icon:(0,s.jsx)(c.A,{className:"w-4 h-4 inline mr-2"}),value:"@".concat(p.username)}),(0,s.jsx)(el,{label:"Preferred Language",icon:(0,s.jsx)(y.A,{className:"w-4 h-4 inline mr-2"}),value:"en"===p.language?"English":null!=(d=p.language)?d:"—"}),p.phone&&(0,s.jsx)(el,{label:"Phone",icon:(0,s.jsx)(A.A,{className:"w-4 h-4 inline mr-2"}),value:p.phone}),(p.locationCity||p.locationState)&&(0,s.jsx)(el,{label:"Location",icon:(0,s.jsx)(C.A,{className:"w-4 h-4 inline mr-2"}),value:"".concat(null!=(m=p.locationCity)?m:"").concat(p.locationCity&&p.locationState?", ":"").concat(null!=(x=p.locationState)?x:"")}),p.dateOfBirth&&(0,s.jsx)(el,{label:"Date of Birth",icon:(0,s.jsx)(i.A,{className:"w-4 h-4 inline mr-2"}),value:new Date(p.dateOfBirth).toLocaleDateString()}),p.gender&&(0,s.jsx)(el,{label:"Gender",icon:(0,s.jsx)(c.A,{className:"w-4 h-4 inline mr-2"}),value:p.gender.charAt(0).toUpperCase()+p.gender.slice(1)}),p.location&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3",children:[(0,s.jsx)("h4",{className:"".concat(es.className," text-white"),children:"Your location"}),(0,s.jsx)("button",{onClick:()=>{var e,t;let a="https://www.google.com/maps?q=".concat(null==p||null==(e=p.location)?void 0:e.coordinates[1],",").concat(null==p||null==(t=p.location)?void 0:t.coordinates[0]);window.open(a,"_blank")},className:"text-blue-400 hover:text-blue-300 underline text-sm transition-colors",children:"View on Google Maps"})]}),(0,s.jsx)(et,{readOnly:!0,initialPosition:[null!=(h=null==p||null==(a=p.location)||null==(t=a.coordinates)?void 0:t[1])?h:28.7041,null!=(u=null==p||null==(l=p.location)||null==(r=l.coordinates)?void 0:r[0])?u:77.1025]})]})]})]}),(0,s.jsxs)("div",{className:"bg-black/10 backdrop-blur-md border border-white/10 rounded-2xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-white/90 text-black rounded-xl flex items-center justify-center",children:(0,s.jsx)(b.A,{className:"w-5 h-5"})}),(0,s.jsx)("h3",{className:"".concat(ea.className," text-xl text-white"),children:"Security & Status"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(en,{iconBg:"bg-white/90",icon:(0,s.jsx)(S.A,{className:"w-4 h-4 text-black"}),label:"Password",actionLabel:"Change",onAction:()=>T(!0)}),(0,s.jsx)(en,{iconBg:"bg-white/90",icon:(0,s.jsx)(k.A,{className:"w-4 h-4 text-black"}),label:"Email",actionLabel:"Change",onAction:()=>F(!0)}),(0,s.jsx)(en,{iconBg:"bg-white/90",icon:(0,s.jsx)(j.A,{className:"w-4 h-4 text-black"}),label:"Last Login",rightText:p.lastActive.toLocaleDateString()}),(0,s.jsxs)("div",{className:"bg-black/10 backdrop-blur-md border border-white/10 rounded-xl p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-white/90 rounded-lg flex items-center justify-center",children:(0,s.jsx)(v.A,{className:"w-4 h-4 text-black"})}),(0,s.jsx)("span",{className:"".concat(es.className," text-gray-200"),children:"Membership Level"})]}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-white/90 text-black border",children:M})]}),I>0&&(0,s.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-white/80 to-white/60 h-2 rounded-full transition-all",style:{width:"".concat(R,"%")}})})]})]})]}),(0,s.jsxs)("div",{className:"text-center bg-black/10 backdrop-blur-md border border-white/10 rounded-2xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-3",children:[(0,s.jsx)(b.A,{className:"w-5 h-5 text-green-400"}),(0,s.jsx)("span",{className:"".concat(es.className," text-green-400"),children:"Your data is secure and encrypted"})]}),(0,s.jsx)("p",{className:"".concat(er.className," text-gray-400"),children:"Need help with your account? Contact our support team anytime."})]}),w&&(0,s.jsx)(O,{user:p,onClose:()=>{g(),N(!1)}}),P&&(0,s.jsx)(G,{onClose:()=>{T(!1)}}),E&&(0,s.jsx)(J,{currentEmail:p.email,onClose:()=>{F(!1)}})]})};var ei=a(802);let eo=e=>{let{code:t}=e;return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-full px-2",children:(0,s.jsx)("div",{className:"flex flex-col justify-between h-44 w-8",children:[...Array(32).keys()].map(e=>(0,s.jsx)("div",{className:"bg-black ".concat(e%2==0?"h-2":"h-3"," w-full my-[1px]"),style:{opacity:e%7==0?.6:1,borderRadius:"2px"}},e))})})};var ed=a(26597),em=a(16862);let ex=async e=>{var t,a;let{ticket:s,seatGroups:r,totalAmount:l,totalSeats:n,allSeats:c,formatDate:i,formatTime:o}=e,d=new ed.Ay,m=d.internal.pageSize.getWidth();d.internal.pageSize.getHeight();let x=(e=>e.movie||e.movieId||{})(s),h=(e=>e.theater||e.theaterId||{})(s),u=(e=>e.screen||e.screenId||{})(s);d.setFillColor(99,102,241),d.rect(0,0,m,40,"F"),d.setTextColor(255,255,255),d.setFontSize(28),d.setFont("helvetica","bold"),d.text("CINEORA",20,25),d.setFontSize(12),d.setFont("helvetica","normal"),d.text("Your Cinema Experience",20,32),d.setTextColor(31,41,55),d.setFontSize(20),d.setFont("helvetica","bold"),d.text(x.title||"Unknown Movie",20,55),d.setFontSize(10),d.setFont("helvetica","normal"),d.setTextColor(107,114,128),d.text("Booking ID: ".concat(s.ticketId||"N/A"),m-80,20);let g=m/2+10;d.setTextColor(31,41,55),d.setFontSize(14),d.setFont("helvetica","bold"),d.text("Theater Information",20,75),d.setFont("helvetica","normal"),d.setFontSize(11);let b=85,p=h.name||(null==(t=s.theater)?void 0:t.name)||"Unknown Theater";d.text("Theater: ".concat(p),20,b),b+=8;let w=u.name||(null==(a=s.screen)?void 0:a.name)||s.screenId||"Unknown Screen";d.text("Screen: ".concat(w),20,b),b+=8,d.text("Date: ".concat(i(s.showDate)),20,b),b+=8,d.text("Time: ".concat(o(s.showTime)),20,b),d.setFontSize(14),d.setFont("helvetica","bold"),d.text("Seat Details",g,75),d.setFont("helvetica","normal"),d.setFontSize(11);let N=85;d.text("Total Seats: ".concat(n),g,N),N+=8,d.text("Seat Numbers: ".concat(c.join(", ")),g,N);let v=Math.max(b,N+=15);d.setFontSize(14),d.setFont("helvetica","bold"),d.text("Price Breakdown",20,v);let f=v+10;d.setFillColor(243,244,246),d.rect(20,f-5,m-40,12,"F"),d.setFontSize(10),d.setFont("helvetica","bold"),d.text("Seat Type",25,f+2),d.text("Quantity",80,f+2),d.text("Base Price",115,f+2),d.text("Total",155,f+2),f+=15,d.setFont("helvetica","normal");let j=0;r.forEach((e,t)=>{var a;t%2==0&&(d.setFillColor(249,250,251),d.rect(20,f-5,m-40,10,"F"));let s=((a=e.price)+.18*a+.05*a)*e.count;j+=s,d.text(e.seatType||"Standard",25,f+1),d.text(e.count.toString(),85,f+1),d.text("Rs.".concat(e.price||0),115,f+1),d.text("Rs.".concat(Math.round(s)),155,f+1),f+=10}),f+=5,d.setFontSize(9),d.setTextColor(107,114,128);let y=r.reduce((e,t)=>e+(t.price||0)*t.count,0);d.text("Subtotal: Rs.".concat(y),115,f),f+=8,d.text("Tax (18%): Rs.".concat(Math.round(.18*y)),115,f),f+=8,d.text("Convenience Fee (5%): Rs.".concat(Math.round(.05*y)),115,f),f+=10,d.setFillColor(99,102,241),d.rect(20,f-5,m-40,12,"F"),d.setTextColor(255,255,255),d.setFontSize(12),d.setFont("helvetica","bold"),d.text("TOTAL AMOUNT",25,f+2),d.text("Rs.".concat(Math.round(j)),155,f+2),f+=20;try{if(s.qrCode){d.setTextColor(31,41,55),d.setFontSize(14),d.setFont("helvetica","bold"),d.text("QR Code for Entry",20,f),f+=10;let e=encodeURIComponent(s.qrCode),t=await em.toDataURL(e,{errorCorrectionLevel:"H",width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"},rendererOpts:{quality:1}});d.addImage(t,"PNG",20,f,60,60,void 0,"FAST"),d.setFontSize(10),d.setFont("helvetica","normal"),d.text("Present this QR code at the theater entrance",90,f+15),d.text("for quick verification and entry.",90,f+25),d.setDrawColor(0,0,0),d.rect(19,f-1,62,62)}}catch(e){console.error("Error generating QR code for PDF:",e),d.setFontSize(10),d.text("QR Code generation failed. Use this URL:",20,f+10),s.qrCode&&d.text("".concat("http://localhost:5000/api","/common/verify-ticket/").concat(encodeURIComponent(s.qrCode)),20,f+20)}let k=m-60,A=s.status||"unknown";"confirmed"===A?d.setFillColor(34,197,94):"cancelled"===A?d.setFillColor(239,68,68):d.setFillColor(107,114,128),d.roundedRect(k,50,35,10,2,2,"F"),d.setTextColor(255,255,255),d.setFontSize(8),d.setFont("helvetica","bold"),d.text(A.toUpperCase(),k+2,56);let C=x.title||"Unknown_Movie",S=s.ticketId||"Unknown_ID",P="Cineora_Ticket_".concat(S,"_").concat(C.replace(/[^a-zA-Z0-9]/g,"_"),".pdf");d.save(P)};var eh=a(33991),eu=a(38564);let eg={className:"font-medium"},eb={className:"font-normal text-sm"},ep=e=>{let{isOpen:t,onClose:a,booking:r,onSuccess:l}=e,[c,i]=(0,n.useState)([]),[o,d]=(0,n.useState)(!1);if(!t)return null;let m=r.allTickets||[r],x=()=>c.reduce((e,t)=>{let a=m.find(e=>e._id===t);if(a){let t=a.price;if(a.coupon&&a.coupon.discountPercentage){let e=t*a.coupon.discountPercentage/100;t-=e}return e+(t+.18*a.price+.05*a.price)}return e},0),h=e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},u=async()=>{if(x(),0===c.length)return void P.Ay.error("Please select at least one ticket to cancel");try{d(!0);let e=x();await (0,ei.vA)(c,e),P.Ay.success("".concat(c.length," ticket(s) cancelled successfully")),l(),a()}catch(e){console.error("Cancellation failed:",e),P.Ay.error("Failed to cancel tickets")}finally{d(!1)}},g=x();return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md flex flex-col max-h-[90vh]",children:[(0,s.jsxs)("div",{className:"p-6 border-b flex-shrink-0",children:[(0,s.jsx)("h2",{className:"".concat(eg.className," text-xl font-bold text-gray-900 mb-2"),children:"Cancel Tickets"}),(0,s.jsx)("p",{className:"".concat(eb.className," text-gray-600"),children:"Select tickets you want to cancel"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[m.length>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("span",{className:"".concat(eg.className," text-gray-700"),children:["Select All Tickets (",m.length,")"]}),(0,s.jsx)("input",{type:"checkbox",checked:c.length===m.length&&m.length>0,onChange:()=>{c.length===m.length?i([]):i(m.map(e=>e._id))},className:"w-4 h-4 text-blue-600 rounded"})]}),(0,s.jsx)("div",{className:"space-y-3",children:m.map(e=>{let t=e.price;if(e.coupon&&e.coupon.discountPercentage){let a=t*e.coupon.discountPercentage/100;t-=a}let a=t+.18*e.price+.05*e.price;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ".concat(c.includes(e._id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>h(e._id),children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"".concat(eg.className," text-gray-900"),children:["Seat ",e.seatRow,e.seatNumber]}),(0,s.jsxs)("div",{className:"".concat(eb.className," text-gray-600"),children:[e.seatType," • ₹",Math.round(a)]})]}),(0,s.jsx)("input",{type:"checkbox",checked:c.includes(e._id),onChange:()=>h(e._id),className:"w-4 h-4 text-blue-600 rounded"})]},e._id)})})]})}),(0,s.jsxs)("div",{className:"p-6 border-t bg-gray-50 flex-shrink-0",children:[c.length>0&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-white rounded-lg border",children:[(0,s.jsx)("div",{className:"".concat(eb.className," text-gray-600"),children:"Cancellation Summary:"}),(0,s.jsxs)("div",{className:"".concat(eg.className," text-gray-900"),children:[c.length," ticket(s) - ₹",Math.round(g)]}),(0,s.jsx)("div",{className:"".concat(eb.className," text-gray-500 mt-1"),children:"Refund amount depends on cancellation time"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:a,className:"".concat(eg.className," flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"),children:"Cancel"}),(0,s.jsx)("button",{onClick:u,disabled:0===c.length||o,className:"".concat(eg.className," flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),children:o?"Cancelling...":"Cancel ".concat(c.length||""," Ticket").concat(1!==c.length?"s":"")})]})]})]})})},ew={className:"font-bold"},eN={className:"font-medium"},ev={className:"font-normal text-sm"},ef=e=>{var t,a;let{handleAddReview:r,booking:l,onViewDetails:c,activeTab:i,getTickets:o}=e,[d,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(!1),u=()=>{if(l.allTickets){let e=(e=>{if(!e||0===e.length)return[];let t=e.sort((e,t)=>e.seatRow!==t.seatRow?e.seatRow.localeCompare(t.seatRow):parseInt(e.seatNumber)-parseInt(t.seatNumber)),a={};return t.forEach(e=>{a[e.seatType]||(a[e.seatType]=[]),a[e.seatType].push(e)}),Object.entries(a).map(e=>{var t;let[a,s]=e,r=s.reduce((e,t)=>e+t.price,0),n=r*((null==(t=l.coupon)?void 0:t.discountPercentage)||0)/100,c=r-n,i=.18*r,o=.05*r;return{seatType:a,seats:s.map(e=>"".concat(e.seatRow).concat(e.seatNumber)),count:s.length,price:s.price,basePrice:r,discountAmount:n,discountedPrice:c,taxAmount:i,convenienceAmount:o,totalPrice:c+i+o}})})(l.allTickets),t=e.reduce((e,t)=>e+t.totalPrice,0),a=e.reduce((e,t)=>e+t.count,0),s=e.flatMap(e=>e.seats),r=e.reduce((e,t)=>e+t.discountAmount,0);return{groups:e,totalAmount:t,totalSeats:a,allSeats:s,totalDiscount:r,totalBasePrice:e.reduce((e,t)=>e+t.basePrice,0)}}{var e;let t=l.price,a=t*((null==(e=l.coupon)?void 0:e.discountPercentage)||0)/100,s=t-a,r=.18*t,n=.05*t,c=s+r+n;return{groups:[{seatType:l.seatType,seats:["".concat(l.seatRow).concat(l.seatNumber)],count:1,price:t,basePrice:t,discountAmount:a,discountedPrice:s,taxAmount:r,convenienceAmount:n,totalPrice:c}],totalAmount:c,totalSeats:1,allSeats:["".concat(l.seatRow).concat(l.seatNumber)],totalDiscount:a,totalBasePrice:t}}},g=e=>new Date(e).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),b=e=>e,p=async()=>{try{m(!0);let{groups:e,totalAmount:t,totalSeats:a,allSeats:s}=u();await ex({ticket:l,seatGroups:e,totalAmount:t,totalSeats:a,allSeats:s,formatDate:g,formatTime:b})}catch(e){console.error("PDF generation failed:",e)}finally{m(!1)}},w=l.allTickets&&l.allTickets.length>1,N=async()=>{try{let{totalAmount:e}=u();if(console.log("full booking datas",l.bookingId,Math.round(e)),!await (0,eh.f)({title:"Cancel entire booking?",message:"This will cancel all tickets in this booking. Do you want to continue?",confirmText:"Yes",cancelText:"No"}))return;await (0,ei.H0)(l.bookingId,Math.round(e)),P.Ay.success("Booking cancelled"),o(1)}catch(e){console.log(e),P.Ay.error("Failed to cancel booking")}},v=(e=>e.movie||e.movieId||{})(l),f=(e=>e.theater||e.theaterId||{})(l);(e=>e.showtime||e.showtimeId)(l);let{totalAmount:j,totalDiscount:y,totalBasePrice:k}=u();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl overflow-hidden backdrop-blur-xl hover:scale-[1.02] transition-transform duration-300 group",children:[(0,s.jsx)("div",{className:"w-40 shrink-0 relative bg-gray-800",children:(0,s.jsx)("img",{src:v.poster||"/placeholder-movie.jpg",alt:v.title||"Movie",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 px-7 py-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-white mb-2",children:[(0,s.jsx)("div",{className:"".concat(ew.className," text-xl"),children:v.title||"Unknown Movie"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["confirmed"===l.status&&!l.isUsed&&"history"===i&&(0,s.jsxs)("button",{onClick:()=>r(l),className:"".concat(eN.className," justify-center items-center flex gap-0.5 px-1.5 py-0.5 rounded-lg bg-yellow-500 text-black hover:bg-yellow-600 transition"),children:[(0,s.jsx)(eu.A,{size:13,className:"fill-current text-black"}),"Add Review"]}),"cancelled"===l.status&&(0,s.jsx)("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-600 border border-red-200",children:"Cancelled"})]})]}),(0,s.jsxs)("p",{className:"".concat(ev.className," text-gray-300 mb-4"),children:[f.name||"Unknown Theater"," - Screen: ",(null==(t=l.screen)?void 0:t.name)||"N/A"]}),(0,s.jsxs)("div",{className:"".concat(eN.className," flex items-center gap-8 mt-2 text-base text-white"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2z"})}),(0,s.jsx)("span",{children:g(l.showDate)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:b(l.showTime)})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 mt-4 mb-6",children:[(0,s.jsx)("span",{className:"".concat(ev.className," bg-white/10 text-white px-3 py-1.5 rounded-lg font-medium border border-white/20"),children:l.seatType}),(0,s.jsx)("span",{className:"".concat(ev.className," bg-white/10 text-white px-3 py-1.5 rounded-lg font-medium border border-white/20"),children:w?"".concat(l.allTickets.length," Seats"):"Seat: ".concat(l.seatRow).concat(l.seatNumber)}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:y>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"".concat(ev.className," bg-white/10 text-white px-3 py-1.5 rounded-lg font-medium border border-white/20 line-through "),children:["₹",Math.round(k+.23*k)," "]}),(0,s.jsxs)("span",{className:"".concat(ev.className," bg-green-500/20 text-green-400 px-3 py-1.5 rounded-lg font-medium border border-green-400/20"),children:["₹",Math.round(j)]}),l.coupon&&(0,s.jsxs)("span",{className:"".concat(ev.className," bg-orange-500/20 text-orange-400 px-2 py-1 rounded text-xs border border-orange-400/20"),children:[l.coupon.discountPercentage,"% OFF"]})]}):(0,s.jsxs)("span",{className:"".concat(ev.className," bg-white/10 text-white px-3 py-1.5 rounded-lg font-medium border border-white/20"),children:["₹",Math.round(j)]})})]}),(0,s.jsxs)("div",{className:"mt-auto flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>c(l),className:"".concat(eN.className," bg-transparent text-white px-5 py-2.5 rounded-xl border border-white hover:bg-white/10 transition-colors text-sm"),children:"View Details"}),(0,s.jsx)("button",{onClick:p,disabled:d,className:"".concat(eN.className," bg-transparent text-white px-5 py-2.5 rounded-xl border border-white hover:bg-white/10 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed"),children:d?"Generating...":"Download PDF"}),"confirmed"===l.status&&!l.isUsed&&"upcoming"===i&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{if(l.allTickets[0].isInvited)return void(0,P.Ay)("This ticket seams to be bought from group invites.\nPlease cancell this from there.",{duration:6e3});h(!0)},className:"".concat(eN.className," bg-transparent text-white/70 px-5 py-2.5 rounded-xl border border-white/50 hover:bg-orange-900/20 hover:text-orange-400 hover:border-orange-500/30 transition-colors text-sm"),children:w?"Select & Cancel":"Cancel Ticket"}),w&&(0,s.jsx)("button",{onClick:N,className:"".concat(eN.className," bg-transparent text-white/70 px-5 py-2.5 rounded-xl border border-white/50 hover:bg-red-900/20 hover:text-red-400 hover:border-red-500/30 transition-colors text-sm"),children:"Cancel All"})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center w-24 bg-white border-l border-white/20 relative",children:[(0,s.jsx)(eo,{code:l.qrCode}),(0,s.jsx)("div",{className:"".concat(ev.className," absolute bottom-4 left-1/2 transform -translate-x-1/2 text-xs text-gray-700 font-mono"),children:(null==(a=l.ticketId)?void 0:a.slice(0,7))||"N/A"})]})]}),(0,s.jsx)(ep,{isOpen:x,onClose:()=>h(!1),booking:l,onSuccess:()=>{o(1)}})]})};var ej=a(17580),ey=a(43332),ek=a(47863),eA=a(66474),eC=a(91788),eS=a(66516);let eP=e=>{let{data:t,size:a=128}=e,[r,l]=(0,n.useState)(""),[c,i]=(0,n.useState)(!0),[o,d]=(0,n.useState)("");return((0,n.useEffect)(()=>{let e=async()=>{try{i(!0),d("");let e=encodeURIComponent(t),s=await em.toDataURL(e,{errorCorrectionLevel:"H",width:a,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});l(s)}catch(e){console.error("QR code generation failed:",e),d("Failed to generate QR code")}finally{i(!1)}};t&&e()},[t,a]),c)?(0,s.jsx)("div",{className:"w-".concat(a/4," h-").concat(a/4," bg-gray-200 rounded flex items-center justify-center"),children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):o?(0,s.jsx)("div",{className:"w-".concat(a/4," h-").concat(a/4," bg-red-100 rounded flex items-center justify-center"),children:(0,s.jsx)("span",{className:"text-xs text-red-600",children:o})}):(0,s.jsx)("img",{src:r,alt:"QR Code",className:"rounded",style:{width:a,height:a}})},eT={className:"font-bold"},eE={className:"font-medium"},eF={className:"font-normal text-sm"},eM=e=>{var t,a;let{ticket:r,onClose:l,activeTab:c}=e,[o,d]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),h=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),u=e=>e,{groups:b,totalAmount:p,totalSeats:w,allSeats:N,totalDiscount:v,totalBasePrice:f,totalTax:y,totalConvenience:k}=(()=>{if(r.allTickets){let e=(e=>{if(!e||0===e.length)return[];let t=e.sort((e,t)=>e.seatRow!==t.seatRow?e.seatRow.localeCompare(t.seatRow):parseInt(e.seatNumber)-parseInt(t.seatNumber)),a={};return t.forEach(e=>{a[e.seatType]||(a[e.seatType]=[]),a[e.seatType].push(e)}),Object.entries(a).map(e=>{var t;let[a,s]=e,l=s.reduce((e,t)=>e+t.price,0),n=l*((null==(t=r.coupon)?void 0:t.discountPercentage)||0)/100,c=l-n,i=.18*l,o=.05*l;return{seatType:a,seats:s.map(e=>"".concat(e.seatRow).concat(e.seatNumber)),count:s.length,price:s.price,basePrice:l,discountAmount:n,discountedPrice:c,taxAmount:i,convenienceAmount:o,totalPrice:c+i+o}})})(r.allTickets),t=e.reduce((e,t)=>e+t.totalPrice,0),a=e.reduce((e,t)=>e+t.count,0),s=e.flatMap(e=>e.seats),l=e.reduce((e,t)=>e+t.discountAmount,0),n=e.reduce((e,t)=>e+t.basePrice,0);return{groups:e,totalAmount:t,totalSeats:a,allSeats:s,totalDiscount:l,totalBasePrice:n,totalTax:e.reduce((e,t)=>e+t.taxAmount,0),totalConvenience:e.reduce((e,t)=>e+t.convenienceAmount,0)}}{var e;let t=r.price,a=t*((null==(e=r.coupon)?void 0:e.discountPercentage)||0)/100,s=t-a,l=.18*s,n=.05*s,c=s+l+n;return{groups:[{seatType:r.seatType,seats:["".concat(r.seatRow).concat(r.seatNumber)],count:1,price:t,basePrice:t,discountAmount:a,discountedPrice:s,taxAmount:l,convenienceAmount:n,totalPrice:c}],totalAmount:c,totalSeats:1,allSeats:["".concat(r.seatRow).concat(r.seatNumber)],totalDiscount:a,totalBasePrice:t,totalTax:l,totalConvenience:n}}})(),A=(e=>e.movie||e.movieId||{})(r),S=(e=>e.theater||e.theaterId||{})(r);(e=>e.showtime||e.showtimeId)(r);let P=async()=>{try{x(!0),await ex({ticket:r,seatGroups:b,totalAmount:p,totalSeats:w,allSeats:N,formatDate:h,formatTime:u})}catch(e){console.error("PDF generation failed:",e)}finally{x(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"backdrop-blur-sm bg-black/20 border border-gray-500/30 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-500/30",children:[(0,s.jsx)("h2",{className:"".concat(eT.className," text-2xl text-white"),children:"Ticket Details"}),(0,s.jsx)("button",{onClick:l,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,s.jsx)(g.A,{className:"w-5 h-5 text-white"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)("img",{src:A.poster||"/placeholder-movie.jpg",alt:A.title||"Movie",className:"w-32 h-48 rounded-lg object-cover"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"".concat(eT.className," text-xl text-white mb-4"),children:A.title||"Unknown Movie"}),(0,s.jsxs)("div",{className:"space-y-3 text-gray-300",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(C.A,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("span",{className:"".concat(eE.className," text-white"),children:[S.name||"Unknown Theater"," - Screen: ",(null==(t=r.screen)?void 0:t.name)||"N/A"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(i.A,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("span",{className:"".concat(eE.className," text-white"),children:h(r.showDate)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(j.A,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("span",{className:"".concat(eE.className," text-white"),children:u(r.showTime)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(ej.A,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("span",{className:"".concat(eE.className," text-white"),children:[w," Seat",w>1?"s":""]})]}),r.coupon&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(ey.A,{className:"w-4 h-4 text-green-400"}),(0,s.jsxs)("span",{className:"".concat(eE.className," text-green-400"),children:[r.coupon.name," (",r.coupon.discountPercentage,"% OFF)"]})]})]})]})]}),(0,s.jsxs)("div",{className:"backdrop-blur-sm bg-black/20 rounded-2xl p-6 border border-gray-500/30",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"".concat(eE.className," text-white text-lg"),children:[w," Seat",w>1?"s":""," Selected"]}),(0,s.jsx)("p",{className:"".concat(eF.className," text-gray-300"),children:N.join(", ")}),r.coupon&&v>0&&(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs border border-green-400/20",children:r.coupon.uniqueId}),(0,s.jsxs)("span",{className:"".concat(eF.className," text-green-400"),children:["₹",Math.round(v)," saved"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[v>0?(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"".concat(eF.className," text-gray-400 line-through"),children:["₹",Math.round(f+y+k)]}),(0,s.jsxs)("p",{className:"".concat(eT.className," text-green-400 text-xl"),children:["₹",Math.round(p)]})]}):(0,s.jsxs)("p",{className:"".concat(eT.className," text-white text-xl"),children:["₹",Math.round(p)]}),(0,s.jsx)("p",{className:"".concat(eF.className," text-gray-300"),children:"Total Amount"})]})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("button",{onClick:()=>d(!o),className:"".concat(eF.className," flex items-center gap-2 text-gray-400 hover:text-white transition-all duration-200 text-sm"),children:[(0,s.jsx)(V.A,{className:"w-4 h-4"}),"See Details",o?(0,s.jsx)(ek.A,{className:"w-4 h-4"}):(0,s.jsx)(eA.A,{className:"w-4 h-4"})]})}),o&&(0,s.jsxs)("div",{className:"mb-4 p-4 rounded-xl bg-black/30 border border-gray-600/30",children:[(0,s.jsx)("h4",{className:"".concat(eE.className," text-white text-sm mb-3"),children:"Price Breakdown"}),b.map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"mb-4 p-3 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"VIP"===e.seatType?"#EAB308":"Premium"===e.seatType?"#9333EA":"#06B6D4",borderColor:"VIP"===e.seatType?"#CA8A04":"Premium"===e.seatType?"#7C3AED":"#0891B2"}}),(0,s.jsxs)("span",{className:"".concat(eF.className," text-gray-300 text-sm"),children:[e.seatType," \xd7 ",e.count]})]}),(0,s.jsxs)("span",{className:"".concat(eF.className," text-white text-sm font-medium"),children:["₹",Math.round(e.totalPrice)]})]}),(0,s.jsxs)("div",{className:"ml-6 space-y-1 text-xs text-gray-400",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:["Base Price: ₹",e.price," \xd7 ",e.count]}),(0,s.jsxs)("span",{children:["₹",Math.round(e.basePrice)]})]}),e.discountAmount>0&&(0,s.jsxs)("div",{className:"flex justify-between text-green-400",children:[(0,s.jsxs)("span",{children:["Coupon Discount (",null==(a=r.coupon)?void 0:a.discountPercentage,"%)"]}),(0,s.jsxs)("span",{children:["-₹",Math.round(e.discountAmount)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"After Discount"}),(0,s.jsxs)("span",{children:["₹",Math.round(e.discountedPrice)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Tax (18%)"}),(0,s.jsxs)("span",{children:["₹",Math.round(e.taxAmount)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Convenience Fee (5%)"}),(0,s.jsxs)("span",{children:["₹",Math.round(e.convenienceAmount)]})]})]})]},t)}),(0,s.jsxs)("div",{className:"border-t border-gray-500/30 pt-3 mt-3 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-300",children:[(0,s.jsx)("span",{children:"Subtotal"}),(0,s.jsxs)("span",{children:["₹",Math.round(f)]})]}),v>0&&(0,s.jsxs)("div",{className:"flex justify-between text-sm text-green-400",children:[(0,s.jsx)("span",{children:"Coupon Discount"}),(0,s.jsxs)("span",{children:["-₹",Math.round(v)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-300",children:[(0,s.jsx)("span",{children:"Tax"}),(0,s.jsxs)("span",{children:["₹",Math.round(y)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-300",children:[(0,s.jsx)("span",{children:"Convenience Fee"}),(0,s.jsxs)("span",{children:["₹",Math.round(k)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-500/30",children:[(0,s.jsx)("span",{className:"".concat(eE.className," text-white text-base font-semibold"),children:"TOTAL"}),(0,s.jsxs)("span",{className:"".concat(eT.className," text-white text-lg"),children:["₹",Math.round(p)]})]})]})]})]}),r.coupon&&(0,s.jsxs)("div",{className:"backdrop-blur-sm bg-gradient-to-r from-green-900/20 to-emerald-900/20 border border-green-500/30 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(ey.A,{className:"w-5 h-5 text-green-400"}),(0,s.jsx)("h4",{className:"".concat(eE.className," text-green-400 text-lg"),children:"Coupon Applied"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"".concat(eF.className," text-gray-300"),children:"Coupon Name:"}),(0,s.jsx)("p",{className:"".concat(eE.className," text-white"),children:r.coupon.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"".concat(eF.className," text-gray-300"),children:"Coupon Code:"}),(0,s.jsx)("p",{className:"".concat(eE.className," text-white font-mono"),children:r.coupon.uniqueId})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"".concat(eF.className," text-gray-300"),children:"Discount:"}),(0,s.jsxs)("p",{className:"".concat(eE.className," text-green-400"),children:[r.coupon.discountPercentage,"% OFF"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"".concat(eF.className," text-gray-300"),children:"You Saved:"}),(0,s.jsxs)("p",{className:"".concat(eE.className," text-green-400"),children:["₹",Math.round(v)]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"backdrop-blur-sm bg-black/20 border border-gray-500/30 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"".concat(eE.className," text-gray-300 text-sm mb-2"),children:"Ticket ID"}),(0,s.jsx)("p",{className:"".concat(eT.className," text-white font-mono text-sm"),children:r.ticketId||"N/A"})]}),(0,s.jsxs)("div",{className:"backdrop-blur-sm bg-black/20 border border-gray-500/30 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"".concat(eE.className," text-gray-300 text-sm mb-2"),children:"Status"}),(0,s.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold ".concat("confirmed"===r.status?"bg-green-900/30 text-green-400":"cancelled"===r.status?"bg-red-900/30 text-red-400":"bg-gray-700/30 text-gray-400"),children:(null==(a=r.status)?void 0:a.toUpperCase())||"UNKNOWN"})]}),(0,s.jsxs)("div",{className:"backdrop-blur-sm bg-black/20 border border-gray-500/30 rounded-lg p-4 col-span-2",children:[(0,s.jsx)("h4",{className:"".concat(eE.className," text-gray-300 text-sm mb-2"),children:"Booked On"}),(0,s.jsx)("p",{className:"".concat(eT.className," text-white text-sm"),children:r.createdAt?new Date(r.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]})]}),(0,s.jsxs)("div",{className:"backdrop-blur-sm bg-black/20 border border-gray-500/30 rounded-lg p-6 text-center",children:[(0,s.jsx)("h4",{className:"".concat(eE.className," text-gray-300 mb-4"),children:"QR Code for Entry"}),(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg inline-block",children:r.qrCode?(0,s.jsx)(eP,{data:r.qrCode,size:128}):(0,s.jsx)("div",{className:"w-32 h-32 bg-gray-200 rounded flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"No QR Code"})})}),(0,s.jsx)("p",{className:"".concat(eF.className," text-gray-300 mt-3"),children:"Show this QR code at the theater entrance"})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsxs)("button",{onClick:P,disabled:m,className:"".concat(eE.className," flex items-center gap-2 px-6 py-3 bg-white text-black rounded-xl hover:bg-gradient-to-tr hover:from-violet-300 hover:to-yellow-100 transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100"),children:[(0,s.jsx)(eC.A,{className:"w-4 h-4"}),m?"Generating PDF...":"Download PDF"]}),(0,s.jsxs)("button",{className:"".concat(eE.className," flex items-center gap-2 px-6 py-3 border border-gray-500/30 text-white rounded-xl hover:bg-white/10 transition-colors"),children:[(0,s.jsx)(eS.A,{className:"w-4 h-4"}),"Share Ticket"]})]})]})]})})},eI=e=>{let{activeTab:t,onTabChange:a,tabCounts:r}=e,l={className:"font-medium"},n=[{key:"upcoming",label:"UPCOMING",count:r.upcoming},{key:"history",label:"HISTORY",count:r.history},{key:"cancelled",label:"CANCELLED",count:r.cancelled}];return(0,s.jsx)("div",{className:"flex items-center justify-center gap-8 mb-8",children:n.map(e=>{let{key:r,label:n,count:c}=e;return(0,s.jsxs)("button",{onClick:()=>a(r),className:"".concat(l.className," relative px-4 py-3 transition-all duration-300 group"),children:[t===r&&(0,s.jsx)("div",{className:"absolute inset-0 blur-lg opacity-30",children:(0,s.jsx)("p",{className:"tracking-[0.3em] text-cyan-400 text-sm font-extralight",children:n.toUpperCase()})}),(0,s.jsxs)("div",{className:"relative z-10 flex items-center gap-2",children:[(0,s.jsx)("p",{className:"tracking-[0.3em] text-sm font-extralight transition-colors duration-200 ".concat(t===r?"text-white":"text-gray-400 group-hover:text-gray-300"),children:n}),c>0&&(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs transition-colors duration-200 ".concat(t===r?" text-white  ":" text-gray-400"),children:c})]}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gray-300 transition-all duration-300 ".concat(t===r?"opacity-100 scale-x-100":"opacity-0 scale-x-0")})]},r)})})},eR=e=>{let{activeTab:t}=e,a={className:"font-bold"};return(0,s.jsxs)("div",{className:"text-center bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl p-12 backdrop-blur-xl",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-white/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:"upcoming"===t?(0,s.jsx)("svg",{className:"w-8 h-8 text-white/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,s.jsx)("svg",{className:"w-8 h-8 text-white/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,s.jsx)("h3",{className:"".concat(a.className," text-xl text-white mb-2"),children:"upcoming"===t?"No Upcoming Shows":"No Show History"}),(0,s.jsx)("p",{className:"".concat("font-normal text-sm"," text-gray-400 mb-6"),children:"upcoming"===t?"You don't have any upcoming movie shows. Start exploring movies!":"You don't have any completed shows yet."}),"upcoming"===t&&(0,s.jsx)("button",{className:"".concat(a.className," bg-white text-black px-6 py-3 rounded-xl hover:bg-white/90 transition-colors"),children:"Browse Movies"})]})},eL=e=>{let{isOpen:t,onClose:a,selectedBooking:r,rating:l,setRating:n,reviewText:c,setReviewText:i,onSubmit:o,submittingReview:d,reviewType:m,setReviewType:x}=e;if(!t)return null;let h=(e=>e.movie||e.movieId||{})(r),u=(e=>e.theater||e.theaterId||{})(r);return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"bg-black border border-white/20 rounded-2xl p-6 w-2xl  mx-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Add Review"}),(0,s.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4 p-3 bg-white/5 border border-white/10 rounded-lg",children:[(0,s.jsx)("img",{src:h.poster||"/placeholder-movie.jpg",alt:h.title||"Movie",className:"w-12 h-16 rounded object-cover"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-white",children:h.title||"Unknown Movie"}),(0,s.jsx)("p",{className:"text-sm text-gray-300",children:u.name||"Unknown Theater"}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:(null==r?void 0:r.showDate)?new Date(r.showDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"No date available"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-white mb-2",children:["Review Type ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>x("movie"),className:"flex-1 px-4 py-2 rounded-lg border transition-all duration-200 ".concat("movie"===m?"bg-white text-black border-white":"bg-transparent text-white border-white/30 hover:border-white/60 hover:bg-white/5"),children:"Movie"}),(0,s.jsx)("button",{type:"button",onClick:()=>x("theater"),className:"flex-1 px-4 py-2 rounded-lg border transition-all duration-200 ".concat("theater"===m?"bg-white text-black border-white":"bg-transparent text-white border-white/30 hover:border-white/60 hover:bg-white/5"),children:"Theater"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-white mb-2",children:["Rating ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>n(e),className:"w-8 h-8 transition-colors ".concat(e<=l?"text-yellow-400":"text-gray-600"),children:(0,s.jsx)(eu.A,{className:"w-full h-full fill-current"})},e))}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:l>0?"".concat(l," star").concat(l>1?"s":""):"Click to rate"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-white mb-2",children:["Review ",(0,s.jsx)("span",{className:"text-gray-400",children:"(Optional)"})]}),(0,s.jsx)("textarea",{value:c,onChange:e=>i(e.target.value),placeholder:(()=>{switch(m){case"movie":return"Share your thoughts about the movie - plot, acting, direction...";case"theater":return"Share your experience about the theater - facilities, sound, screen quality, seating...";case"experience":return"Share your overall experience about the movie and theater...";default:return"Share your experience..."}})(),className:"w-full p-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 resize-none",rows:4,maxLength:500}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[c.length,"/500 characters"]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-white/30 text-white rounded-lg hover:bg-white/5 hover:border-white/60 transition-colors",disabled:d,children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:o,disabled:0===l||d,className:"flex-1 px-4 py-2 bg-white text-black rounded-lg hover:bg-gray-200 transition-colors disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:d?"Submitting...":"Submit Review"})]})]})})};var eD=a(46e3);let ez={className:"font-bold"},e_=()=>{let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(!0),[l,c]=(0,n.useState)(!1),[i,o]=(0,n.useState)(null),[d,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(!1),[u,g]=(0,n.useState)("upcoming"),[b,p]=(0,n.useState)({upcoming:0,history:0,cancelled:0}),[w,N]=(0,n.useState)(!1),[v,f]=(0,n.useState)(0),[j,y]=(0,n.useState)(null),[k,A]=(0,n.useState)(""),[C,S]=(0,n.useState)(!1),[T,E]=(0,n.useState)(1),[F,M]=(0,n.useState)("movie"),[I]=(0,n.useState)(10),[R,L]=(0,n.useState)(!0),[D,z]=(0,n.useState)(0),_=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let l;if(1===e?r(!0):c(!0),a)l=a;else switch(u){case"upcoming":default:l="upcoming";break;case"history":l="history";break;case"cancelled":l="cancelled"}let n=await (0,ei.wz)(e,I,l);console.log(n),n.success?(s&&e>1?t(e=>[...e,...n.data]):t(n.data),p(e=>({...e,[u]:n.meta.pagination.total})),z(n.meta.pagination.total),L(n.meta.pagination.hasNextPage),o(null)):o(n.message||"Failed to load tickets")}catch(e){console.error("Error fetching tickets:",e),o("Failed to load tickets")}finally{r(!1),c(!1)}},O=(0,n.useCallback)(()=>{if(!l&&R&&!a){let e=T+1;E(e),_(e,void 0,!0)}},[l,R,a,T]);(0,n.useEffect)(()=>{let e=()=>{let e=window.pageYOffset||document.documentElement.scrollTop;e+window.innerHeight>=document.documentElement.scrollHeight-300&&O()};return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e)}},[O]),(0,n.useEffect)(()=>{E(1),t([]),_(1)},[u]);let B=e=>{m(e),h(!0)},U=e=>{y(e),N(!0)},V=async()=>{var e,a,s,r,l;if(0===v)return void P.Ay.error("Please select a rating");let n={movieId:(null==(e=j.movie)?void 0:e._id)||j.movieId,theaterId:(null==(a=j.theater)?void 0:a._id)||j.theaterId,bookingId:j.bookingId,rating:v,reviewText:k,reviewType:F};try{S(!0),await (0,eD.kD)(n),P.Ay.success("Review submitted successfully!"),N(!1),f(0),A(""),E(1),t([]),_(1)}catch(e){if(null==e||null==(l=e.response)||null==(r=l.data)||null==(s=r.message)?void 0:s.includes("already reviewed"))return void(0,P.Ay)("You have already reviewed this show!",{style:{borderRadius:"10px",background:"#333",color:"#fff"}});console.error("Failed to submit review:",e),P.Ay.error("Failed to submit review. Please try again.")}finally{S(!1)}};if(a)return(0,s.jsx)("div",{className:"min-h-screen bg-transparent p-12 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-white text-xl",children:(0,s.jsx)(ee.A,{text:"Loading your tickets"})})});if(i&&0===e.length)return(0,s.jsx)("div",{className:"min-h-screen bg-transparent p-12 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-red-400 text-xl",children:i})});let W=(e=>e&&0!==e.length?Object.values(e.reduce((e,t)=>(e[t.bookingId]||(e[t.bookingId]=[]),e[t.bookingId].push(t),e),{})).map(e=>{let t=e[0],a=e.reduce((e,t)=>e+t.price,0);return{...t,seats:e.map(e=>"".concat(e.seatRow).concat(e.seatNumber)),allTickets:e,totalPrice:a+.18*a+.05*a}}):[])(e);return(0,s.jsx)("div",{className:"min-h-screen bg-transparent p-12",children:(0,s.jsxs)("div",{className:"mx-auto max-w-5xl space-y-7",children:[(0,s.jsx)("div",{className:"mb-10",children:(0,s.jsx)("h1",{className:"".concat(ez.className," text-5xl text-center text-white mb-2"),children:"My Tickets"})}),(0,s.jsx)(eI,{activeTab:u,onTabChange:g,tabCounts:b}),W.map(e=>(0,s.jsx)(ef,{handleAddReview:U,getTickets:()=>{E(1),t([]),_(1)},activeTab:u,booking:e,onViewDetails:B},e._id)),l&&(0,s.jsx)("div",{className:"flex justify-center mt-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-white",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}),(0,s.jsx)("span",{children:"Loading more tickets..."})]})}),R&&!a&&!l&&(0,s.jsx)("div",{className:"flex justify-center mt-8",children:(0,s.jsx)("button",{onClick:O,className:"px-8 py-3 bg-white/10 border border-white/20 text-white rounded-xl hover:bg-white/20 hover:border-white/40 transition-all duration-200",children:"Load More"})}),!R&&W.length>0&&(0,s.jsx)("div",{className:"text-center text-gray-400 text-sm py-8",children:"You've reached the end of your tickets"}),0===W.length&&!a&&(0,s.jsx)(eR,{activeTab:u}),D>0&&W.length>0&&(0,s.jsxs)("div",{className:"text-center text-gray-400 text-sm",children:["Showing ",W.length," of ",D," bookings"]}),x&&d&&(0,s.jsx)(eM,{activeTab:u,ticket:d,onClose:()=>{h(!1),m(null)}}),(0,s.jsx)(eL,{setReviewType:M,reviewType:F,isOpen:w,onClose:()=>N(!1),selectedBooking:j,rating:v,setRating:f,reviewText:k,setReviewText:A,onSubmit:V,submittingReview:C})]})})};var eO=a(7430);let eB=()=>(0,s.jsx)("div",{className:"min-h-screen bg-transparent p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("div",{className:"h-8 bg-white/10 rounded-lg w-48 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-5 bg-white/5 rounded w-64 animate-pulse"})]}),(0,s.jsxs)("div",{className:"bg-white/10 border border-white/10 rounded-2xl p-7 mb-6 animate-pulse",children:[(0,s.jsx)("div",{className:"h-6 bg-white/10 rounded w-32 mb-4"}),(0,s.jsx)("div",{className:"h-12 bg-white/10 rounded w-48 mb-6"}),(0,s.jsx)("div",{className:"flex gap-3",children:(0,s.jsx)("div",{className:"h-12 bg-white/10 rounded-xl flex-1"})})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[1,2,3].map(e=>(0,s.jsxs)("div",{className:"bg-white/10 border border-white/10 rounded-2xl p-6 animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-white/10 rounded w-24 mb-2"}),(0,s.jsx)("div",{className:"h-8 bg-white/10 rounded w-20"})]},e))}),(0,s.jsxs)("div",{className:"bg-white/10 border border-white/10 rounded-2xl p-7 animate-pulse",children:[(0,s.jsx)("div",{className:"h-6 bg-white/10 rounded w-40 mb-6"}),(0,s.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"h-16 bg-white/5 rounded-xl"},e))})]})]})}),eU=e=>{let{error:t}=e;return(0,s.jsx)("div",{className:"min-h-screen bg-transparent p-6",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-2xl p-6 text-center",children:[(0,s.jsx)("p",{className:"text-red-400",children:t}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:"Retry"})]})})})};var eV=a(29676);let eW={className:"font-bold"},eH={className:"font-medium"},eq={className:"font-normal text-sm"},eY=e=>{let{transactions:t}=e,[a,r]=(0,n.useState)(!1),[l,c]=(0,n.useState)(null),[i,o]=(0,n.useState)(!1),d=(0,n.useRef)(null),m=function(e){var t,a;arguments.length>1&&void 0!==arguments[1]&&arguments[1];let s=[];return(null==(t=e.movieId)?void 0:t.title)&&s.push(e.movieId.title),(null==(a=e.theaterId)?void 0:a.name)&&s.push(e.theaterId.name),e.transactionId&&s.push("ID: ".concat(e.transactionId.slice(-6))),s.join(" • ")},x=()=>{d.current&&clearTimeout(d.current),o(!1),c(null)},h=a?t:t.slice(0,5);return(0,s.jsxs)(s.Fragment,{children:[i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40 z-40 pointer-events-none"}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl p-6 backdrop-blur-xl relative",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"".concat(eW.className," text-xl text-white"),children:"Transaction History"}),t.length>5&&(0,s.jsx)("button",{onClick:()=>r(!a),className:"".concat(eq.className," text-gray-400 hover:text-white transition-colors"),children:a?"Show Less":"View All"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[h.map(e=>{let t=i&&l===e._id,a=i&&l!==e._id;return(0,s.jsxs)("div",{className:"relative flex items-center justify-between p-3 rounded-lg transition-all duration-300 cursor-pointer ".concat(t?"transform scale-110 bg-white/80 shadow-2xl z-50 border border-white/50":a?"bg-black/40 opacity-50":"bg-white/5 hover:bg-white/10"),onMouseEnter:()=>{var t;return t=e._id,void(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{c(t),o(!0)},1e3))},onMouseLeave:x,children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("credit"===e.type?"bg-green-400":"bg-red-400")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"".concat(eH.className," ").concat(t?"text-black":"text-white"," text-sm"),children:e.description}),(0,s.jsxs)("div",{className:"".concat(eq.className," ").concat(t?"text-gray-700":"text-gray-400"," flex items-center gap-2"),children:[(0,s.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{className:"capitalize",children:e.category}),m(e,t)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{className:t?"":"truncate max-w-32",children:m(e,t)})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"".concat(eq.className," px-2 py-1 rounded border text-xs ").concat(function(e){switch(e){case"completed":return"bg-green-900/20 text-green-400 border-green-500/30";case"pending":return"bg-yellow-900/20 text-yellow-400 border-yellow-500/30";case"failed":return"bg-red-900/20 text-red-400 border-red-500/30";default:return"bg-gray-700/20 text-gray-400 border-gray-500/30"}}(e.status)),children:e.status}),(0,s.jsxs)("div",{className:"".concat(eH.className," ").concat("credit"===e.type?"text-green-400":"text-red-400"),children:["credit"===e.type?"+":"-","₹",e.amount.toLocaleString()]})]})]},e._id)}),(!t||0===t.length)&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-700/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(eV.A,{className:"w-8 h-8 text-gray-500"})}),(0,s.jsx)("div",{className:"".concat(eH.className," text-gray-400 mb-2"),children:"No transactions yet"}),(0,s.jsx)("div",{className:"".concat(eq.className," text-gray-500"),children:"Your transaction history will appear here"})]})]})]})]})};var eG=a(84616);let eQ={className:"font-bold"},eZ={className:"font-medium"},eK={className:"font-normal text-sm"},eX=e=>{let{balance:t,monthlySpent:a,totalTransactions:r,cashbackEarned:l,onAddMoney:c}=e,[i,d]=(0,n.useState)(!0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl overflow-hidden backdrop-blur-xl mb-8",children:(0,s.jsxs)("div",{className:"px-7 py-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center border border-white/20",children:(0,s.jsx)(o.A,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"".concat(eQ.className," text-xl text-white"),children:"My Wallet"}),(0,s.jsx)("p",{className:"".concat(eK.className," text-gray-300"),children:"Available Balance"})]})]}),(0,s.jsx)("button",{onClick:()=>d(!i),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i?(0,s.jsx)(V.A,{className:"w-5 h-5 text-gray-400"}):(0,s.jsx)(U.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"".concat(eQ.className," text-4xl text-white mb-2"),children:i?"₹".concat((null==t?void 0:t.toLocaleString())||"0"):"₹••••••"}),(0,s.jsxs)("div",{className:"".concat(eK.className," text-gray-400"),children:["Last updated: Today, ",new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]}),(0,s.jsx)("div",{className:"flex gap-3",children:(0,s.jsxs)("button",{onClick:c,className:"".concat(eZ.className," bg-white/10 text-white px-6 py-3 rounded-xl border border-white/20 hover:bg-white/20 transition-colors text-sm flex items-center gap-2 flex-1"),children:[(0,s.jsx)(eG.A,{className:"w-4 h-4"}),"Add Money"]})})]})}),(0,s.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl p-6 backdrop-blur-xl",children:[(0,s.jsx)("div",{className:"".concat(eZ.className," text-gray-300 text-sm mb-2"),children:"This Month Spent"}),(0,s.jsxs)("div",{className:"".concat(eQ.className," text-2xl text-white"),children:["₹",a.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl p-6 backdrop-blur-xl",children:[(0,s.jsx)("div",{className:"".concat(eZ.className," text-gray-300 text-sm mb-2"),children:"Total Transactions"}),(0,s.jsx)("div",{className:"".concat(eQ.className," text-2xl text-white"),children:r})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl p-6 backdrop-blur-xl",children:[(0,s.jsx)("div",{className:"".concat(eZ.className," text-gray-300 text-sm mb-2"),children:"Cashback Earned"}),(0,s.jsxs)("div",{className:"".concat(eQ.className," text-2xl text-green-400"),children:["₹",l.toLocaleString()]})]})]})]})},e$={className:"font-medium"},eJ={className:"font-normal text-sm"},e0=e=>{let{amount:t,customAmount:a,onAmountChange:r,onCustomAmountChange:l,onContinue:n}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"".concat(e$.className," text-white text-sm mb-3 block"),children:"Enter Amount"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg",children:"₹"}),(0,s.jsx)("input",{type:"number",value:a||t,onChange:e=>l(e.target.value),className:"w-full bg-white/10 border border-white/20 rounded-xl pl-8 pr-4 py-3 text-white text-lg focus:outline-none focus:border-white/40 transition-colors",placeholder:"Enter amount",min:"10",max:"50000"})]}),(0,s.jsx)("p",{className:"".concat(eJ.className," text-gray-400 mt-2"),children:"Minimum ₹10, Maximum ₹50,000"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"".concat(e$.className," text-white text-sm mb-3 block"),children:"Quick Select"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[100,200,500,1e3,2e3,5e3].map(e=>(0,s.jsx)("button",{onClick:()=>r(e),className:"p-3 rounded-xl border transition-colors ".concat(t!==e||a?"bg-white/5 border-white/10 text-gray-300 hover:bg-white/10":"bg-white/20 border-white/40 text-white"),children:(0,s.jsxs)("span",{className:"".concat(e$.className," text-sm"),children:["₹",e.toLocaleString()]})},e))})]}),(0,s.jsxs)("button",{onClick:n,disabled:t<10,className:"w-full py-3 rounded-xl transition-colors ".concat(t>=10?"bg-white/20 border border-white/30 text-white hover:bg-white/30":"bg-gray-700/20 border border-gray-600/30 text-gray-500 cursor-not-allowed"," ").concat(e$.className),children:["Continue with ₹",t.toLocaleString()]})]})};var e1=a(46767),e2=a(81586),e4=a(44210);let e5={className:"font-bold"},e3={className:"font-medium"},e6={className:"font-normal text-sm"},e8=e=>{let{amount:t,currentBalance:a,selectedMethod:r,onMethodSelect:l,onBack:n,onPay:c,loading:i}=e,o=[{id:"upi",name:"UPI",icon:(0,s.jsx)(e1.A,{className:"w-5 h-5"}),description:"Pay using any UPI app"},{id:"card",name:"Credit/Debit Card",icon:(0,s.jsx)(e2.A,{className:"w-5 h-5"}),description:"Visa, Mastercard, Rupay"},{id:"razorpay",name:"Razor Pay",icon:(0,s.jsx)(e4.A,{className:"w-5 h-5"}),description:"Fast & secure checkout with multiple options",recommended:!0}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"".concat(e3.className," text-gray-300"),children:"Amount to add"}),(0,s.jsxs)("span",{className:"".concat(e5.className," text-white text-lg"),children:["₹",t.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,s.jsx)("span",{className:"".concat(e6.className," text-gray-400"),children:"New balance"}),(0,s.jsxs)("span",{className:"".concat(e3.className," text-green-400"),children:["₹",(a+t).toLocaleString()]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"".concat(e3.className," text-white text-sm mb-3 block"),children:"Select Payment Method"}),(0,s.jsx)("div",{className:"space-y-2",children:o.map(e=>(0,s.jsx)("button",{disabled:"razorpay"!==e.id,onClick:()=>l(e.id),className:"w-full p-4 rounded-xl border transition-colors text-left ".concat(r===e.id?"bg-white/10 border-white/30":"razorpay"!==e.id?"bg-gray-800/50 border-gray-700/50 text-gray-500 cursor-not-allowed opacity-50":"bg-white/5 border-white/10 hover:bg-white/10"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"".concat("razorpay"!==e.id?"text-gray-600":"text-white"),children:e.icon}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"".concat(e3.className," ").concat("razorpay"!==e.id?"text-gray-500":"text-white"," text-sm flex items-center gap-2"),children:[e.name,e.recommended&&"razorpay"===e.id&&(0,s.jsx)("span",{className:"bg-green-500/20 text-green-400 text-xs px-2 py-1 rounded border border-green-500/30",children:"Recommended"})]}),(0,s.jsx)("p",{className:"".concat(e6.className," ").concat("razorpay"!==e.id?"text-gray-600":"text-gray-400"),children:e.description})]})]}),(0,s.jsx)("div",{className:"w-4 h-4 rounded-full border-2 transition-colors ".concat(r===e.id?"border-white bg-white":"razorpay"!==e.id?"border-gray-600":"border-gray-500"),children:r===e.id&&"razorpay"===e.id&&(0,s.jsx)("div",{className:"w-full h-full rounded-full bg-gray-800 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})})]})},e.id))})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:n,className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-300 rounded-xl hover:bg-white/10 transition-colors",children:"Back"}),(0,s.jsx)("button",{onClick:c,disabled:i,className:"flex-2 py-3 bg-white/20 border border-white/30 text-white rounded-xl hover:bg-white/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):"Pay ₹".concat(t.toLocaleString())})]})]})},e9={className:"font-bold"},e7={className:"font-medium"},te={className:"font-normal text-sm"},tt=e=>{let{amount:t,currentBalance:a,onClose:r}=e;return(0,s.jsxs)("div",{className:"text-center space-y-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto border border-green-500/30",children:(0,s.jsx)(F.A,{className:"w-8 h-8 text-green-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"".concat(e9.className," text-xl text-white mb-2"),children:"Money Added Successfully!"}),(0,s.jsxs)("p",{className:"".concat(e7.className," text-gray-300"),children:["₹",t.toLocaleString()," has been added to your wallet"]})]}),(0,s.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[(0,s.jsx)("p",{className:"".concat(te.className," text-gray-400 mb-1"),children:"New Wallet Balance"}),(0,s.jsxs)("p",{className:"".concat(e9.className," text-2xl text-green-400"),children:["₹",a.toLocaleString()]})]}),(0,s.jsx)("button",{onClick:r,className:"w-full py-3 bg-white/20 border border-white/30 text-white rounded-xl hover:bg-white/30 transition-colors",children:"Done"})]})},ta={className:"font-bold"},ts={className:"font-normal text-sm"},tr=e=>{let{isOpen:t,onClose:a,currentBalance:r,onAddMoney:l}=e,[c,i]=(0,n.useState)(100),[d,m]=(0,n.useState)(""),[x,h]=(0,n.useState)("razorpay"),[u,b]=(0,n.useState)(!1),[p,w]=(0,n.useState)("amount"),N=async()=>{if(!(c<10)){b(!0);try{await l(c,x),w("success")}catch(e){console.error("Failed to add money:",e)}finally{b(!1)}}},v=()=>{w("amount"),i(100),m(""),h("upi"),b(!1),a()};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-black/30 border border-white/10 rounded-2xl w-full max-w-md overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-white/10 rounded-xl flex items-center justify-center",children:(0,s.jsx)(o.A,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"".concat(ta.className," text-lg text-white"),children:"Add Money"}),"success"!==p&&(0,s.jsxs)("p",{className:"".concat(ts.className," text-gray-400"),children:["Current Balance: ₹",r.toLocaleString()]})]})]}),(0,s.jsx)("button",{onClick:v,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,s.jsx)(g.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,s.jsxs)("div",{className:"p-6",children:["amount"===p&&(0,s.jsx)(e0,{amount:c,customAmount:d,onAmountChange:e=>{i(e),m("")},onCustomAmountChange:e=>{let t=parseInt(e);!isNaN(t)&&t>0&&i(t),m(e)},onContinue:()=>w("payment")}),"payment"===p&&(0,s.jsx)(e8,{amount:c,currentBalance:r,selectedMethod:x,onMethodSelect:h,onBack:()=>w("amount"),onPay:N,loading:u}),"success"===p&&(0,s.jsx)(tt,{amount:c,currentBalance:r,onClose:v})]})]})}):null};var tl=a(94622),tn=a(85339);let tc={className:"font-bold"},ti={className:"font-medium"},to={className:"font-normal text-sm"},td=e=>{let{isOpen:t,onClose:a,errorMessage:r="Failed to add money via Razorpay"}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-black/30 border border-white/10 rounded-2xl w-full max-w-md overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-red-500/20 rounded-xl flex items-center justify-center border border-red-500/30",children:(0,s.jsx)(o.A,{className:"w-5 h-5 text-red-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"".concat(tc.className," text-lg text-white"),children:"Payment Failed"}),(0,s.jsx)("p",{className:"".concat(to.className," text-gray-400"),children:"Unable to process payment"})]})]}),(0,s.jsx)("button",{onClick:a,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,s.jsx)(g.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center space-y-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto border border-red-500/30",children:(0,s.jsx)(g.A,{className:"w-8 h-8 text-red-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"".concat(tc.className," text-xl text-white mb-2"),children:"Payment Failed!"}),(0,s.jsx)("p",{className:"".concat(ti.className," text-gray-300"),children:r})]}),(0,s.jsxs)("div",{className:"bg-red-500/10 rounded-xl p-4 border border-red-500/20",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,s.jsx)(tn.A,{className:"w-4 h-4 text-red-400"}),(0,s.jsx)("p",{className:"".concat(to.className," text-red-400"),children:"Transaction Unsuccessful"})]}),(0,s.jsx)("p",{className:"".concat(to.className," text-gray-400"),children:"Your payment could not be processed. Please try again or contact support."})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:a,className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-300 rounded-xl hover:bg-white/10 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{onClick:a,className:"flex-1 py-3 bg-red-500/20 border border-red-500/30 text-red-400 rounded-xl hover:bg-red-500/30 transition-colors",children:"Try Again"})]})]})})]})}):null},tm={className:"font-bold"},tx={className:"font-medium"},th=()=>{let[e,t]=(0,n.useState)({balance:0,transactions:[]}),[a,r]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!0),[d,m]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{var e;let a=await (0,eO.QI)();console.log("Wallet data:",a.data);let s=await (0,eO.NI)();console.log("Transaction data:",s),t({balance:(null==(e=a.data)?void 0:e.balance)||0,transactions:s.data||[]}),o(!1)}catch(e){console.error("Error fetching wallet data:",e),m("Failed to load wallet data"),o(!1)}})()},[]);let[x,h]=(0,n.useState)(!1),[u,g]=(0,n.useState)(!1);(0,n.useEffect)(()=>{window.Razorpay?g(!0):new Promise(e=>{let t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>{g(!0),e(!0)},t.onerror=()=>e(!1),document.body.appendChild(t)})},[]);let b=async(e,a)=>{if(!window.Razorpay||!u)return void P.Ay.error("Razorpay SDK failed to load. Please try again.");h(!0);let s=!1;try{let l=(await (0,tl.$)({amount:100*e,currency:"INR"})).data.id;if(!l)throw r(!1),Error("Invalid order response - missing order ID");let n=new window.Razorpay({key:"rzp_test_UfKgHw2DzvZjyn",amount:100*e,currency:"INR",name:"Wallet Top-up",description:"Add money to wallet",order_id:l,handler:async l=>{try{if(s=!0,console.log("Payment successful:",l),(await (0,tl.G)({razorpay_payment_id:l.razorpay_payment_id,razorpay_order_id:l.razorpay_order_id,razorpay_signature:l.razorpay_signature})).success)try{await (0,eO.Ru)({amount:e,type:"credit",description:"Money added via ".concat(a)}),t(t=>({...t,balance:t.balance+e,transactions:[{_id:Date.now().toString(),type:"credit",amount:e,description:"Money added via ".concat(a),createdAt:new Date().toISOString(),status:"completed",category:"topup",transactionId:l.razorpay_payment_id},...t.transactions]})),P.Ay.success("₹".concat(e," added to your wallet successfully!"))}catch(e){r(!1),console.error("Failed to credit wallet:",e),P.Ay.error("Payment successful but failed to update wallet. Please contact support.")}else throw r(!1),Error("Payment verification failed")}catch(e){r(!1),console.error("Payment verification failed:",e),P.Ay.error("Payment verification failed. Please contact support.")}finally{h(!1)}},prefill:{name:"Customer",email:"",contact:""},theme:{color:"#ffffff"},modal:{ondismiss:()=>{s||(console.log("Payment cancelled by user"),h(!1))}}});n.on("payment.failed",function(e){s=!0,console.error("Payment failed:",e.error),n.close();let t=e.error.description||"Payment failed";P.Ay.error(t),r(!1),h(!1),c(!0)}),n.open()}catch(e){P.Ay.error("Payment Failed"),console.error("Payment initiation failed:",e),h(!1)}};return i?(0,s.jsx)(eB,{}):d?(0,s.jsx)(eU,{error:d}):(0,s.jsx)("div",{className:"min-h-screen bg-transparent p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"".concat(tm.className," text-3xl text-white mb-2"),children:"My Wallet"}),(0,s.jsx)("p",{className:"".concat(tx.className," text-gray-300"),children:"Manage your wallet balance and view transaction history"})]}),(0,s.jsx)(eX,{balance:e.balance,monthlySpent:(()=>{let t=new Date,a=t.getMonth(),s=t.getFullYear();return e.transactions.filter(e=>{let t=new Date(e.createdAt);return"debit"===e.type&&"completed"===e.status&&t.getMonth()===a&&t.getFullYear()===s}).reduce((e,t)=>e+t.amount,0)})(),totalTransactions:e.transactions.length,cashbackEarned:e.transactions.filter(e=>"credit"===e.type&&e.description.toLowerCase().includes("cashback")).reduce((e,t)=>e+t.amount,0),onAddMoney:()=>{r(!0)}}),(0,s.jsx)(eY,{transactions:e.transactions}),(0,s.jsx)(tr,{isOpen:a,onClose:()=>r(!1),currentBalance:e.balance,onAddMoney:b}),(0,s.jsx)(td,{isOpen:l,onClose:()=>{c(!1)}})]})})},tu={className:"font-bold"},tg={className:"font-normal text-sm"},tb={className:"font-medium"},tp=e=>{let{favorite:t,onRemoveFromFavorites:a,onViewMovie:r,onBookTickets:l}=e,[c,i]=(0,n.useState)(!1),o=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),d=async()=>{i(!0);try{await a(t.movieId._id)}catch(e){console.error("Failed to remove:",e)}finally{i(!1)}};return(0,s.jsxs)("div",{className:"flex bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl overflow-hidden backdrop-blur-xl hover:scale-[1.02] transition-transform duration-300 group",children:[(0,s.jsxs)("div",{className:"w-40 shrink-0 relative bg-gray-800",children:[(0,s.jsx)("img",{src:t.movieId.poster,alt:t.movieId.title,className:"w-full h-full object-cover"}),(0,s.jsx)("div",{className:"absolute top-3 left-3 bg-black/70 backdrop-blur-sm rounded-lg px-2 py-1",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("svg",{className:"w-3 h-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,s.jsxs)("span",{className:"".concat(tg.className," text-white text-xs font-semibold"),children:[t.movieId.rating,"/10"]})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 px-7 py-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("div",{className:"".concat(tu.className," text-xl text-white"),children:t.movieId.title}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-red-500 fill-current",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]}),(0,s.jsx)("p",{className:"".concat(tg.className," text-gray-300 mb-3"),children:(e=>{let t=new Date(e),a=Math.ceil(Math.abs(new Date().getTime()-t.getTime())/864e5);return 1===a?"Added today":a<7?"Added ".concat(a," days ago"):a<30?"Added ".concat(Math.ceil(a/7)," weeks ago"):"Added on ".concat(o(e))})(t.addedAt)}),(0,s.jsxs)("div",{className:"".concat(tb.className," flex items-center gap-6 mt-2 text-base text-white mb-4"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsx)("span",{children:o(t.movieId.releaseDate)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:(e=>{let t=Math.floor(e/60);return"".concat(t,"h ").concat(e%60,"m")})(t.movieId.duration)})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2 mb-6",children:[t.movieId.genre.slice(0,3).map((e,t)=>(0,s.jsx)("span",{className:"".concat(tg.className," bg-white/10 text-white px-3 py-1.5 rounded-lg font-medium border border-white/20"),children:e},t)),(0,s.jsx)("span",{className:"".concat(tg.className," bg-white/10 text-white px-3 py-1.5 rounded-lg font-medium border border-white/20"),children:t.movieId.language})]}),t.movieId.synopsis&&(0,s.jsx)("p",{className:"".concat(tg.className," text-gray-400 mb-4 line-clamp-2"),children:t.movieId.synopsis.length>150?"".concat(t.movieId.synopsis.substring(0,150),"..."):t.movieId.synopsis}),(0,s.jsxs)("div",{className:"mt-auto flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>r(t.movieId._id),className:"".concat(tb.className," bg-white text-black px-5 py-2.5 rounded-xl hover:bg-white/90 transition-colors text-sm"),children:"View Details"}),(0,s.jsx)("button",{onClick:()=>l(t.movieId._id),className:"".concat(tb.className," bg-transparent text-white px-5 py-2.5 rounded-xl border border-white hover:bg-white/10 transition-colors text-sm"),children:"Book Tickets"}),(0,s.jsx)("button",{onClick:d,disabled:c,className:"".concat(tb.className," bg-transparent text-white/70 px-5 py-2.5 rounded-xl border border-white/50 hover:bg-red-900/20 hover:text-red-400 hover:border-red-500/30 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed"),children:c?"Removing...":"Remove"})]})]})]})},tw={REMOVE_FROM_FAV:e=>"/users/favorites/".concat(e),GET_USER_FAV:"/users/favorites"};var tN=a(77567);let tv=async e=>(await tN.A.delete(tw.REMOVE_FROM_FAV(e))).data,tf=async()=>await tN.A.get(tw.GET_USER_FAV);var tj=a(35695);let ty={className:"font-bold"},tk={className:"font-normal text-sm"},tA={className:"font-medium"},tC=()=>{var e;let[t,a]=(0,n.useState)(null),[r,l]=(0,n.useState)(!0),[c,i]=(0,n.useState)(null),[o,d]=(0,n.useState)(1),[m]=(0,n.useState)(8),x=(0,tj.useRouter)(),h=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{l(!0);let e=await tf();console.log(e.data.data),a(e.data.data),i(null)}catch(e){console.log(e),i("Failed to load favorites")}finally{l(!1)}};(0,n.useEffect)(()=>{h(o)},[o]);let u=async e=>{try{await tv(e),h(o),P.Ay.success("Movie removed from favorites")}catch(e){console.error("Failed to remove from favorites:",e)}},g=e=>{x.push("/search/movies/".concat(e))},b=e=>{x.push("/book/".concat(e,"?flow=movie-first"))};return r?(0,s.jsx)("div",{className:"min-h-screen bg-transparent p-12 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-white text-xl",children:(0,s.jsx)(ee.A,{text:"Loading your tickets"})})}):c?(0,s.jsx)("div",{className:"min-h-screen bg-transparent p-12 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-red-400 text-xl",children:c})}):(0,s.jsx)("div",{className:"min-h-screen bg-transparent p-12",children:(0,s.jsxs)("div",{className:"mx-auto max-w-6xl space-y-7",children:[(0,s.jsxs)("div",{className:"mb-10",children:[(0,s.jsx)("h1",{className:"".concat(ty.className," text-5xl text-center text-white mb-2"),children:"My Favorite Movies"}),(0,s.jsx)("p",{className:"".concat(tk.className," text-gray-400 text-center"),children:(null==t?void 0:t.total)?"".concat(t.total," favorite movies"):"Your movie collection"})]}),(null==t?void 0:t.total)&&t.total>0&&(0,s.jsx)("div",{className:"flex justify-center mb-8",children:(0,s.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-xl px-6 py-3 backdrop-blur-sm",children:(0,s.jsxs)("span",{className:"".concat(tA.className," text-white text-lg"),children:[t.total," Movies • Page ",t.page," of ",t.totalPages]})})}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-6",children:null==t||null==(e=t.favorites)?void 0:e.map(e=>(0,s.jsx)(tp,{favorite:e,onRemoveFromFavorites:u,onViewMovie:g,onBookTickets:b},e._id))}),(!(null==t?void 0:t.favorites)||0===t.favorites.length)&&(0,s.jsxs)("div",{className:"text-center bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl p-12 backdrop-blur-xl",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-white/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,s.jsx)("h3",{className:"".concat(ty.className," text-xl text-white mb-2"),children:"No Favorite Movies Yet"}),(0,s.jsx)("p",{className:"".concat(tk.className," text-gray-400 mb-6"),children:"Start adding movies to your favorites to see them here"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/movies",className:"".concat(ty.className," bg-white text-black px-6 py-3 rounded-xl hover:bg-white/90 transition-colors"),children:"Browse Movies"})]})]})})};var tS=a(25919),tP=a(24357);let tT=e=>{let{name:t,description:a,discountPercentage:r,uniqueId:l,expiryDate:n,maxUsageCount:c,currentUsageCount:o=0,isActive:d,isExpired:m,copied:x,expiryStatus:h,onCopyCode:u,onShowTheaters:g,index:b=0}=e,p=!d||m||o>=c;return(0,s.jsx)("div",{className:"w-full max-w-4xl mx-auto",children:(0,s.jsx)("div",{className:"relative bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden transition-all duration-300 hover:shadow-xl ".concat(p?"opacity-50 grayscale":""),children:(0,s.jsxs)("div",{className:"flex h-64",children:[(0,s.jsxs)("div",{className:"w-44 flex flex-col items-center justify-center text-white relative ".concat(p?"bg-gray-500":"bg-orange-500"),children:[(0,s.jsx)("div",{className:"absolute top-24 -right-4 w-8 h-6 bg-white rounded-full z-10"}),(0,s.jsx)("div",{className:"absolute bottom-24 -right-4 w-8 h-6 bg-white rounded-full z-10"}),(0,s.jsx)("div",{className:"absolute right-3 top-6 bottom-6 w-1 flex flex-col justify-evenly",children:[...Array(14)].map((e,t)=>(0,s.jsx)("div",{className:"w-1 h-1 bg-white/50 rounded-full"},t))}),(0,s.jsxs)("div",{className:"text-center z-10",children:[(0,s.jsxs)("div",{className:"text-6xl font-black mb-3 drop-shadow-lg",children:[r,"%"]}),(0,s.jsx)("div",{className:"text-xl font-bold tracking-wide drop-shadow-lg",children:"OFF"})]}),(0,s.jsx)("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-white/50 rounded-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})})]}),(0,s.jsxs)("div",{className:"flex-1 relative bg-gray-50",style:{backgroundImage:'url("https://static.vecteezy.com/system/resources/previews/047/490/415/non_2x/popcorn-spilling-from-a-striped-box-isolated-on-a-transparent-background-free-png.png")',backgroundSize:"contain",backgroundPosition:"left center",backgroundRepeat:"no-repeat",transform:"scaleX(-1)"},children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-white/40"}),(0,s.jsx)("div",{className:"absolute top-24 -left-4 w-8 h-6 bg-white rounded-full z-10"}),(0,s.jsx)("div",{className:"absolute bottom-24 -left-4 w-8 h-6 bg-white rounded-full z-10"}),(0,s.jsxs)("div",{className:"relative z-20 p-6 h-full flex flex-col justify-between",style:{transform:"scaleX(-1)"},children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 pr-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:t||"Cinema Special Offer"}),a&&(0,s.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:a})]}),(0,s.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(o>=c?"bg-gray-100 text-gray-700":p?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:o>=c?"FULLY USED":p?"EXPIRED":"ACTIVE"})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{onClick:p?void 0:u,className:"flex items-center justify-between px-4 py-3 border-2 border-dashed rounded-lg transition-all duration-200 group ".concat(p?"bg-gray-50 border-gray-300 cursor-not-allowed":"bg-orange-50 border-orange-300 cursor-pointer hover:bg-orange-100"),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs font-medium mb-1 ".concat(p?"text-gray-600":"text-orange-600"),children:"COUPON CODE"}),(0,s.jsx)("div",{className:"font-black text-lg tracking-widest ".concat(p?"text-gray-800":"text-orange-800"),children:l.toUpperCase()})]}),!p&&(0,s.jsx)("div",{className:"flex items-center gap-2",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(B.A,{className:"w-5 h-5 text-green-600"}),(0,s.jsx)("span",{className:"text-green-600 font-bold text-sm",children:"Copied!"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tP.A,{className:"w-5 h-5 text-orange-600 group-hover:text-orange-800"}),(0,s.jsx)("span",{className:"text-orange-600 group-hover:text-orange-800 font-bold text-sm",children:"Copy"})]})}),p&&(0,s.jsx)("div",{className:"text-gray-500 text-sm",children:"Not Available"})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"w-4 h-4 ".concat(p?"text-gray-400":"text-orange-500")}),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Expires:"})," ",n?new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ej.A,{className:"w-4 h-4 ".concat(p?"text-gray-400":"text-orange-500")}),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Usage:"})," ",0===c?"Unlimited uses":"".concat(o,"/").concat(c," used")]})]})]}),(0,s.jsx)("button",{onClick:p?void 0:g,disabled:p,className:"px-6 py-2 font-bold rounded-lg transition-colors duration-200 text-sm ".concat(p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600 text-white shadow-md hover:shadow-lg"),children:p?"Unavailable":"Where to use?"})]})]})]})]})})})};var tE=a(45685);let tF=e=>{let{isOpen:t,onClose:a,theaters:r,isAllTheaters:l}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl max-w-3xl w-full max-h-[80vh] overflow-hidden shadow-xl",children:[(0,s.jsx)("div",{className:"bg-orange-500 p-6 text-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-1",children:"Available Theaters"}),(0,s.jsx)("p",{className:"text-orange-100",children:l?"Valid at all theaters in our network":"Valid at ".concat(r.length," selected theater").concat(1!==r.length?"s":"")})]}),(0,s.jsx)("button",{onClick:a,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all",children:(0,s.jsx)(g.A,{className:"w-5 h-5"})})]})}),(0,s.jsx)("div",{className:"p-6 max-h-96 overflow-y-auto",children:l?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFAD"}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"All Theaters Available!"}),(0,s.jsx)("p",{className:"text-gray-600 text-lg max-w-lg mx-auto leading-relaxed",children:"This coupon can be used at any theater in our network. Choose your favorite cinema and enjoy the show!"}),(0,s.jsxs)("div",{className:"mt-6 inline-flex items-center gap-2 px-4 py-2 bg-green-100 text-green-800 rounded-full font-medium",children:[(0,s.jsx)(B.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Valid Everywhere"})]})]}):(0,s.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center text-white font-bold",children:(0,s.jsx)(tE.A,{})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,s.jsx)(C.A,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[e.city,", ",e.state]})]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-50 text-green-700 rounded-full text-sm font-medium",children:(0,s.jsx)("span",{children:"Available"})})]},e._id))})}),(0,s.jsx)("div",{className:"p-6 bg-gray-50 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-gray-600",children:[(0,s.jsx)("strong",{className:"text-gray-900",children:l?"All theaters":r.length})," available for this coupon"]}),(0,s.jsx)("button",{onClick:a,className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 text-white font-bold rounded-lg transition-colors",children:"Got it!"})]})})]})}):null},tM=e=>{let{coupon:t,index:a=0,isExpired:r=!1}=e,[l,c]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),d=async()=>{try{await navigator.clipboard.writeText(t.uniqueId),c(!0),setTimeout(()=>c(!1),2e3)}catch(e){console.error("Failed to copy code")}},m=(()=>{if(!t.expiryDate)return{status:"no-expiry",text:"No expiry",color:"text-green-500"};let e=new Date,a=Math.ceil((new Date(t.expiryDate).getTime()-e.getTime())/864e5);return a<0?{status:"expired",text:"Expired",color:"text-red-500"}:a<=7?{status:"expiring",text:"".concat(a," day").concat(1!==a?"s":""," left"),color:"text-orange-500"}:{status:"active",text:"".concat(a," days left"),color:"text-green-500"}})(),x=t.theaterIds||[],h=0===x.length;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tT,{name:t.name||"",description:t.description,discountPercentage:t.discountPercentage,uniqueId:t.uniqueId,expiryDate:t.expiryDate,maxUsageCount:t.maxUsageCount,currentUsageCount:t.currentUsageCount||0,isActive:t.isActive,isExpired:r,copied:l,expiryStatus:m,onCopyCode:d,onShowTheaters:()=>{o(!0)},index:a}),(0,s.jsx)(tF,{isOpen:i,onClose:()=>{o(!1)},theaters:x,isAllTheaters:h})]})};var tI=a(7170),tR=a.n(tI);let tL=()=>{let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(!1),[l,c]=(0,n.useState)(null),[i,o]=(0,n.useState)(1),[d]=(0,n.useState)(6),[m,x]=(0,n.useState)(1),[h,u]=(0,n.useState)("all"),g=async e=>{r(!0),c(null);try{let a=await (0,tS.DB)({page:e,limit:d});console.log(a),t(a.data.data),x(a.data.totalPages),o(a.data.currentPage)}catch(e){c("Failed to load coupons")}finally{r(!1)}};(0,n.useEffect)(()=>{g(i)},[i]);let b=e=>{let t=new Date,a=new Date(e.expiryDate);return!e.isActive||t>a||e.currentUsageCount>=e.maxUsageCount},p=e.filter(e=>{let t=b(e);return"all"===h||"active"===h&&!t||"expired"===h&&t});return(0,s.jsx)("div",{className:"min-h-screen p-4 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsx)("span",{className:"".concat(tR().className," text-5xl text-white"),children:"My Coupons"}),(0,s.jsx)("p",{className:"text-gray-300 text-lg mt-4",children:"Discover and use your exclusive movie deals"})]}),(0,s.jsx)("div",{className:"   p-6 mb-8",children:(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("div",{className:"flex gap-8",children:[(0,s.jsxs)("button",{onClick:()=>u("active"),className:"relative py-2 px-1 transition-all duration-300 ".concat("active"===h?"text-white":"text-gray-400 hover:text-gray-300"),children:[(0,s.jsx)("p",{className:"tracking-[0.3em] text-sm font-extralight relative z-10",style:{textShadow:"active"===h?"0 0 10px rgba(249, 115, 22, 0.5)":"none"},children:"ACTIVE"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white transition-all duration-300 ".concat("active"===h?"opacity-100 scale-x-100":"opacity-0 scale-x-0"),style:{boxShadow:"active"===h?"0 0 8px rgba(249, 115, 22, 0.6)":"none"}})]}),(0,s.jsxs)("button",{onClick:()=>u("expired"),className:"relative py-2 px-1 transition-all duration-300 ".concat("expired"===h?"text-white":"text-gray-400 hover:text-gray-300"),children:[(0,s.jsx)("p",{className:"tracking-[0.3em] text-sm font-extralight relative z-10",style:{textShadow:"expired"===h?"0 0 10px rgba(249, 115, 22, 0.5)":"none"},children:"EXPIRED"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-orange-500 to-red-500 transition-all duration-300 ".concat("expired"===h?"opacity-100 scale-x-100":"opacity-0 scale-x-0"),style:{boxShadow:"expired"===h?"0 0 8px rgba(249, 115, 22, 0.6)":"none"}})]}),(0,s.jsxs)("button",{onClick:()=>u("all"),className:"relative py-2 px-1 transition-all duration-300 ".concat("all"===h?"text-white":"text-gray-400 hover:text-gray-300"),children:[(0,s.jsx)("p",{className:"tracking-[0.3em] text-sm font-extralight relative z-10",style:{textShadow:"all"===h?"0 0 10px rgba(249, 115, 22, 0.5)":"none"},children:"ALL"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-orange-500 to-red-500 transition-all duration-300 ".concat("all"===h?"opacity-100 scale-x-100":"opacity-0 scale-x-0"),style:{boxShadow:"all"===h?"0 0 8px rgba(249, 115, 22, 0.6)":"none"}})]})]})})}),a&&(0,s.jsxs)("div",{className:"flex items-center justify-center py-20",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-orange-500/30 rounded-full"}),(0,s.jsx)("div",{className:"absolute inset-0 w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"})]}),(0,s.jsx)("span",{className:"ml-4 text-white text-lg",children:"Loading your amazing deals..."})]}),l&&(0,s.jsxs)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-2xl p-8 text-center",children:[(0,s.jsx)("div",{className:"text-red-400 text-6xl mb-4",children:"⚠️"}),(0,s.jsx)("h3",{className:"text-red-400 text-xl font-semibold mb-2",children:"Oops! Something went wrong"}),(0,s.jsx)("p",{className:"text-red-300",children:l}),(0,s.jsx)("button",{onClick:()=>g(i),className:"mt-4 px-6 py-2 bg-red-500 hover:bg-red-600 text-white rounded-xl transition-colors",children:"Try Again"})]}),!a&&!l&&0===p.length&&(0,s.jsxs)("div",{className:"text-center py-20",children:[(0,s.jsx)("div",{className:"text-gray-400 text-8xl mb-6",children:"\uD83C\uDFAB"}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-gray-300 mb-4",children:"all"!==h?"No matching coupons found":"No coupons available yet"}),(0,s.jsx)("p",{className:"text-gray-400 mb-8",children:"all"!==h?"Try selecting a different filter option":"Check back later for exciting deals and discounts!"})]}),!a&&!l&&p.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex flex-col gap-8",children:p.map((e,t)=>(0,s.jsx)(tM,{coupon:e,index:t,isExpired:b(e)},e._id))}),m>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-12",children:[(0,s.jsx)("button",{className:"px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-xl text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:1===i,onClick:()=>o(e=>e-1),children:"← Previous"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:Array.from({length:Math.min(5,m)},(e,t)=>{let a;return a=m<=5||i<=3?t+1:i>=m-2?m-4+t:i-2+t,(0,s.jsx)("button",{onClick:()=>o(a),className:"w-10 h-10 rounded-lg font-medium transition-all ".concat(i===a?"bg-gradient-to-r from-orange-500 to-red-500 text-white":"bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 text-gray-300"),children:a},a)})}),(0,s.jsx)("button",{className:"px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-xl text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i===m,onClick:()=>o(e=>e+1),children:"Next →"})]})]})]})})},tD={className:"font-bold"},tz={className:"font-medium"},t_={className:"font-normal text-sm"},tO=e=>{let{title:t,icon:a}=e;return(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsx)("div",{className:"bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl p-12 backdrop-blur-xl",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500/20 to-purple-600/20 border border-white/10 rounded-2xl flex items-center justify-center mx-auto mb-6 backdrop-blur-sm",children:(0,s.jsx)(a,{className:"w-8 h-8 text-blue-400"})}),(0,s.jsx)("h2",{className:"".concat(tD.className," text-3xl text-white mb-3"),children:t}),(0,s.jsx)("p",{className:"".concat(tz.className," text-gray-300 mb-8 max-w-md mx-auto"),children:"We're crafting an amazing experience for this feature. It will be available very soon!"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:[(0,s.jsx)(b.A,{className:"w-6 h-6 text-green-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"".concat(t_.className," text-gray-400 text-sm"),children:"Secure & Reliable"})]}),(0,s.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:[(0,s.jsx)(p.A,{className:"w-6 h-6 text-blue-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"".concat(t_.className," text-gray-400 text-sm"),children:"Easy to Use"})]}),(0,s.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:[(0,s.jsx)(w.A,{className:"w-6 h-6 text-purple-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"".concat(t_.className," text-gray-400 text-sm"),children:"Smart Notifications"})]})]}),(0,s.jsxs)("div",{className:"flex items-center my-8",children:[(0,s.jsx)("div",{className:"flex-grow border-t border-white/10"}),(0,s.jsx)("span",{className:"".concat(t_.className," px-6 text-gray-400 bg-white/5 rounded-full py-2"),children:"Coming Soon"}),(0,s.jsx)("div",{className:"flex-grow border-t border-white/10"})]}),(0,s.jsx)("p",{className:"".concat(t_.className," text-gray-500 text-sm"),children:"Want to be notified when this feature launches? We'll send you an update!"})]})})})},tB=()=>{var e;let[t,a]=(0,n.useState)("account"),[r,l]=(0,n.useState)(!1),[b,p]=(0,n.useState)(null);async function w(){try{await (0,W.VM)();let e=(await (0,W.VM)()).data,t={...e,joinedAt:new Date(e.joinedAt),lastActive:new Date(e.lastActive),dateOfBirth:e.dateOfBirth?new Date(e.dateOfBirth):void 0};p(t),console.log(t)}catch(e){console.log(e)}}(0,n.useEffect)(()=>{w()},[]),(0,n.useEffect)(()=>{"viewTicket"==localStorage.getItem("selectedTab")&&a("bookings")});let N=[{id:"account",label:"Profile & Settings",icon:c.A,description:"Manage your personal information"},{id:"bookings",label:"My Tickets",icon:i.A,description:"View your tickets and ticket history"},{id:"wallet",label:"Wallet & Credits",icon:o.A,description:"Balance and transactions"},{id:"favorites",label:"Favorites",icon:d.A,description:"Saved movies and theaters"},{id:"coupons",label:"My Coupons",icon:m.A,description:"Coupons and discounts"},{id:"help",label:"Help & Support",icon:x.A,description:"Get assistance"}],v=()=>{console.log("Logging out...")};return(0,s.jsx)("div",{className:"min-h-screen bg-transparent text-white",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"hidden lg:block relative",children:(0,s.jsxs)("div",{className:"fixed left-0 top-0 w-2 h-full z-40 hover:w-80 group transition-all duration-300 ease-in-out",children:[(0,s.jsxs)("div",{className:"absolute left-0 top-0 w-16 h-full bg-black/20 backdrop-blur-md border-r border-white/10 flex flex-col items-center justify-start pt-20 group-hover:bg-transparent transition-all duration-300",children:[(0,s.jsx)("div",{className:"p-3 rounded-lg bg-white/10 mb-4 group-hover:opacity-0 transition-opacity duration-200",children:(0,s.jsx)(h.A,{className:"w-5 h-5 text-white"})}),(0,s.jsx)("div",{className:"flex flex-col space-y-3 group-hover:opacity-0 transition-opacity duration-200",children:N.slice(0,4).map(e=>{let r=e.icon,l=t===e.id;return(0,s.jsx)("button",{onClick:()=>{"bookings"!==e.id&&localStorage.removeItem("selectedTab"),a(e.id)},className:"p-2 rounded-lg transition-all duration-200 ".concat(l?"bg-white/20 text-white":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"),title:e.label,children:(0,s.jsx)(r,{className:"w-4 h-4"})},e.id)})})]}),(0,s.jsx)("div",{className:"absolute left-0 top-0 w-80 h-full bg-black/10 backdrop-blur-md border-r border-white/10 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transform -translate-x-full group-hover:translate-x-0 transition-all duration-300 ease-out",children:(0,s.jsxs)("div",{className:"flex flex-col flex-1 min-h-0",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-violet-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-sm",children:"C"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"".concat(tD.className," text-white text-lg"),children:"Cineora"}),(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:"Dashboard"})]})]})}),(0,s.jsx)("nav",{className:"flex-1 px-6 py-8 space-y-2",children:N.map(e=>{let r=e.icon,l=t===e.id;return(0,s.jsxs)("button",{onClick:()=>{"bookings"!==e.id&&localStorage.removeItem("selectedTab"),a(e.id)},className:"".concat(tz.className," w-full group relative flex items-center px-4 py-4 rounded-xl transition-all duration-200 ").concat(l?"bg-gradient-to-r from-white/20 to-white/10 border border-white/20 text-white shadow-lg":"text-gray-300 hover:bg-white/5 hover:text-white"),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-4 ".concat(l?"bg-white/10":"bg-white/5 group-hover:bg-white/10"),children:(0,s.jsx)(r,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:e.label}),(0,s.jsx)("p",{className:"text-xs mt-0.5 ".concat(l?"text-gray-300":"text-gray-400"),children:e.description})]})]},e.id)})}),(0,s.jsx)("div",{className:"px-6 py-4 border-t border-white/10",children:(0,s.jsxs)("button",{onClick:v,className:"".concat(tz.className," w-full flex items-center px-4 py-3 rounded-xl transition-all duration-200 text-red-400 hover:bg-red-500/10 hover:text-red-300 group"),children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center mr-3 bg-red-500/10 group-hover:bg-red-500/20",children:(0,s.jsx)(u.A,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Sign Out"})]})})]})})]})}),r&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex lg:hidden",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>l(!1)}),(0,s.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-black/10 backdrop-blur-md border-r border-white/10",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,s.jsx)("button",{onClick:()=>l(!1),className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full hover:bg-white/10 transition-colors",children:(0,s.jsx)(g.A,{className:"h-6 w-6 text-white"})})}),(0,s.jsxs)("nav",{className:"flex-1 px-6 py-8 mt-10 space-y-2",children:[N.map(e=>{let r=e.icon,n=t===e.id;return(0,s.jsxs)("button",{onClick:()=>{a(e.id),l(!1)},className:"".concat(tz.className," w-full group relative flex items-center px-4 py-4 rounded-xl transition-all duration-200 ").concat(n?"bg-white/90 text-black shadow-lg":"text-gray-300 hover:bg-white/5 hover:text-white"),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-4 ".concat(n?"bg-black/5":"bg-white/5 group-hover:bg-white/10"),children:(0,s.jsx)(r,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:e.label}),(0,s.jsx)("p",{className:"text-xs mt-0.5 ".concat(n?"text-gray-500":"text-gray-400"),children:e.description})]})]},e.id)}),(0,s.jsx)("div",{className:"pt-6 mt-6 border-t border-white/10",children:(0,s.jsxs)("button",{onClick:v,className:"".concat(tz.className," w-full flex items-center px-4 py-4 rounded-xl transition-all duration-200 text-red-400 hover:bg-red-500/5 hover:text-red-300 group"),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-4 bg-red-500/10 group-hover:bg-red-500/20",children:(0,s.jsx)(u.A,{className:"w-5 h-5"})}),(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Sign Out"})]})})]})]})]}),(0,s.jsxs)("div",{className:"flex-1 lg:pl-16",children:[" ",(0,s.jsxs)("div",{className:"lg:hidden flex items-center justify-between h-16 px-6 bg-black/10 backdrop-blur-md border-b border-white/10",children:[(0,s.jsx)("button",{onClick:()=>l(!0),className:"p-2 rounded-lg hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-white/10 transition-colors",children:(0,s.jsx)(h.A,{className:"h-6 w-6 text-white"})}),(0,s.jsx)("h1",{className:"".concat(tD.className," text-lg text-white"),children:null==(e=N.find(e=>e.id===t))?void 0:e.label}),(0,s.jsx)("div",{className:"w-10"})]}),(0,s.jsx)("main",{className:"flex-1 min-h-screen bg-transparent",children:(()=>{switch(t){case"account":default:return(0,s.jsx)(ec,{getUeserDetails:w,userData:b});case"bookings":return(0,s.jsx)(e_,{});case"wallet":return(0,s.jsx)(th,{});case"favorites":return(0,s.jsx)(tC,{});case"coupons":return(0,s.jsx)(tL,{});case"help":return(0,s.jsx)(tO,{title:"Help & Support",icon:x.A})}})()})]})]})})};var tU=a(63081);let tV=()=>(0,s.jsx)(r.A,{allowedRoles:["user"],children:(0,s.jsxs)("div",{className:"relative min-h-screen bg-black",children:[(0,s.jsx)("div",{className:"fixed top-9 inset-0 z-0",children:(0,s.jsx)(tU.A,{animationType:"rotate",timeScale:.5,height:3.5,baseWidth:4,scale:4,hueShift:.7,colorFrequency:1,noise:0,glow:.5})}),(0,s.jsx)("div",{className:"relative z-20",children:(0,s.jsx)(l.jq,{})}),(0,s.jsx)("div",{className:"relative z-10",children:(0,s.jsx)(tB,{})})]})})}},e=>{e.O(0,[4303,2601,730,2111,7293,5033,3930,9268,1410,9772,5947,3568,1256,1384,8251,7440,2686,8441,5964,7358],()=>e(e.s=52643)),_N_E=e.O()}]);