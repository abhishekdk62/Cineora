(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8762],{6743:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>P,TY:()=>j,VY:()=>S,Zz:()=>x,_Z:()=>n});let o=(0,a(5710).Z0)({name:"booking",initialState:{bookingData:null,isLoading:!1,error:null},reducers:{setBookingData:(e,t)=>{e.bookingData?e.bookingData={...e.bookingData,...t.payload}:e.bookingData={selectedRows:[],selectedSeats:[],selectedSeatIds:[],seatPricing:[],priceDetails:{subtotal:0,convenienceFee:0,taxes:0,discount:0,total:0},totalAmount:0,tax:0,amount:0,selectedRowIds:[],...t.payload},e.error=null},updateSelectedRows:(e,t)=>{if(e.bookingData){e.bookingData.selectedRows=t.payload;let a=t.payload.flatMap(e=>e.seatsSelected.map(t=>"".concat(e.rowLabel).concat(t)));e.bookingData.selectedSeats=a,e.bookingData.seatPricing=t.payload.map(e=>({rowId:e.rowId,rowLabel:e.rowLabel,seatType:e.seatType,basePrice:e.pricePerSeat,finalPrice:e.pricePerSeat,seatsSelected:e.seatsSelected,seatCount:e.seatCount}));let o=t.payload.reduce((e,t)=>e+t.totalPrice,0);e.bookingData.priceDetails.subtotal=o,e.bookingData.amount=o;let n=Math.round(.05*o),s=Math.round(.18*o),i=o+n+s-e.bookingData.priceDetails.discount;e.bookingData.priceDetails.convenienceFee=n,e.bookingData.priceDetails.taxes=s,e.bookingData.priceDetails.total=i,e.bookingData.tax=s,e.bookingData.totalAmount=i}},applyCoupon:(e,t)=>{if(e.bookingData){e.bookingData.appliedCoupon=t.payload.coupon,e.bookingData.couponCode=t.payload.coupon.uniqueId,e.bookingData.discountApplied=t.payload.discountAmount,e.bookingData.priceDetails.discount=t.payload.discountAmount;let{subtotal:a,convenienceFee:o,taxes:n,discount:s}=e.bookingData.priceDetails,i=a+o+n-s;e.bookingData.priceDetails.total=i,e.bookingData.totalAmount=i}},removeCoupon:e=>{if(e.bookingData){e.bookingData.appliedCoupon=void 0,e.bookingData.couponCode=void 0,e.bookingData.discountApplied=0,e.bookingData.priceDetails.discount=0;let{subtotal:t,convenienceFee:a,taxes:o}=e.bookingData.priceDetails,n=t+a+o;e.bookingData.priceDetails.total=n,e.bookingData.totalAmount=n}},addSeatToRow:(e,t)=>{if(e.bookingData){let{rowId:a,rowLabel:o,seatNumber:n,seatType:s,pricePerSeat:i}=t.payload,l=e.bookingData.selectedRows.findIndex(e=>e.rowId===a);l>=0?e.bookingData.selectedRows[l].seatsSelected.includes(n)||(e.bookingData.selectedRows[l].seatsSelected.push(n),e.bookingData.selectedRows[l].seatCount+=1,e.bookingData.selectedRows[l].totalPrice+=i):e.bookingData.selectedRows.push({rowId:a,rowLabel:o,seatsSelected:[n],seatCount:1,seatType:s,pricePerSeat:i,totalPrice:i});let r=e.bookingData.selectedRows.flatMap(e=>e.seatsSelected.map(t=>"".concat(e.rowLabel).concat(t)));e.bookingData.selectedSeats=r;let c=e.bookingData.selectedRows.reduce((e,t)=>e+t.totalPrice,0);e.bookingData.priceDetails.subtotal=c,e.bookingData.amount=c;let d=Math.round(.05*c),u=Math.round(.18*c),m=c+d+u-e.bookingData.priceDetails.discount;e.bookingData.priceDetails.convenienceFee=d,e.bookingData.priceDetails.taxes=u,e.bookingData.priceDetails.total=m,e.bookingData.tax=u,e.bookingData.totalAmount=m}},removeSeatFromRow:(e,t)=>{if(e.bookingData){let{rowId:a,seatNumber:o,pricePerSeat:n}=t.payload,s=e.bookingData.selectedRows.findIndex(e=>e.rowId===a);if(s>=0){let t=e.bookingData.selectedRows[s],a=t.seatsSelected.indexOf(o);if(a>=0){t.seatsSelected.splice(a,1),t.seatCount-=1,t.totalPrice-=n,0===t.seatCount&&e.bookingData.selectedRows.splice(s,1);let o=e.bookingData.selectedRows.flatMap(e=>e.seatsSelected.map(t=>"".concat(e.rowLabel).concat(t)));e.bookingData.selectedSeats=o;let i=e.bookingData.selectedRows.reduce((e,t)=>e+t.totalPrice,0);e.bookingData.priceDetails.subtotal=i,e.bookingData.amount=i;let l=Math.round(.05*i),r=Math.round(.18*i),c=i+l+r-e.bookingData.priceDetails.discount;e.bookingData.priceDetails.convenienceFee=l,e.bookingData.priceDetails.taxes=r,e.bookingData.priceDetails.total=c,e.bookingData.tax=r,e.bookingData.totalAmount=c}}}},updateSelectedSeats:(e,t)=>{e.bookingData&&(e.bookingData.selectedSeats=t.payload)},updateSeatPricing:(e,t)=>{if(e.bookingData){e.bookingData.seatPricing=t.payload;let a=t.payload.reduce((e,t)=>e+t.finalPrice*t.seatCount,0);e.bookingData.priceDetails.subtotal=a,e.bookingData.amount=a;let o=Math.round(.05*a),n=Math.round(.18*a),s=a+o+n-e.bookingData.priceDetails.discount;e.bookingData.priceDetails.convenienceFee=o,e.bookingData.priceDetails.taxes=n,e.bookingData.priceDetails.total=s,e.bookingData.tax=n,e.bookingData.totalAmount=s}},updatePriceDetails:(e,t)=>{e.bookingData&&(e.bookingData.priceDetails={...e.bookingData.priceDetails,...t.payload},e.bookingData.amount=e.bookingData.priceDetails.subtotal,e.bookingData.tax=e.bookingData.priceDetails.taxes,e.bookingData.totalAmount=e.bookingData.priceDetails.total)},updateShowDetails:(e,t)=>{e.bookingData&&(e.bookingData={...e.bookingData,...t.payload})},updateUserDetails:(e,t)=>{e.bookingData&&(e.bookingData={...e.bookingData,...t.payload})},updatePaymentDetails:(e,t)=>{e.bookingData&&(e.bookingData={...e.bookingData,...t.payload})},updateBookingStatus:(e,t)=>{e.bookingData&&(e.bookingData={...e.bookingData,...t.payload})},updateAmount:(e,t)=>{e.bookingData&&(e.bookingData.amount=t.payload,e.bookingData.priceDetails.subtotal=t.payload)},updateTax:(e,t)=>{e.bookingData&&(e.bookingData.tax=t.payload,e.bookingData.priceDetails.taxes=t.payload)},updateTotalAmount:(e,t)=>{e.bookingData&&(e.bookingData.totalAmount=t.payload,e.bookingData.priceDetails.total=t.payload)},calculateTotalAmount:e=>{if(e.bookingData){let{subtotal:t,convenienceFee:a,taxes:o,discount:n}=e.bookingData.priceDetails,s=t+a+o-n;e.bookingData.priceDetails.total=s,e.bookingData.totalAmount=s}},applyDiscount:(e,t)=>{if(e.bookingData){e.bookingData.priceDetails.discount=t.payload.discount,t.payload.couponCode&&(e.bookingData.couponCode=t.payload.couponCode);let{subtotal:a,convenienceFee:o,taxes:n,discount:s}=e.bookingData.priceDetails,i=a+o+n-s;e.bookingData.priceDetails.total=i,e.bookingData.totalAmount=i}},removeDiscount:e=>{if(e.bookingData){e.bookingData.priceDetails.discount=0,e.bookingData.couponCode=void 0;let{subtotal:t,convenienceFee:a,taxes:o}=e.bookingData.priceDetails,n=t+a+o;e.bookingData.priceDetails.total=n,e.bookingData.totalAmount=n}},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload,e.isLoading=!1},resetBookingData:e=>{e.bookingData=null,e.isLoading=!1,e.error=null},clearError:e=>{e.error=null},clearSelectedSeats:e=>{e.bookingData&&(e.bookingData.selectedRows=[],e.bookingData.selectedSeats=[],e.bookingData.seatPricing=[],e.bookingData.priceDetails={subtotal:0,convenienceFee:0,taxes:0,discount:0,total:0},e.bookingData.amount=0,e.bookingData.tax=0,e.bookingData.totalAmount=0)}}}),{setBookingData:n,updateSelectedRows:s,addSeatToRow:i,removeSeatFromRow:l,updateSelectedSeats:r,updateSeatPricing:c,updatePriceDetails:d,updateShowDetails:u,updateUserDetails:m,updatePaymentDetails:b,updateBookingStatus:p,updateAmount:g,updateTax:f,updateTotalAmount:h,calculateTotalAmount:x,applyDiscount:v,removeDiscount:w,setLoading:k,setError:y,resetBookingData:D,clearError:I,applyCoupon:S,removeCoupon:j,clearSelectedSeats:N}=o.actions,P=o.reducer},11529:e=>{e.exports={style:{fontFamily:"'Lexend', 'Lexend Fallback'",fontWeight:200,fontStyle:"normal"},className:"__className_9e6433"}},18608:e=>{e.exports={style:{fontFamily:"'Lexend', 'Lexend Fallback'",fontWeight:700,fontStyle:"normal"},className:"__className_81d908"}},35169:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});let o=(0,a(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35308:(e,t,a)=>{"use strict";a.d(t,{o:()=>s});let o={BY_ID:e=>"/users/showtime/".concat(e)};var n=a(77567);let s=async e=>(await n.A.get(o.BY_ID(e))).data},44326:(e,t,a)=>{"use strict";a.d(t,{E0:()=>l.default,HS:()=>i.default,Id:()=>r.default,jq:()=>o.default,lq:()=>n.default,wi:()=>c.default,y:()=>s.default});var o=a(81534),n=a(95502),s=a(48109),i=a(67670),l=a(72607),r=a(87081),c=a(5079)},47863:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});let o=(0,a(19946).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},54409:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var o=a(95155),n=a(51154);a(12115);var s=a(70304),i=a.n(s);let l=e=>{let{text:t}=e;return(0,o.jsxs)("div",{children:["  ",(0,o.jsx)("div",{className:"flex items-center justify-center h-screen ",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)(n.A,{className:"w-8 h-8 text-white animate-spin mx-auto mb-4"}),(0,o.jsx)("p",{className:"".concat(i().className," text-white"),children:t})]})})]})}},62511:e=>{e.exports={style:{fontFamily:"'Lexend', 'Lexend Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_3f8a51"}},63081:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var o=a(95155),n=a(12115),s=a(8724),i=a(86927),l=a(88453),r=a(53218);let c=e=>{let{height:t=3.5,baseWidth:a=5.5,animationType:c="rotate",glow:d=1,offset:u={x:0,y:0},noise:m=.5,transparent:b=!0,scale:p=3.6,hueShift:g=0,colorFrequency:f=1,hoverStrength:h=2,inertia:x=.05,bloom:v=1,suspendWhenOffscreen:w=!1,timeScale:k=.5}=e,y=(0,n.useRef)(null);return(0,n.useEffect)(()=>{var e,o;let n=y.current;if(!n)return;let D=Math.max(.001,t),I=.5*Math.max(.001,a),S=Math.max(0,d),j=Math.max(0,m),N=null!=(e=null==u?void 0:u.x)?e:0,P=null!=(o=null==u?void 0:u.y)?o:0,A=Math.max(.001,p),C=Math.max(0,f||1),M=Math.max(0,v||1),R=Math.max(0,k||1),T=Math.max(0,h||1),L=Math.max(0,Math.min(1,x||.12)),_=Math.min(2,window.devicePixelRatio||1),E=new s.A({dpr:_,alpha:b,antialias:!1}),B=E.gl;B.disable(B.DEPTH_TEST),B.disable(B.CULL_FACE),B.disable(B.BLEND),Object.assign(B.canvas.style,{position:"absolute",inset:"0",width:"100%",height:"100%",display:"block"}),n.appendChild(B.canvas);let F=new i.l(B),H=new Float32Array(2),z=new Float32Array(2),O=new l.B(B,{vertex:"\n      attribute vec2 position;\n      void main() {\n        gl_Position = vec4(position, 0.0, 1.0);\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec2  iResolution;\n      uniform float iTime;\n\n      uniform float uHeight;\n      uniform float uBaseHalf;\n      uniform mat3  uRot;\n      uniform int   uUseBaseWobble;\n      uniform float uGlow;\n      uniform vec2  uOffsetPx;\n      uniform float uNoise;\n      uniform float uSaturation;\n      uniform float uScale;\n      uniform float uHueShift;\n      uniform float uColorFreq;\n      uniform float uBloom;\n      uniform float uCenterShift;\n      uniform float uInvBaseHalf;\n      uniform float uInvHeight;\n      uniform float uMinAxis;\n      uniform float uPxScale;\n      uniform float uTimeScale;\n\n      vec4 tanh4(vec4 x){\n        vec4 e2x = exp(2.0*x);\n        return (e2x - 1.0) / (e2x + 1.0);\n      }\n\n      float rand(vec2 co){\n        return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453123);\n      }\n\n      float sdOctaAnisoInv(vec3 p){\n        vec3 q = vec3(abs(p.x) * uInvBaseHalf, abs(p.y) * uInvHeight, abs(p.z) * uInvBaseHalf);\n        float m = q.x + q.y + q.z - 1.0;\n        return m * uMinAxis * 0.5773502691896258;\n      }\n\n      float sdPyramidUpInv(vec3 p){\n        float oct = sdOctaAnisoInv(p);\n        float halfSpace = -p.y;\n        return max(oct, halfSpace);\n      }\n\n      mat3 hueRotation(float a){\n        float c = cos(a), s = sin(a);\n        mat3 W = mat3(\n          0.299, 0.587, 0.114,\n          0.299, 0.587, 0.114,\n          0.299, 0.587, 0.114\n        );\n        mat3 U = mat3(\n           0.701, -0.587, -0.114,\n          -0.299,  0.413, -0.114,\n          -0.300, -0.588,  0.886\n        );\n        mat3 V = mat3(\n           0.168, -0.331,  0.500,\n           0.328,  0.035, -0.500,\n          -0.497,  0.296,  0.201\n        );\n        return W + U * c + V * s;\n      }\n\n      void main(){\n        vec2 f = (gl_FragCoord.xy - 0.5 * iResolution.xy - uOffsetPx) * uPxScale;\n\n        float z = 5.0;\n        float d = 0.0;\n\n        vec3 p;\n        vec4 o = vec4(0.0);\n\n        float centerShift = uCenterShift;\n        float cf = uColorFreq;\n\n        mat2 wob = mat2(1.0);\n        if (uUseBaseWobble == 1) {\n          float t = iTime * uTimeScale;\n          float c0 = cos(t + 0.0);\n          float c1 = cos(t + 33.0);\n          float c2 = cos(t + 11.0);\n          wob = mat2(c0, c1, c2, c0);\n        }\n\n        const int STEPS = 100;\n        for (int i = 0; i < STEPS; i++) {\n          p = vec3(f, z);\n          p.xz = p.xz * wob;\n          p = uRot * p;\n          vec3 q = p;\n          q.y += centerShift;\n          d = 0.1 + 0.2 * abs(sdPyramidUpInv(q));\n          z -= d;\n          o += (sin((p.y + z) * cf + vec4(0.0, 1.0, 2.0, 3.0)) + 1.0) / d;\n        }\n\n        o = tanh4(o * o * (uGlow * uBloom) / 1e5);\n\n        vec3 col = o.rgb;\n        float n = rand(gl_FragCoord.xy + vec2(iTime));\n        col += (n - 0.5) * uNoise;\n        col = clamp(col, 0.0, 1.0);\n\n        float L = dot(col, vec3(0.2126, 0.7152, 0.0722));\n        col = clamp(mix(vec3(L), col, uSaturation), 0.0, 1.0);\n\n        if(abs(uHueShift) > 0.0001){\n          col = clamp(hueRotation(uHueShift) * col, 0.0, 1.0);\n        }\n\n        gl_FragColor = vec4(col, o.a);\n      }\n    ",uniforms:{iResolution:{value:H},iTime:{value:0},uHeight:{value:D},uBaseHalf:{value:I},uUseBaseWobble:{value:1},uRot:{value:new Float32Array([1,0,0,0,1,0,0,0,1])},uGlow:{value:S},uOffsetPx:{value:z},uNoise:{value:j},uSaturation:{value:b?1.5:1},uScale:{value:A},uHueShift:{value:g||0},uColorFreq:{value:C},uBloom:{value:M},uCenterShift:{value:.25*D},uInvBaseHalf:{value:1/I},uInvHeight:{value:1/D},uMinAxis:{value:Math.min(I,D)},uPxScale:{value:1/(.1*(B.drawingBufferHeight||1)*A)},uTimeScale:{value:R}}}),q=new r.e(B,{geometry:F,program:O}),W=()=>{let e=n.clientWidth||1,t=n.clientHeight||1;E.setSize(e,t),H[0]=B.drawingBufferWidth,H[1]=B.drawingBufferHeight,z[0]=N*_,z[1]=P*_,O.uniforms.uPxScale.value=1/(.1*(B.drawingBufferHeight||1)*A)},V=new ResizeObserver(W);V.observe(n),W();let G=new Float32Array(9),U=(e,t,a,o)=>{let n=Math.cos(e),s=Math.sin(e),i=Math.cos(t),l=Math.sin(t),r=Math.cos(a),c=Math.sin(a);return o[0]=n*r+s*l*c,o[1]=i*c,o[2]=-s*r+n*l*c,o[3]=-n*c+s*l*r,o[4]=i*r,o[5]=s*c+n*l*r,o[6]=s*i,o[7]=-l,o[8]=n*i,o},X=j<1e-6,Y=0,Z=performance.now(),J=()=>{Y||(Y=requestAnimationFrame(ep))},K=()=>{Y&&(cancelAnimationFrame(Y),Y=0)},Q=()=>Math.random(),$=(.3+.6*Q())*1,ee=(.2+.7*Q())*1,et=(.1+.5*Q())*1,ea=Q()*Math.PI*2,eo=Q()*Math.PI*2,en=0,es=0,ei=0,el=0,er=0,ec=(e,t,a)=>e+(t-e)*a,ed={x:0,y:0,inside:!0},eu=()=>{ed.inside=!1},em=()=>{ed.inside=!1},eb=null;"hover"===c?(eb=e=>{(e=>{let t=Math.max(1,window.innerWidth),a=Math.max(1,window.innerHeight),o=(e.clientX-.5*t)/(.5*t),n=(e.clientY-.5*a)/(.5*a);ed.x=Math.max(-1,Math.min(1,o)),ed.y=Math.max(-1,Math.min(1,n)),ed.inside=!0})(e),J()},window.addEventListener("pointermove",eb,{passive:!0}),window.addEventListener("mouseleave",eu),window.addEventListener("blur",em),O.uniforms.uUseBaseWobble.value=0):"3drotate"===c?O.uniforms.uUseBaseWobble.value=0:O.uniforms.uUseBaseWobble.value=1;let ep=e=>{let t=(e-Z)*.001;O.uniforms.iTime.value=t;let a=!0;if("hover"===c){el=(ed.inside?-ed.x:0)*(.6*T),er=(ed.inside?ed.y:0)*(.6*T);let e=es,t=ei;en=ec(en,el,L),es=ec(e,er,L),ei=ec(t,0,.1),O.uniforms.uRot.value=U(en,es,ei,G),X&&1e-4>Math.abs(en-el)&&1e-4>Math.abs(es-er)&&1e-4>Math.abs(ei)&&(a=!1)}else if("3drotate"===c){let e=t*R;en=e*ee,es=.6*Math.sin(e*$+ea),ei=.5*Math.sin(e*et+eo),O.uniforms.uRot.value=U(en,es,ei,G),R<1e-6&&(a=!1)}else G[0]=1,G[1]=0,G[2]=0,G[3]=0,G[4]=1,G[5]=0,G[6]=0,G[7]=0,G[8]=1,O.uniforms.uRot.value=G,R<1e-6&&(a=!1);E.render({scene:q}),Y=a?requestAnimationFrame(ep):0};if(w){let e=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)?J():K()});e.observe(n),J(),n.__prismIO=e}else J();return()=>{if(K(),V.disconnect(),"hover"===c&&(eb&&window.removeEventListener("pointermove",eb),window.removeEventListener("mouseleave",eu),window.removeEventListener("blur",em)),w){let e=n.__prismIO;e&&e.disconnect(),delete n.__prismIO}B.canvas.parentElement===n&&n.removeChild(B.canvas)}},[t,a,c,d,m,null==u?void 0:u.x,null==u?void 0:u.y,p,b,g,f,k,h,x,v,w]),(0,o.jsx)("div",{className:"w-full h-full relative",ref:y})}},66474:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});let o=(0,a(19946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},70304:e=>{e.exports={style:{fontFamily:"'Lexend', 'Lexend Fallback'",fontWeight:500,fontStyle:"normal"},className:"__className_5a1147"}},76049:(e,t,a)=>{"use strict";a.d(t,{F:()=>i});var o=a(12115),n=a(14298);let s=null,i=()=>{let[e,t]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!s){let e="https://cineora.fun";console.log("\uD83D\uDD17 Creating socket connection to:",e),(s=(0,n.io)(e,{withCredentials:!0,transports:["polling","websocket"],timeout:2e4,forceNew:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:10})).on("connect",()=>{console.log("✅ Socket connected! ID:",null==s?void 0:s.id),t(!0)}),s.on("disconnect",e=>{console.log(" Socket disconnected. Reason:",e),t(!1)}),s.on("connect_error",e=>{t(!1)}),s.on("new-message",e=>{console.log("\uD83D\uDCE8 New message received:",e),window.dispatchEvent(new CustomEvent("newMessage",{detail:e}))}),s.on("message-edited",e=>{console.log("✏️ Message edited:",e),window.dispatchEvent(new CustomEvent("messageEdited",{detail:e}))}),s.on("message-deleted",e=>{console.log("\uD83D\uDDD1️ Message deleted:",e),window.dispatchEvent(new CustomEvent("messageDeleted",{detail:e}))}),s.onAny(function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),o=1;o<t;o++)a[o-1]=arguments[o]}),s.on("participant_left",e=>{}),s.on("participant_joined",e=>{}),s.on("connect",()=>{null==s||s.emit("test-ping",{message:"Frontend connected"})}),s.on("test-pong",e=>{})}return s&&s.connected&&!e&&t(!0),()=>{}},[]),(0,o.useEffect)(()=>{let a=setInterval(()=>{if(s){let a=s.connected;a!==e&&t(a)}},5e3);return()=>clearInterval(a)},[e]),{socket:s,isConnected:e,joinChatRoom:e=>{console.log("\uD83D\uDD17 Joining chat room:",e),null==s||s.emit("join-showtime","chat-".concat(e))},leaveChatRoom:e=>{console.log("\uD83D\uDC4B Leaving chat room:",e),null==s||s.emit("leave-showtime","chat-".concat(e))}}}},86019:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var o=a(95155),n=a(12115),s=a(35695),i=a(11529),l=a.n(i),r=a(62511),c=a.n(r),d=a(18608),u=a.n(d),m=a(35169),b=a(35308),p=a(11518),g=a.n(p);function f(){return(0,o.jsxs)("div",{className:"jsx-91816b1593caa0fe mb-16 flex justify-center",children:[(0,o.jsxs)("div",{className:"jsx-91816b1593caa0fe relative flex flex-col items-center",children:[(0,o.jsxs)("div",{className:"jsx-91816b1593caa0fe relative",children:[(0,o.jsx)("div",{className:"jsx-91816b1593caa0fe absolute inset-0 blur-2xl opacity-40",children:(0,o.jsx)("div",{style:{borderRadius:"60% 60% 0 0",transform:"perspective(500px) rotateX(18deg)"},className:"jsx-91816b1593caa0fe w-[700px] h-20 bg-gradient-to-r from-transparent via-violet-400/80 to-transparent"})}),(0,o.jsx)("div",{className:"jsx-91816b1593caa0fe absolute inset-0 blur-xl opacity-60",children:(0,o.jsx)("div",{style:{borderRadius:"55% 55% 0 0",transform:"perspective(450px) rotateX(16deg)"},className:"jsx-91816b1593caa0fe w-[650px] h-18 bg-gradient-to-r from-transparent via-violet-500/70 to-transparent"})}),(0,o.jsxs)("div",{style:{background:"linear-gradient(90deg, transparent 0%, rgba(6, 182, 212, 0.9) 20%, rgba(236, 72, 153, 0.9) 50%, rgba(147, 51, 234, 0.9) 80%, transparent 100%)",borderRadius:"50% 50% 0 0",transform:"perspective(400px) rotateX(15deg)",boxShadow:"\n                0 0 30px rgba(6, 182, 212, 0.4),\n                0 0 60px rgba(236, 72, 153, 0.3),\n                inset 0 2px 15px rgba(255, 255, 255, 0.15),\n                inset 0 -2px 10px rgba(0, 0, 0, 0.2)\n              "},className:"jsx-91816b1593caa0fe w-[600px] h-16 relative overflow-hidden",children:[(0,o.jsx)("div",{style:{background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.6) 30%, rgba(255, 255, 255, 0.8) 50%, rgba(255, 255, 255, 0.6) 70%, transparent 100%)",borderRadius:"50px",filter:"blur(1px)"},className:"jsx-91816b1593caa0fe absolute top-0 left-1/2 transform -translate-x-1/2 w-4/5 h-2"}),(0,o.jsx)("div",{style:{background:"linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%)",animation:"shimmer 3s ease-in-out infinite"},className:"jsx-91816b1593caa0fe absolute inset-0 opacity-30"}),(0,o.jsx)("div",{className:"jsx-91816b1593caa0fe absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-transparent"})]}),(0,o.jsx)("div",{style:{background:"linear-gradient(90deg, transparent 0%, rgba(6, 182, 212, 0.4) 30%, rgba(236, 72, 153, 0.5) 50%, rgba(147, 51, 234, 0.4) 70%, transparent 100%)",borderRadius:"40% 40% 0 0",transform:"perspective(300px) rotateX(8deg)",boxShadow:"0 4px 15px rgba(6, 182, 212, 0.2)"},className:"jsx-91816b1593caa0fe w-[580px] h-4 mx-auto -mt-1 relative"}),(0,o.jsx)("div",{style:{background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%)",borderRadius:"30% 30% 0 0",transform:"perspective(200px) rotateX(4deg)",filter:"blur(2px)"},className:"jsx-91816b1593caa0fe w-[540px] h-2 mx-auto -mt-1 opacity-20"})]}),(0,o.jsxs)("div",{className:"jsx-91816b1593caa0fe mt-8 text-center relative",children:[(0,o.jsx)("div",{className:"jsx-91816b1593caa0fe absolute inset-0 blur-lg opacity-30",children:(0,o.jsx)("p",{className:"jsx-91816b1593caa0fe tracking-[0.3em] text-cyan-400 text-sm font-extralight",children:"SCREEN"})}),(0,o.jsx)("p",{style:{textShadow:"0 0 10px rgba(6, 182, 212, 0.3)"},className:"jsx-91816b1593caa0fe tracking-[0.3em] text-gray-200 text-sm font-extralight relative z-10",children:"SCREEN"}),(0,o.jsxs)("div",{className:"jsx-91816b1593caa0fe relative mt-3 mx-auto w-20 h-px overflow-hidden",children:[(0,o.jsx)("div",{style:{animation:"pulse 2s ease-in-out infinite"},className:"jsx-91816b1593caa0fe absolute inset-0 bg-gradient-to-r from-transparent via-violet-400 to-transparent opacity-60"}),(0,o.jsx)("div",{style:{animation:"pulse 2s ease-in-out infinite 1s"},className:"jsx-91816b1593caa0fe absolute inset-0 bg-gradient-to-r from-transparent via-pink-400 to-transparent opacity-40"})]})]})]}),(0,o.jsx)(g(),{id:"91816b1593caa0fe",children:"@keyframes shimmer{0%{transform:translatex(-100%)}100%{transform:translatex(100%)}}"})]})}let h=e=>{let{status:t,seatType:a,onClick:n,disabled:s=!1}=e;return(0,o.jsx)("div",{className:"w-6 h-6 rounded cursor-pointer transition-all duration-150 hover:scale-105 border",onClick:s?void 0:n,style:{backgroundColor:(()=>{switch(t){case"booked":return"#595959";case"selected":if("VIP"===a)return"#EAB308";if("Premium"===a)return"#9333EA";return"#06B6D4";case"available":return"#F1F5F9";case"blocked":return"#afff94";default:return"#64748B"}})(),borderColor:(()=>{switch(t){case"booked":return"#404040";case"selected":case"available":if("VIP"===a)return"#CA8A04";if("Premium"===a)return"#7C3AED";return"#0891B2";case"blocked":return"#afff94";default:return"#475569"}})(),opacity:s?.7:1,cursor:s?"not-allowed":"pointer",borderWidth:"1px"}})};function x(e){let{row:t,seatStatuses:a,onSeatClick:n,getSeatButtonStyle:s,getSeatPrice:i,lexendMediumClassName:l,maxCols:r,verticalAisles:c=[]}=e;return(0,o.jsxs)("div",{className:"flex items-center gap-1 py-0.5",children:[(0,o.jsx)("div",{className:"".concat(l," text-white/70 text-xs w-4 h-4 rounded-sm flex items-center justify-center"),style:{background:"rgba(255, 255, 255, 0.1)",fontSize:"10px"},children:t.rowLabel}),(0,o.jsx)("div",{className:"grid",style:{gridTemplateColumns:"repeat(".concat(r,", 24px)"),gap:"3px"},children:Array.from({length:r}).map((e,s)=>{if(c&&0!==c.length&&c.some(e=>s>=e.position&&s<e.position+e.width))return(0,o.jsx)("div",{className:"w-6 h-6"},"aisle-".concat(s));if(s<(t.offset||0))return(0,o.jsx)("div",{className:"w-6 h-6"},"offset-".concat(s));let i=s-(t.offset||0),l=t.seats[i];if(l){let e=a[l.id]||"available",t="booked"===e||"blocked"===e;return(0,o.jsx)(h,{status:e,seatType:l.type,onClick:()=>!t&&n(l.id),disabled:t},l.id)}return(0,o.jsx)("div",{className:"w-6 h-6"},"empty-".concat(s))})}),(0,o.jsx)("div",{className:"".concat(l," text-white/70 text-xs w-4 h-4 rounded-sm flex items-center justify-center"),style:{background:"rgba(255, 255, 2023-09-13T06:49:26.471Z)",fontSize:"10px"},children:t.rowLabel})]})}function v(e){let{rows:t,seatStatuses:a,onSeatClick:n,getSeatButtonStyle:s,getSeatPrice:i,lexendMediumClassName:l,maxCols:r,aisles:c}=e;return(0,o.jsx)("div",{className:"mb-8 overflow-x-auto",children:(0,o.jsx)("div",{className:"flex flex-col items-center space-y-2",children:(()=>{let e=[],d=(null==c?void 0:c.horizontal)||[];return t.forEach((t,u)=>{e.push((0,o.jsx)(x,{row:t,seatStatuses:a,onSeatClick:n,getSeatButtonStyle:s,getSeatPrice:i,lexendMediumClassName:l,maxCols:r,verticalAisles:null==c?void 0:c.vertical},t.rowLabel));let m=d.find(e=>e.afterRow===u+1);if(m)for(let a=0;a<m.width;a++)e.push((0,o.jsx)("div",{style:{height:"8px",width:"100%"}},"h-aisle-".concat(t.rowLabel,"-").concat(a)))}),e})()})})}function w(e){let{lexendSmallClassName:t}=e;return(0,o.jsx)("div",{className:"flex justify-center mb-8",children:(0,o.jsx)("div",{className:"backdrop-blur-sm bg-black/20 rounded-2xl p-4 border border-gray-500/30",children:(0,o.jsxs)("div",{className:"flex gap-6",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-cyan-400 rounded border-2 border-cyan-300"}),(0,o.jsx)("span",{className:"".concat(t," text-gray-300 text-sm"),children:"General"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-purple-600 rounded border-2 border-purple-500"}),(0,o.jsx)("span",{className:"".concat(t," text-gray-300 text-sm"),children:"Premium"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded border-2 border-yellow-400"}),(0,o.jsx)("span",{className:"".concat(t," text-gray-300 text-sm"),children:"VIP"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-[#afff94] rounded border-2 border-[#afff94]"}),(0,o.jsx)("span",{className:"".concat(t," text-gray-300 text-sm"),children:"On Hold"})]})]})})})}var k=a(92657),y=a(47863),D=a(66474);function I(e){let{selectedSeats:t,totalAmount:a,lexendMediumClassName:s,lexendSmallClassName:i,onCreateGroupInvite:l,lexendBoldClassName:r,onProceed:c,getSeatPrice:d,getSeatType:u}=e,[m,b]=(0,n.useState)(!1),p=(()=>{let e={};return t.forEach(t=>{let a=u(t)||"General",o=d(t),n="".concat(a,"-").concat(o);e[n]||(e[n]={seats:[],price:o,count:0,seatType:a}),e[n].seats.push(t),e[n].count+=1}),e})();return(0,o.jsxs)("div",{className:"backdrop-blur-sm bg-black/20 rounded-2xl p-6 border border-gray-500/30",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"".concat(s," text-white text-lg"),children:[t.length," Seat",t.length>1?"s":""," Selected"]}),(0,o.jsx)("p",{className:"".concat(i," text-gray-300"),children:t.join(", ")})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("p",{className:"".concat(r," text-white text-xl"),children:["₹",a]}),(0,o.jsx)("p",{className:"".concat(i," text-gray-300"),children:"Total Amount"})]})]}),(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)("button",{onClick:()=>b(!m),className:"".concat(i," flex items-center gap-2 text-gray-400 hover:text-white transition-all duration-200 text-sm"),children:[(0,o.jsx)(k.A,{className:"w-4 h-4"}),"See Details",m?(0,o.jsx)(y.A,{className:"w-4 h-4"}):(0,o.jsx)(D.A,{className:"w-4 h-4"})]})}),m&&(0,o.jsxs)("div",{className:"mb-4 p-4 rounded-xl bg-black/30 border border-gray-600/30",children:[(0,o.jsx)("h4",{className:"".concat(s," text-white text-sm mb-3"),children:"Price Breakdown"}),Object.entries(p).map(e=>{let[t,a]=e;return(0,o.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-600/20 last:border-b-0",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"VIP"===a.seatType?"#EAB308":"Premium"===a.seatType?"#9333EA":"#06B6D4",borderColor:"VIP"===a.seatType?"#CA8A04":"Premium"===a.seatType?"#7C3AED":"#0891B2"}}),(0,o.jsxs)("span",{className:"".concat(i," text-gray-300 text-sm"),children:[a.seatType," (₹",a.price,")"]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)("span",{className:"".concat(i," text-gray-400 text-sm"),children:[a.count," \xd7 ₹",a.price]}),(0,o.jsxs)("span",{className:"".concat(i," text-white text-sm font-medium"),children:["= ₹",a.count*a.price]})]})]},t)}),(0,o.jsxs)("div",{className:"flex items-center justify-between pt-3 mt-3 border-t border-gray-500/30",children:[(0,o.jsx)("span",{className:"".concat(s," text-white text-base font-semibold"),children:"TOTAL"}),(0,o.jsxs)("span",{className:"".concat(r," text-white text-lg"),children:["₹",a]})]})]}),(0,o.jsx)("div",{className:"flex gap-3",children:(0,o.jsx)("button",{onClick:c,className:"".concat(s," ").concat(l?"flex-1":"w-full"," border bg-white text-black hover:bg-gradient-to-tr hover:from-violet-300 hover:to-yellow-100 font-medium py-4 rounded-xl transition-all duration-200 transform hover:scale-[1.02]"),children:"Book Now"})})]})}var S=a(63081),j=a(44326),N=a(54409),P=a(34540),A=a(6743),C=a(47440),M=a(76049);function R(){var e;let t=(0,s.useParams)(),a=(0,s.useRouter)(),i=(0,P.wA)(),r=(0,P.d4)(e=>e.auth.user);(0,P.d4)(e=>e.booking.bookingData);let d=null==t?void 0:t.showtimeId,[p,g]=(0,n.useState)(null),[h,x]=(0,n.useState)(!0),[k,y]=(0,n.useState)(null),[D,R]=(0,n.useState)([]),[T,L]=(0,n.useState)({}),[_,E]=(0,n.useState)(!1),B=e=>{if(!p)return 0;let t=e.charAt(0),a=p.rowPricing.find(e=>e.rowLabel===t);return(null==a?void 0:a.showtimePrice)||(null==a?void 0:a.basePrice)||150},F=()=>D.reduce((e,t)=>e+B(t),0);(0,n.useEffect)(()=>{d&&(async()=>{try{x(!0);let e=(await (0,b.o)(d)).data;e&&g(e);let t={};e&&"object"==typeof e.screenId&&e.screenId.layout.advancedLayout.rows.forEach(a=>{a.seats.forEach(a=>{e.bookedSeats&&(null==e?void 0:e.bookedSeats.includes(a.id))?t[a.id]="booked":Array.isArray(e.blockedSeats)&&e.blockedSeats.some(e=>e.seatId===a.id)?t[a.id]="blocked":t[a.id]="available"})}),L(t)}catch(e){y(e instanceof Error?e.message:"An error occurred")}finally{x(!1)}})()},[d]);let H=()=>{a.back()},{socket:z,isConnected:O}=(0,M.F)();return(0,n.useEffect)(()=>{if(console.log("- showtimeId:",d),!z||!O)return void console.log(" Socket not ready yet");if(z&&!z.connected&&!O){console.log(" Force reconnecting socket..."),z.connect();return}return z.emit("join-showtime",d),z.on("seat-update",e=>{console.log("seat-update",e),L(t=>{let a={...t};return"booked"===e.action&&e.bookedSeats&&e.bookedSeats.forEach(e=>{"selected"===a[e]&&R(t=>t.filter(t=>t!==e)),a[e]="booked"}),console.log("The socket Action is :",e.action),"cancelled"===e.action&&e.cancelledSeats&&e.cancelledSeats.forEach(e=>{a[e]="available"}),"held"===e.action&&e.heldSeats&&e.heldSeats.forEach(e=>{"available"===a[e]&&(a[e]="blocked")}),"released"===e.action&&e.releasedSeats&&e.releasedSeats.forEach(e=>{"blocked"===a[e]&&(a[e]="available")}),a})}),()=>{z.emit("leave-showtime",d),z.off("seat-update")}},[z,O,d]),(0,o.jsx)(C.A,{allowedRoles:["user"],children:(0,o.jsxs)("div",{className:"min-h-screen  bg-black relative overflow-hidden",children:[(0,o.jsx)("div",{className:"fixed top-20 right-4 z-50",children:(0,o.jsx)("div",{className:"px-3 py-1 rounded-full ".concat(u().className," text-sm backdrop-blur-sm ").concat(O?" text-green-400 border border-green-500":" text-red-400 border border-red-500"),children:O?" Connected":" Connecting"})}),(0,o.jsx)("div",{className:"fixed inset-0 z-10 opacity-30",children:(0,o.jsx)(S.A,{animationType:"rotate",timeScale:.5,height:3.5,baseWidth:5.5,scale:3.6,hueShift:0,colorFrequency:1,noise:0,glow:1.3})}),(0,o.jsx)(j.jq,{}),(0,o.jsxs)("div",{className:"relative z-20",children:[h&&(0,o.jsx)(N.A,{text:"Loading seats"}),(k||!p)&&!h&&(0,o.jsx)("div",{className:"pt-20 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("p",{className:"".concat(c().className," text-red-400 mb-4"),children:k||"Showtime not found"}),(0,o.jsx)("button",{onClick:H,className:"".concat(c().className," bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-lg transition-colors"),children:"Go Back"})]})}),!h&&p&&(0,o.jsx)("div",{className:"pb-12",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,o.jsxs)("div",{className:"relative flex items-center pt-12 pb-30",children:[(0,o.jsxs)("button",{onClick:H,className:"".concat(l().className," flex items-center gap-2 text-gray-400 hover:text-white transition-all duration-300 mb-6 absolute left-5 z-10"),children:[(0,o.jsx)(m.A,{className:"w-5 h-5"}),"Back to Showtimes"]}),(0,o.jsx)("div",{className:"w-full flex justify-center",children:(0,o.jsx)("p",{className:"".concat(u().className," text-4xl text-center text-white"),children:"Choose Your Seats"})})]}),(0,o.jsx)(f,{}),"object"==typeof p.screenId&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v,{rows:p.screenId.layout.advancedLayout.rows,seatStatuses:T,onSeatClick:e=>{let t=T[e];"booked"!==t&&"blocked"!==t&&("selected"===t?(R(t=>t.filter(t=>t!==e)),L(t=>({...t,[e]:"available"}))):D.length<6&&(R(t=>[...t,e]),L(t=>({...t,[e]:"selected"}))))},getSeatButtonStyle:(e,t)=>{let a="w-8 h-8 rounded-lg transition-all duration-200 cursor-pointer flex items-center justify-center text-xs font-medium border-2 ";switch("VIP"===t?a+="bg-yellow-500 text-black border-yellow-400 ":"Premium"===t?a+="bg-purple-600 text-white border-purple-500 ":a+="bg-gray-600 text-white border-gray-500 ",e){case"available":return a+"hover:opacity-80";case"booked":return"w-8 h-8 rounded-lg bg-red-500 text-white cursor-not-allowed border-2 border-red-400 flex items-center justify-center text-xs font-medium";case"selected":return"w-8 h-8 rounded-lg bg-cyan-400 text-black border-2 border-cyan-300 scale-110 flex items-center justify-center text-xs font-medium transition-all duration-200";case"blocked":return"w-8 h-8 rounded-lg bg-gray-800 text-gray-600 cursor-not-allowed border-2 border-gray-700 flex items-center justify-center text-xs font-medium";default:return a}},getSeatPrice:B,lexendMediumClassName:c().className,maxCols:(e=p.screenId.layout.advancedLayout.rows)&&0!==e.length?Math.max(...e.map(e=>{var t;return(e.offset||0)+((null==(t=e.seats)?void 0:t.length)||0)})):0,aisles:p.screenId.layout.advancedLayout.aisles}),(0,o.jsx)(w,{lexendSmallClassName:l().className}),D.length>0&&(0,o.jsx)(I,{selectedSeats:D,totalAmount:F(),lexendMediumClassName:c().className,lexendSmallClassName:l().className,onCreateGroupInvite:()=>{if(!p||!r)return;let e=D.map(e=>{let t=e.charAt(0),a=e.substring(1),o=p.rowPricing.find(e=>e.rowLabel===t);return{seatId:e,rowLabel:t,seatNumber:a,seatType:(null==o?void 0:o.seatType)||"Normal",basePrice:(null==o?void 0:o.basePrice)||150,finalPrice:(null==o?void 0:o.showtimePrice)||(null==o?void 0:o.basePrice)||150,rowId:(null==o?void 0:o._id)||""}}),t=e.reduce((e,t)=>{let a=e.find(e=>e.rowLabel===t.rowLabel);return a?(a.seatsSelected.push(t.seatNumber),a.seatCount+=1,a.totalPrice+=t.finalPrice):e.push({rowId:t.rowId,rowLabel:t.rowLabel,seatsSelected:[t.seatNumber],seatCount:1,seatType:t.seatType,pricePerSeat:t.finalPrice,totalPrice:t.finalPrice}),e},[]),o=F(),n=Math.round(.05*o),s=Math.round(.18*o),l=o+n+s;i((0,A._Z)({showtimeId:p._id,movieId:p.movieId._id,theaterId:p.theaterId._id,screenId:p.screenId._id,userId:(null==r?void 0:r.id)||(null==r?void 0:r.userId)||(null==r?void 0:r._id),movieTitle:p.movieId.title,movieDetails:{title:p.movieId.title,poster:p.movieId.poster,director:p.movieId.director,cast:p.movieId.cast,genre:p.movieId.genre,duration:p.movieId.duration,rating:p.movieId.rating,language:p.movieId.language,description:p.movieId.description,releaseDate:p.movieId.releaseDate,tmdbId:p.movieId.tmdbId,trailer:p.movieId.trailer},theaterName:p.theaterId.name,theaterDetails:{name:p.theaterId.name,address:p.theaterId.address,city:p.theaterId.city,state:p.theaterId.state,pincode:p.theaterId.pincode,phone:p.theaterId.phone,screens:p.theaterId.screens,facilities:p.theaterId.facilities,location:p.theaterId.location,isVerified:p.theaterId.isVerified},screenName:p.screenId.name,screenDetails:{name:p.screenId.name,totalSeats:p.screenId.totalSeats,layout:p.screenId.layout,features:p.screenId.features,theaterId:p.screenId.theaterId},showDate:p.showDate,showTime:p.showTime,showDetails:{endTime:p.endTime,format:p.format,language:p.language,availableSeats:p.availableSeats,totalSeats:p.totalSeats,bookedSeats:p.bookedSeats,blockedSeats:p.blockedSeats,isActive:p.isActive,ageRestriction:p.ageRestriction,ownerId:p.ownerId},allRowPricing:p.rowPricing,contactInfo:{email:(null==r?void 0:r.email)||"",phone:(null==r?void 0:r.phone)||""},selectedRows:t,selectedSeats:D,seatPricing:e.map(e=>({rowId:e.rowId,rowLabel:e.rowLabel,seatType:e.seatType,basePrice:e.basePrice,finalPrice:e.finalPrice,seatsSelected:[e.seatNumber],seatCount:1})),priceDetails:{subtotal:o,convenienceFee:n,taxes:s,discount:0,total:l},amount:o,tax:s,totalAmount:l,paymentMethod:"",paymentGateway:"",bookingStatus:"pending",paymentStatus:"pending"}));let c={showtimeId:p._id,selectedSeats:D,selectedRows:t,totalAmount:l,movieTitle:p.movieId.title,theaterName:p.theaterId.name};sessionStorage.setItem("bookingData",JSON.stringify(c)),a.push("/book/group/".concat(d))},lexendBoldClassName:u().className,onProceed:()=>{if(!p||!r)return;let e=D.map(e=>{let t=e.charAt(0),a=e.substring(1),o=p.rowPricing.find(e=>e.rowLabel===t);return{seatId:e,rowLabel:t,seatNumber:a,seatType:(null==o?void 0:o.seatType)||"Normal",basePrice:(null==o?void 0:o.basePrice)||150,finalPrice:(null==o?void 0:o.showtimePrice)||(null==o?void 0:o.basePrice)||150,rowId:(null==o?void 0:o._id)||""}}),t=e.reduce((e,t)=>{let a=e.find(e=>e.rowLabel===t.rowLabel);return a?(a.seatsSelected.push(t.seatNumber),a.seatCount+=1,a.totalPrice+=t.finalPrice):e.push({rowId:t.rowId,rowLabel:t.rowLabel,seatsSelected:[t.seatNumber],seatCount:1,seatType:t.seatType,pricePerSeat:t.finalPrice,totalPrice:t.finalPrice}),e},[]),o=F(),n=Math.round(.05*o),s=Math.round(.18*o),l=o+n+s;i((0,A._Z)({showtimeId:p._id,movieId:p.movieId._id,theaterId:p.theaterId._id,screenId:p.screenId._id,userId:(null==r?void 0:r.id)||(null==r?void 0:r.userId)||(null==r?void 0:r._id),movieTitle:p.movieId.title,movieDetails:{title:p.movieId.title,poster:p.movieId.poster,director:p.movieId.director,cast:p.movieId.cast,genre:p.movieId.genre,duration:p.movieId.duration,rating:p.movieId.rating,language:p.movieId.language,description:p.movieId.description,releaseDate:p.movieId.releaseDate,tmdbId:p.movieId.tmdbId,trailer:p.movieId.trailer},theaterName:p.theaterId.name,theaterDetails:{name:p.theaterId.name,address:p.theaterId.address,city:p.theaterId.city,state:p.theaterId.state,pincode:p.theaterId.pincode,phone:p.theaterId.phone,screens:p.theaterId.screens,facilities:p.theaterId.facilities,location:p.theaterId.location,isVerified:p.theaterId.isVerified},screenName:p.screenId.name,screenDetails:{name:p.screenId.name,totalSeats:p.screenId.totalSeats,layout:p.screenId.layout,features:p.screenId.features,theaterId:p.screenId.theaterId},showDate:p.showDate,showTime:p.showTime,showDetails:{endTime:p.endTime,format:p.format,language:p.language,availableSeats:p.availableSeats,totalSeats:p.totalSeats,bookedSeats:p.bookedSeats,blockedSeats:p.blockedSeats,isActive:p.isActive,ageRestriction:p.ageRestriction,ownerId:p.ownerId},allRowPricing:p.rowPricing,contactInfo:{email:(null==r?void 0:r.email)||"",phone:(null==r?void 0:r.phone)||""},selectedRows:t,selectedSeats:D,seatPricing:e.map(e=>({rowId:e.rowId,rowLabel:e.rowLabel,seatType:e.seatType,basePrice:e.basePrice,finalPrice:e.finalPrice,seatsSelected:[e.seatNumber],seatCount:1})),priceDetails:{subtotal:o,convenienceFee:n,taxes:s,discount:0,total:l},amount:o,tax:s,totalAmount:l,paymentMethod:"",paymentGateway:"",bookingStatus:"pending",paymentStatus:"pending"}));let c={showtimeId:p._id,selectedSeats:D,selectedRows:t,totalAmount:l,movieTitle:p.movieId.title,theaterName:p.theaterId.name};sessionStorage.setItem("bookingData",JSON.stringify(c)),a.push("/book/payment/".concat(d))},getSeatPrice:B,getSeatType:e=>{if(!p)return"General";let t=e.charAt(0);if("object"==typeof p.screenId){let a=p.screenId.layout.advancedLayout.rows.find(e=>e.rowLabel===t),o=null==a?void 0:a.seats.find(t=>t.id===e);if(null==o?void 0:o.type)return(null==o?void 0:o.type)||"General"}return"General"}})]})]})})]})]})})}},86124:(e,t,a)=>{Promise.resolve().then(a.bind(a,86019))}},e=>{e.O(0,[8853,4303,2601,730,7293,9268,1410,9772,5947,5356,7440,2686,8441,5964,7358],()=>e(e.s=86124)),_N_E=e.O()}]);