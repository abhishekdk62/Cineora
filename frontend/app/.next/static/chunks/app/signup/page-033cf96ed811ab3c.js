(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{6410:e=>{e.exports={style:{fontFamily:"'Lexend', 'Lexend Fallback'",fontWeight:500,fontStyle:"normal"},className:"__className_5a1147"}},10052:e=>{e.exports={style:{fontFamily:"'Lexend', 'Lexend Fallback'",fontWeight:300,fontStyle:"normal"},className:"__className_a698ad"}},19349:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var t=a(95155),r=a(12115),l=a(30697),n=a(6410),o=a.n(n),c=a(67694),i=a.n(c),d=a(35695),u=a(33208),m=a(34651),x=a(60452),f=a(30464),h=a(47440),p=a(62637);function b(){let[e,s]=(0,r.useState)("signup"),[a,n]=(0,r.useState)(""),[c,b]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),[N,w]=(0,r.useState)(""),[j,v]=(0,r.useState)(!1),[S,P]=(0,r.useState)(!1),k=(0,d.useRouter)(),O=(0,p.j)(),T=async e=>{y(!0),w("");try{if(e.confirmPassword&&e.password!==e.confirmPassword){w("Passwords don't match"),y(!1);return}let a={username:e.username||e.email.split("@")[0],email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,language:"en"};(await (0,f.$5)(a)).success&&(n(e.email),s("otp"),console.log("Signup successful, moving to OTP step"))}catch(e){e instanceof Error&&(w(null==e?void 0:e.message),console.error("Signup error:",e))}finally{y(!1)}},_=async e=>{e.preventDefault(),v(!0),w("");try{let e=await O((0,u.RY)({email:a,otp:c}));u.RY.fulfilled.match(e)?k.push("/"):w(e.payload)}catch(e){e instanceof Error&&(w(e.message||"OTP verification failed. Please try again."),console.error("OTP verification error:",e))}finally{v(!1)}},F=async()=>{P(!0),w("");try{console.log("Resending OTP to:",a);let e=await (0,f.LK)(a);e.success?console.log("OTP resent successfully:",e.message):w(e.message)}catch(e){e instanceof Error&&w(e.message||"Failed to resend OTP. Please try again."),console.error("Resend OTP error:",e)}finally{P(!1)}},E=async e=>{O((0,u.ET)());try{let s=await O((0,u.p3)(e));if(u.p3.fulfilled.match(s)){let e=s.payload;R(e.user.role)}else console.error("Google auth failed:",s)}catch(e){console.error("Google Sign-In error:",e)}},R=e=>{"admin"===e?k.push("/admin/dashboard"):"owner"===e?k.push("/owner/dashboard"):k.push("/")};return(0,t.jsx)(h.A,{excludedRoles:["owner","user","admin"],children:(0,t.jsxs)("div",{className:"min-h-screen relative flex items-center justify-center bg-black overflow-hidden p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 z-0",children:(0,t.jsx)(l.A,{colorStops:["#5B2EFF","#FF5A3C","#2EFF68"],blend:.5,amplitude:1,speed:.5})}),"signup"===e?(0,t.jsxs)("div",{className:"relative z-10 w-full max-w-md border border-gray-500 p-8 rounded-2xl backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"".concat(o().className," text-3xl text-white mb-2"),children:"Are you new here?"}),(0,t.jsx)("p",{className:"".concat(i().className," text-gray-300"),children:"Create your account"}),(0,t.jsx)("button",{onClick:()=>k.push("/owner"),className:"py-2 px-2 mt-2 border border-gray-400 text-white rounded-4xl",children:"Or Become an Owner"})]}),(0,t.jsx)(m.A,{isSignup:!0,onSubmit:T,onSwitch:()=>{k.push("/login")},onGoogleSuccess:E,error:N,loading:g})]}):(0,t.jsx)("div",{className:"relative z-10 w-full max-w-md border border-gray-500 p-8 rounded-2xl backdrop-blur-sm",children:(0,t.jsx)(x.A,{email:a,otp:c,setOtp:b,loading:j,error:N,onSubmit:_,onResend:F,lexend:o(),lexendSmall:i(),resendLoading:S})})]})})}},60452:(e,s,a)=>{"use strict";a.d(s,{A:()=>o});var t=a(95155),r=a(10052),l=a.n(r),n=a(12115);function o(e){let{email:s,otp:a,setOtp:r,loading:o,error:c,onSubmit:i,onResend:d,resendLoading:u=!1}=e,m=(0,n.useRef)([]),[x,f]=(0,n.useState)(120),[h,p]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(x>0){let e=setTimeout(()=>{f(x-1)},1e3);return()=>clearTimeout(e)}p(!0)},[x]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"".concat(l().className," text-2xl text-white mb-2"),children:"Verify Your Email"}),(0,t.jsxs)("p",{className:"".concat(l().className," text-gray-300"),children:["OTP sent to ",(0,t.jsx)("span",{className:"text-blue-400",children:s})]})]}),(0,t.jsxs)("form",{onSubmit:i,className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-between space-x-2",children:Array.from({length:6}).map((e,s)=>(0,t.jsx)("input",{type:"text",inputMode:"numeric",maxLength:1,className:"w-12 h-12 text-center text-white bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",value:a[s]||"",onChange:e=>((e,s)=>{let t=e.target.value.replace(/\D/,"");if(!t)return;let l=a.split("");l[s]=t,r(l.join("")),t&&m.current[s+1]&&m.current[s+1].focus()})(e,s),onKeyDown:e=>((e,s)=>{if("Backspace"===e.key){e.preventDefault();let t=a.split("");t[s]="",r(t.join("")),!e.currentTarget.value&&m.current[s-1]&&m.current[s-1].focus()}})(e,s),ref:e=>{e&&(m.current[s]=e)},disabled:o},s))}),c&&(0,t.jsx)("div",{className:"text-red-400 text-sm text-center  rounded-lg p-3",children:c}),(0,t.jsx)("button",{type:"submit",disabled:o||6!==a.length,className:"w-full px-8 py-3 bg-white text-black rounded-full disabled:bg-gray-600/50 disabled:cursor-not-allowed transition-all duration-200 ".concat(o?"animate-pulse":"hover:bg-gray-100"),children:o?(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-black border-t-transparent mr-2"}),"Verifying..."]}):"Verify OTP"})]}),(0,t.jsx)("div",{className:"text-center mt-4",children:u?(0,t.jsxs)("span",{className:"".concat(l().className," flex items-center justify-center text-gray-400"),children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-400 border-t-transparent mr-2"}),"Sending..."]}):h?(0,t.jsx)("button",{type:"button",onClick:()=>{h&&!u&&(d(),f(120),p(!1))},className:"".concat(l().className," text-blue-400 hover:text-blue-300 transition-colors"),children:"Resend OTP"}):(0,t.jsxs)("p",{className:"".concat(l().className," text-gray-400"),children:["Resend OTP in ",(e=>{let s=Math.floor(e/60);return"".concat(s,":").concat((e%60).toString().padStart(2,"0"))})(x)]})})]})}},67694:e=>{e.exports={style:{fontFamily:"'Lexend', 'Lexend Fallback'",fontWeight:200,fontStyle:"normal"},className:"__className_9e6433"}},95767:(e,s,a)=>{Promise.resolve().then(a.bind(a,19349))}},e=>{e.O(0,[7725,3393,2601,9268,1410,2645,221,7440,7731,8441,5964,7358],()=>e(e.s=95767)),_N_E=e.O()}]);