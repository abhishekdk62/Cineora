(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4063],{802:(e,t,s)=>{"use strict";s.d(t,{vA:()=>i,H0:()=>r,wz:()=>n});let a={LIST:"/users/tickets",CANCEL:"/users/cancel/ticket",CANCEL_SINGLE:"/users/cancel/single/ticket"};var l=s(77567);let n=async(e,t,s)=>(await l.A.get(a.LIST,{params:{page:e,limit:t,type:s}})).data,r=async(e,t)=>(await l.A.delete(a.CANCEL,{params:{bookingId:e,amount:t}})).data,i=async(e,t)=>(console.log("calledddd"),(await l.A.post(a.CANCEL_SINGLE,{ticketIds:e,totalAmount:t})).data)},1243:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},4607:(e,t,s)=>{"use strict";s.d(t,{tu:()=>d,vt:()=>o,F7:()=>n,aE:()=>r,Qr:()=>i,cL:()=>c});let a={CREATE_GROUP:"/users/invite-groups",GET_GROUPS:"/users/invite-groups/available",MY_INVITES:"/users/invite-groups/my-invites",JOIN_INVITE:"/users/invite-groups/confirm-join",LEAVE_INVITE:e=>"/users/invite-groups/".concat(e,"/leave"),CANCEL_INVITE:e=>"/users/invite-groups/".concat(e,"/cancel")};var l=s(77567);let n=async e=>(await l.A.post(a.CREATE_GROUP,e)).data,r=async e=>{let t=new URLSearchParams;e&&(e.limit&&t.append("limit",e.limit.toString()),e.skip&&t.append("skip",e.skip.toString()),e.minRating&&t.append("minRating",e.minRating.toString()),e.showtimeId&&t.append("showtimeId",e.showtimeId),e.status&&t.append("status",e.status));let s="".concat(a.GET_GROUPS).concat(t.toString()?"?".concat(t.toString()):"");return(await l.A.get(s)).data},i=async e=>{let t=new URLSearchParams;e&&(e.limit&&t.append("limit",e.limit.toString()),e.skip&&t.append("skip",e.skip.toString()),e.status&&t.append("status",e.status));let s="".concat(a.MY_INVITES).concat(t.toString()?"?".concat(t.toString()):"");return(await l.A.get(s)).data},o=async e=>(await l.A.post(a.JOIN_INVITE,e)).data,c=async e=>(await l.A.post(a.LEAVE_INVITE(e),{})).data,d=async e=>(await l.A.delete(a.CANCEL_INVITE(e))).data},5196:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6877:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},12318:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},13060:(e,t,s)=>{"use strict";s.d(t,{y2:()=>r,dX:()=>p,RC:()=>h,u_:()=>u,EG:()=>i,VL:()=>x,ix:()=>o,QH:()=>c,n$:()=>d,gu:()=>m});let a={CREATE_ROOM:"/users/rooms",GET_ROOM_BY_INVITE:e=>"/users/rooms/invite/".concat(e),GET_USER_ROOMS:"/users/rooms/user",JOIN_ROOM:"/users/rooms/join",LEAVE_ROOM:"/users/rooms/leave"},l={SEND_MESSAGE:"/users/messages",GET_MESSAGES:e=>"/users/messages/".concat(e),EDIT_MESSAGE:e=>"/users/messages/".concat(e),DELETE_MESSAGE:e=>"/users/messages/".concat(e),CREATE_SYSTEM_MESSAGE:"/users/messages/system"};var n=s(77567);let r=async e=>n.A.post(a.CREATE_ROOM,e),i=async e=>(await n.A.get(a.GET_ROOM_BY_INVITE(e))).data,o=async()=>(await n.A.get(a.GET_USER_ROOMS)).data,c=async e=>n.A.post(a.JOIN_ROOM,e),d=async e=>n.A.post(a.LEAVE_ROOM,e),m=async e=>n.A.post(l.SEND_MESSAGE,e),x=async e=>{let{chatRoomId:t,page:s,limit:a,before:r}=e;return(await n.A.get(l.GET_MESSAGES(t),{params:{page:s,limit:a,before:r}})).data},u=async e=>(await n.A.patch(l.EDIT_MESSAGE(e.messageId),{content:e.content})).data,h=async e=>(await n.A.delete(l.DELETE_MESSAGE(e.messageId))).data,p=async e=>n.A.post(l.CREATE_SYSTEM_MESSAGE,e)},17951:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},21153:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eC});var a=s(95155),l=s(47440),n=s(44326),r=s(12115),i=s(63081),o=s(17951),c=s(47924),d=s(14186),m=s(17580),x=s(4607),u=s(13568),h=s(38564),p=s(4516),g=s(69074),v=s(12318),f=s(1243);let b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,[s,a]=(0,r.useState)(""),[l,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(100);return(0,r.useEffect)(()=>{let s=()=>{let s=new Date(e).getTime(),l=s+60*t*6e4,r=new Date().getTime(),i=l-r;if(i<=0){a("Expired"),n(!0),o(0);return}let c=Math.floor(i/36e5),d=Math.floor(i%36e5/6e4),m=Math.floor(i%6e4/1e3);c>0?a("".concat(c,"h ").concat(d,"m ").concat(m,"s")):d>0?a("".concat(d,"m ").concat(m,"s")):a("".concat(m,"s"));let x=60*t*6e4;o(Math.max(0,Math.min(100,(x-(r-s))/x*100))),n(!1)};s();let l=setInterval(s,1e3);return()=>clearInterval(l)},[e,t]),{timeLeft:s,isExpired:l,progress:i}},y={className:"font-medium"},N={className:"font-normal text-sm"},j=e=>{let{createdAt:t,durationHours:s=3,showProgress:l=!0,size:n="medium",onExpiry:i}=e,{timeLeft:o,isExpired:c,progress:m}=b(t,s);(0,r.useEffect)(()=>{c&&i&&i()},[c,i]);let x=()=>c||m<25?"text-red-400":m<50?"text-yellow-400":"text-green-400",u=(()=>{switch(n){case"small":return{container:"px-2 py-1",icon:"w-3 h-3",text:"text-xs",progress:"h-1"};case"large":return{container:"px-4 py-3",icon:"w-5 h-5",text:"text-base",progress:"h-2"};default:return{container:"px-3 py-2",icon:"w-4 h-4",text:"text-sm",progress:"h-1.5"}}})();return(0,a.jsx)("div",{className:"".concat(u.container," bg-black/20 backdrop-blur-sm rounded-lg border border-white/10"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[c?(0,a.jsx)(f.A,{className:"".concat(u.icon," text-red-400")}):(0,a.jsx)(d.A,{className:"".concat(u.icon," ").concat(x())}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"".concat(y.className," ").concat(u.text," ").concat(x()),children:c?"Expired":o}),!c&&"small"!==n&&(0,a.jsx)("span",{className:"".concat(N.className," text-xs text-gray-400"),children:"remaining"})]}),l&&!c&&(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full ".concat(u.progress),children:(0,a.jsx)("div",{className:"".concat(u.progress," rounded-full transition-all duration-1000 ").concat(m<25?"bg-red-500":m<50?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(m,"%")}})})})]})]})})},w=e=>{let t=A(e);if(0===t.length&&0===t.length)return{nextSeatIndex:-1,nextSeat:null,actualPriceForJoiner:0,priceBreakdown:{originalPrice:0,discountAmount:0,discountedPrice:0,convenienceFee:0,tax:0,finalAmount:0}};let s=t[0],a=e.requestedSeats.findIndex(e=>e.seatNumber===s.seatNumber),l=s.price,n=0,r=l;e.couponUsed&&(n=Math.round(l*e.couponUsed.discountPercentage/100),r=l-n);let i=Math.round(5*l/100),o=Math.round(18*l/100),c=r+i+o;return{nextSeatIndex:a,nextSeat:s,actualPriceForJoiner:c,priceBreakdown:{originalPrice:l,discountAmount:n,discountedPrice:r,convenienceFee:i,tax:o,finalAmount:c}}},S=e=>e.participants.map(e=>e.seatAssigned),A=e=>{let t=S(e);return e.requestedSeats.filter(e=>!t.includes(e.seatNumber))};var k=s(54416),I=s(61432);let E={className:"font-bold"},_={className:"font-medium"},T=e=>{var t,s,l,n,r,i,c,m;let x,{isOpen:u,onClose:h,invite:v,onConfirmJoin:f}=e;if(!u||!v)return null;try{x=w(v)}catch(e){return console.error("Error calculating seat price:",e),null}let b=S(v),y=v.totalSlotsRequested-v.availableSlots;return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:h}),(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-white/20 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-gray-900/95 backdrop-blur-sm border-b border-white/10 p-4 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"".concat(E.className," text-xl text-white"),children:"Join Group"}),(0,a.jsx)("button",{onClick:h,className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:(0,a.jsx)(k.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsx)("img",{src:(null==(t=v.movieId)?void 0:t.poster)||"https://via.placeholder.com/300x400/1f2937/ffffff?text=No+Poster",alt:null==(s=v.movieId)?void 0:s.title,className:"w-16 h-24 object-cover rounded-lg",onError:e=>{e.currentTarget.src="https://via.placeholder.com/300x400/1f2937/ffffff?text=No+Poster"}}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"".concat(E.className," text-lg text-white mb-1 line-clamp-2"),children:null==(l=v.movieId)?void 0:l.title}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-300",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("span",{className:"truncate",children:null==(n=v.theaterId)?void 0:n.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.A,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("span",{children:null==(r=v.screenId)?void 0:r.name})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6 p-3 bg-white/5 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{children:new Date(v.showDate).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{children:v.showTime})]})]}),(0,a.jsx)("div",{className:"mb-6 p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm font-bold",children:(null==(c=v.hostUserId)||null==(i=c.username)?void 0:i.charAt(0).toUpperCase())||"H"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-purple-300 text-sm font-medium",children:["Hosted by ",(null==(m=v.hostUserId)?void 0:m.username)||"Anonymous"]}),(0,a.jsxs)("p",{className:"text-purple-400 text-xs",children:[y," of ",v.totalSlotsRequested," members joined"]})]})]})}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-blue-400 text-sm font-medium",children:"Your Seat Assignment"}),(0,a.jsx)("span",{className:"text-blue-300 text-xs bg-blue-500/20 px-2 py-1 rounded",children:x.nextSeat.seatType})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-yellow-400"}),(0,a.jsxs)("span",{className:"text-white font-bold",children:["Seat ",x.nextSeat.seatNumber]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:v.requestedSeats.map((e,t)=>{let s=b.includes(e.seatNumber),l=t===x.nextSeatIndex;return(0,a.jsxs)("div",{className:"px-2 py-1 rounded text-xs font-medium ".concat(s?"bg-gray-600 text-gray-400":l?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-blue-500/20 text-blue-400"),children:[e.seatNumber,l&&" (You)",s&&" (Taken)"]},e._id)})})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"".concat(_.className," text-green-400"),children:"Payment Summary"}),v.couponUsed&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded border border-orange-500/30",children:v.couponUsed.couponCode}),(0,a.jsxs)("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded",children:[v.couponUsed.discountPercentage,"% OFF"]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-300",children:["Seat ",x.nextSeat.seatNumber," (",x.nextSeat.seatType,")"]}),(0,a.jsxs)("span",{className:"text-white font-medium",children:["₹",x.priceBreakdown.originalPrice]})]}),v.couponUsed&&(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-green-400",children:["Discount (",v.couponUsed.discountPercentage,"%)"]}),(0,a.jsx)("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded",children:v.couponUsed.couponName})]}),(0,a.jsxs)("span",{className:"text-green-400 font-medium",children:["-₹",x.priceBreakdown.discountAmount]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Subtotal"}),(0,a.jsxs)("span",{className:"text-white",children:["₹",x.priceBreakdown.discountedPrice]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Convenience Fee (5%)"}),(0,a.jsxs)("span",{className:"text-gray-300",children:["₹",x.priceBreakdown.convenienceFee]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Tax (18%)"}),(0,a.jsxs)("span",{className:"text-gray-300",children:["₹",x.priceBreakdown.tax]})]}),(0,a.jsx)("div",{className:"border-t border-green-500/20 my-3"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"".concat(_.className," text-white text-base"),children:"Total Amount"}),(0,a.jsxs)("span",{className:"".concat(E.className," text-green-400 text-lg"),children:["₹",x.actualPriceForJoiner]})]})]})]}),(0,a.jsx)("div",{className:"mb-6 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:(0,a.jsxs)("p",{className:"text-yellow-300 text-xs",children:[(0,a.jsx)("strong",{children:"Note:"})," Payment will be processed once you confirm. Make sure all details are correct before proceeding."]})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:h,className:"".concat(_.className," flex-1 py-3 px-4 rounded-xl border border-white/20 text-white bg-white/10 hover:bg-white/20 transition-colors"),children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{f(v.inviteId)},className:"".concat(_.className," flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl"),children:"Pay & Confirm Join"})]})]})]})]})};var C=s(34540),M=s(90688),R=s(35695),P=s(94622),D=s(7430),L=s(7170),U=s.n(L),F=s(10052),G=s.n(F),O=s(21579),z=s.n(O),q=s(33901),B=s.n(q),J=s(78499);let V=e=>{let{selectedMethod:t,onMethodSelect:s,walletBalance:l,totalAmount:n}=e;return(0,a.jsx)("div",{className:"space-y-3 mb-6",children:J.b.map(e=>{let r="wallet"===e.id,i=r&&null!==l&&l<n,o=!r||null!==l&&l>=n;return(0,a.jsxs)("label",{className:"flex items-center gap-4 p-4 rounded-xl border cursor-pointer transition-all duration-200 ".concat(t===e.id?"border-white/30 bg-white/10":i?"border-red-500/30 bg-red-500/5 opacity-60 cursor-not-allowed":"border-gray-600/30 bg-white/5 hover:border-gray-500/50"),children:[(0,a.jsx)("input",{type:"radio",name:"paymentMethod",value:e.id,checked:t===e.id,disabled:i,onChange:e=>{console.log(e.target.value),o&&s(e.target.value)},className:"hidden"}),(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all ".concat(t===e.id?"border-white bg-white":i?"border-red-500":"border-gray-500"),children:t===e.id&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-black"})}),(0,a.jsx)("div",{className:"p-3 rounded-lg border ".concat(i?"bg-red-500/10 border-red-600/20":"bg-white/10 border-gray-600/20"),children:(0,a.jsx)(e.icon,{className:"w-5 h-5 ".concat(i?"text-red-400":"text-white")})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"".concat(B().className," ").concat(i?"text-red-400":"text-white"),children:e.name}),e.popular&&!i&&(0,a.jsx)("span",{className:"".concat(z().className," px-3 py-1 bg-white/20 text-white text-xs rounded-full border border-gray-500/30"),children:"Popular"})]}),(0,a.jsx)("p",{className:"".concat(z().className," text-sm mb-1 ").concat(i?"text-red-400":"text-gray-400"),children:e.description}),r&&null!==l&&(0,a.jsx)("div",{className:"mb-1",children:(0,a.jsxs)("span",{className:"".concat(z().className," text-xs ").concat(i?"text-red-400":"text-green-400"),children:["Wallet Balance: ₹",null==l?void 0:l.toFixed(2)]})}),i&&(0,a.jsx)("div",{className:"mb-1",children:(0,a.jsx)("span",{className:"".concat(z().className," text-red-400 text-xs font-medium"),children:"Insufficient wallet balance"})}),e.offers&&!i&&(0,a.jsx)("span",{className:"".concat(z().className," text-gray-300 text-xs"),children:e.offers})]})]},e.id)})})};var H=s(65576),Y=s.n(H);let X=e=>{let{totalAmount:t,selectedMethod:s,walletBalance:l,isProcessing:n,onPayment:r,isRazorpayLoaded:i=!0}=e,o=!s||"upi"==s||null!==l&&"wallet"==s&&Number(t)>l||n||"razorpay"===s&&!i;return(0,a.jsx)("button",{onClick:r,disabled:o,className:"".concat(Y().className," w-full py-4 rounded-xl text-lg transition-all duration-300 ").concat(o?"bg-gray-600 text-gray-400 cursor-not-allowed border border-gray-600/30":"bg-white text-black hover:bg-gradient-to-tr hover:from-violet-300 border hover:to-yellow-100 font-medium py-4 rounded-xl transition-all duration-200 transform hover:scale-[1.02]"),children:n?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Processing Payment..."]}):"razorpay"!==s||i?"Pay ₹".concat(t):(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400/30 border-t-gray-400 rounded-full animate-spin"}),"Loading Razorpay..."]})})},Q=e=>{let{selectedPaymentMethod:t,onSelectPaymentMethod:s,isProcessing:l,walletBalance:n,setIsProcessing:r,handlePayment:i,onClose:o,totalAmount:c,isRazorpayLoaded:d=!0}=e;return(0,a.jsx)("div",{className:"w-full max-w-lg bg-black/90 rounded-2xl border border-gray-500/30 shadow-2xl",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"".concat(U().className," text-white text-xl mb-1"),children:"Choose Payment Method"}),(0,a.jsx)("p",{className:"".concat(G().className," text-gray-400 text-sm"),children:"Select your preferred payment option"})]}),(0,a.jsx)("button",{onClick:o,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:(0,a.jsx)(k.A,{className:"w-5 h-5 text-gray-400"})})]}),!d&&(0,a.jsx)("div",{className:"".concat(G().className," text-center text-gray-400 mb-4 p-3 bg-white/5 rounded-lg border border-gray-600/30"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400/30 border-t-gray-400 rounded-full animate-spin"}),"Loading payment options..."]})}),(0,a.jsx)(V,{totalAmount:c,walletBalance:n,selectedMethod:t,onMethodSelect:s}),(0,a.jsx)("div",{className:"pt-6 border-t border-gray-600/30",children:(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl border border-gray-500/20 mb-6",children:[(0,a.jsx)("span",{className:"".concat(U().className," text-white text-xl"),children:"TOTAL AMOUNT"}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("span",{className:"".concat(U().className," text-white text-2xl"),children:["₹",c]})})]})}),(0,a.jsx)(X,{totalAmount:c,walletBalance:n,selectedMethod:t,isProcessing:l,onPayment:i,isRazorpayLoaded:d}),(0,a.jsx)("p",{className:"".concat(G().className," text-gray-500 text-xs text-center mt-4"),children:"Your payment is secured with 256-bit SSL encryption"})]})})};var W=s(6743),Z=s(13060);let K=e=>{let{totalAmount:t,onClose:s,inviteId:l}=e,n=(0,R.useRouter)(),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),v=(0,C.d4)(e=>e.booking.bookingData),f=(0,C.wA)();async function b(){try{let e=await (0,D.QI)();g(e.data.balance)}catch(e){console.log(e)}}(0,r.useEffect)(()=>{window.Razorpay?h(!0):new Promise(e=>{let t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>{h(!0),e(!0)},t.onerror=()=>e(!1),document.body.appendChild(t)})},[]),(0,r.useEffect)(()=>{b()},[]);let y=(0,C.d4)(e=>{var t,s;return null==e||null==(s=e.auth)||null==(t=s.user)?void 0:t.id})||4545345,N=(0,C.d4)(e=>{var t,s;return null==e||null==(s=e.auth)||null==(t=s.user)?void 0:t.email}),j=async()=>{if(!window.Razorpay||!m)return void alert("Razorpay SDK failed to load. Please try again.");d(!0);let e=!1;try{let s=(await (0,P.$)({amount:100*t,currency:"INR"})).data.id;if(!s)throw Error("Invalid order response - missing order ID");let a=new window.Razorpay({key:"rzp_test_UfKgHw2DzvZjyn",amount:100*t,currency:"INR",name:"Movie Tickets",description:"Movie Ticket Booking",order_id:s,handler:async s=>{try{if(e=!0,console.log("Payment successful:",s),(await (0,P.G)({razorpay_payment_id:s.razorpay_payment_id,razorpay_order_id:s.razorpay_order_id,razorpay_signature:s.razorpay_signature,bookingData:null})).success){let e=await (0,M.E)({...v,isInvited:!0});console.log("Booking successful:",e.data);let s=await (0,x.vt)({inviteId:l,totalAmount:t,ticketId:e.data.tickets[0]._id}),a=await (0,Z.EG)(l);console.log("the sns for getchattoombyinviteid",a);let r=await (0,Z.QH)({inviteGroupId:a.data.inviteGroupId}),i=await (0,Z.dX)({chatRoomId:r.data.data._id,systemMessageType:"USER_JOINED",content:"User joined ",systemData:{userId:y,username:null==N?void 0:N.split("@")[0]}});console.log("checked",i),console.log("joined",r),u.Ay.success("Joined this invite group plaese open the chat box."),console.log(s),n.push("/booking/success")}else throw Error("Payment verification failed")}catch(e){console.error("Payment verification failed:",e),n.push("/booking/failed"),d(!1)}},prefill:{name:"Customer",email:"",contact:""},theme:{color:"#ffffff"},modal:{ondismiss:()=>{n.push("/booking/failed"),e||(console.log("Payment cancelled by user"),d(!1))}}});a.on("payment.failed",function(t){e=!0,console.error("Payment failed:",t.error),a.close(),t.error.description,t.error.code,n.push("/booking/failed"),d(!1)}),a.open()}catch(e){u.Ay.error("Payment Failed"),console.error("Payment initiation failed:",e),n.push("/booking/failed"),d(!1)}};async function w(){try{console.log("haha",l),d(!0),await (0,M.n)(t,"User");let e=await (0,M.E)({...v,isInvited:!0});await (0,x.vt)({inviteId:l,totalAmount:t,ticketId:e.data.tickets[0]._id});let s=await (0,Z.EG)(l);console.log("the sns for getchattoombyinviteid",s);let a=await (0,Z.QH)({inviteGroupId:s.data.inviteGroupId}),r=await (0,Z.dX)({chatRoomId:a.data.data._id,systemMessageType:"USER_JOINED",content:"User joined ",systemData:{userId:y,username:null==N?void 0:N.split("@")[0]}});console.log("checked",r),console.log("joined",a),u.Ay.success("Joined this invite group plaese open the chat box."),n.push("/booking/success")}catch(e){console.log(e),"Insufficient balance"==e.response.data.message?u.Ay.error(" Insufficient balance \uD83D\uDE35‍\uD83D\uDCAB"):n.push("/booking/failed")}finally{d(!1)}}let S=async()=>{"razorpay"===i?await j():"wallet"==i&&w()};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:(0,a.jsx)(Q,{walletBalance:p,selectedPaymentMethod:i,onSelectPaymentMethod:e=>{o(e),f((0,W._Z)({paymentMethod:e}))},isProcessing:c,setIsProcessing:d,handlePayment:S,totalAmount:t,onClose:s,isRazorpayLoaded:m})})};var $=s(33991),ee=s(802);let et={className:"font-bold"},es={className:"font-medium"},ea={className:"font-normal text-sm"},el=e=>{var t,s,l,n,i,c,f,b,y,N,S,A,k,I,E,_;let M,{invite:R,onJoin:P,onRefresh:D}=e,[L,U]=(0,r.useState)(!1),[F,G]=(0,r.useState)(!1),[O,z]=(0,r.useState)(""),[q,B]=(0,r.useState)(R.participants),[J,V]=(0,r.useState)(R.availableSlots),[H,Y]=(0,r.useState)(!1),[X,Q]=(0,r.useState)(!1),el=(0,C.wA)(),en=(0,C.d4)(e=>e.auth.user),er="completed"===R.status||0===R.availableSlots,ei=X||new Date>new Date(R.expiresAt),eo=(0,C.d4)(e=>{var t,s;return null==e||null==(s=e.auth)||null==(t=s.user)?void 0:t.id}),ec=(0,C.d4)(e=>{var t,s;return null==e||null==(s=e.auth)||null==(t=s.user)?void 0:t.email}),ed=async()=>{if(ei)return void u.Ay.error("This group invite has expired!");try{if(!await (0,$.f)({title:"Exit from group Invite?",message:"Are you sure you want to exit from this group invite?",confirmText:"Confirm",cancelText:"Cancel"}))return;let e=await (0,x.cL)(R.inviteId);console.log("left the shit",e);let t=e.data.removedParticipant.amount,s=e.data.removedParticipant.ticketId;if(!s||!t){console.error(" Missing ticket data:",{ticketId:s,amount:t}),u.Ay.error("Missing ticket information");return}let a=await (0,ee.vA)([s],t),l=await (0,Z.EG)(R.inviteId);console.log("getChatRoomByInvite",l);let n=await (0,Z.n$)({chatRoomId:l.data.inviteGroupId,userId:eo});console.log(a),console.log(n);let r=await (0,Z.dX)({chatRoomId:l.data._id,systemMessageType:"USER_LEFT",content:"User Left ",systemData:{userId:eo,username:null==ec?void 0:ec.split("@")[0]}});console.log("checked",r),u.Ay.success("Exited from this group"),D()}catch(e){u.Ay.error("Something went wrong"),console.log(e)}};(0,r.useEffect)(()=>{V(R.availableSlots),Y("completed"===R.status||0===R.availableSlots),B(R.participants)},[R.availableSlots,R.status,R.participants]);let em=R.totalSlotsRequested-J,ex=Math.round(em/R.totalSlotsRequested*100),eu=q.filter(e=>"host"!==e.role).map(e=>e.seatAssigned);if(er||0===J)M={nextSeat:{seatNumber:0===J?"Full":"Completed",seatType:"N/A",seatRow:"N/A",price:0,_id:""},nextSeatIndex:-1,priceBreakdown:{originalPrice:0,discountedPrice:0,convenienceFee:0,tax:0,discountAmount:0,finalAmount:0},actualPriceForJoiner:0};else try{M=w(R)}catch(e){console.error("Error calculating seat price:",e),M={nextSeat:{seatNumber:"Unavailable",seatType:"Normal",seatRow:"N/A",price:0,_id:""},nextSeatIndex:-1,priceBreakdown:{originalPrice:0,discountedPrice:0,convenienceFee:0,tax:0,discountAmount:0,finalAmount:0},actualPriceForJoiner:0},Y(!0)}let eh=q.some(e=>e.userId===en.id||e.userId===en._id||e.userId===en.userId);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl overflow-hidden backdrop-blur-xl hover:scale-[1.02] transition-all duration-300",children:[(0,a.jsxs)("div",{className:"relative h-48 bg-gray-800",children:[(0,a.jsx)("img",{src:(null==(t=R.movieId)?void 0:t.poster)||"https://via.placeholder.com/300x400/1f2937/ffffff?text=No+Poster",alt:(null==(s=R.movieId)?void 0:s.title)||"Movie",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/300x400/1f2937/ffffff?text=No+Poster"}}),er||H?(0,a.jsx)("div",{className:"absolute top-3 right-3 bg-green-600 backdrop-blur-sm px-3 py-1 rounded-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"w-3 h-3 text-white"}),(0,a.jsx)("span",{className:"text-white text-xs font-medium",children:"Complete"})]})}):ei?(0,a.jsx)("div",{className:"absolute top-3 right-3 bg-red-600 backdrop-blur-sm px-3 py-1 rounded-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(d.A,{className:"w-3 h-3 text-white"}),(0,a.jsx)("span",{className:"text-white text-xs font-medium",children:"Expired"})]})}):(0,a.jsx)("div",{className:"absolute top-3 right-3 bg-black/70 backdrop-blur-sm px-3 py-1 rounded-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"w-3 h-3 text-green-400"}),(0,a.jsxs)("span",{className:"text-green-300 text-xs font-medium",children:[J," left"]})]})}),R.minRequiredRating&&(0,a.jsx)("div",{className:"absolute top-3 left-3 bg-yellow-500/20 backdrop-blur-sm px-2 py-1 rounded-full border border-yellow-500/30",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"w-3 h-3 text-yellow-400"}),(0,a.jsxs)("span",{className:"text-yellow-300 text-xs font-medium",children:[R.minRequiredRating,"+"]})]})}),er||H?(0,a.jsx)("div",{className:"absolute bottom-3 right-3 bg-green-600 backdrop-blur-sm px-3 py-1 rounded-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.A,{className:"w-3 h-3 text-white"}),(0,a.jsx)("span",{className:"text-white text-xs font-medium",children:"Completed"})]})}):ei?(0,a.jsx)("div",{className:"absolute bottom-3 right-3 bg-red-600 backdrop-blur-sm px-3 py-1 rounded-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.A,{className:"w-3 h-3 text-white"}),(0,a.jsx)("span",{className:"text-white text-xs font-medium",children:"Time Up"})]})}):(0,a.jsx)("div",{className:"absolute bottom-3 right-3 bg-purple-600 backdrop-blur-sm px-3 py-1 rounded-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.A,{className:"w-3 h-3 text-white"}),(0,a.jsxs)("span",{className:"text-white text-xs font-medium",children:["Next: ",null==M||null==(l=M.nextSeat)?void 0:l.seatNumber]})]})}),(H||er||ei)&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white px-4 py-2 rounded-lg font-medium ".concat(ei?"bg-red-600":"bg-green-600"),children:ei?"Invite Expired!":"Group Complete!"})})]}),(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"".concat(et.className," text-lg text-white mb-1 line-clamp-1"),children:(null==(n=R.movieId)?void 0:n.title)||"Unknown Movie"}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-300 mb-2",children:[(0,a.jsx)(p.A,{className:"w-3 h-3"}),(0,a.jsx)("p",{className:"".concat(ea.className," text-sm line-clamp-1"),children:(null==(i=R.theaterId)?void 0:i.name)||"Unknown Theater"}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)("p",{onClick:()=>{var e,t,s,a;let l="https://www.google.com/maps?q=".concat(null==(t=R.theaterId)||null==(e=t.location)?void 0:e.coordinates[1],",").concat(null==(a=R.theaterId)||null==(s=a.location)?void 0:s.coordinates[0]);window.open(l,"_blank")},className:"text-blue-400 hover:text-blue-300 underline text-xs transition-colors cursor-pointer",children:"View on Google Maps"})})]}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(j,{createdAt:R.createdAt,size:"small",showProgress:!1,onExpiry:()=>Q(!0)})}),(0,a.jsx)("p",{className:"".concat(ea.className," text-gray-400 text-xs"),children:(null==(c=R.screenId)?void 0:c.name)||"Screen"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-300",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{children:new Date(R.showDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-300",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{children:R.showTime})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"Group Status"}),(0,a.jsxs)("span",{className:"text-white text-xs",children:[em,"/",R.totalSlotsRequested]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"h-1.5 rounded-full transition-all duration-500 ".concat(ex>=100||ex>=75?"bg-green-500":ex>=50?"bg-yellow-500":"bg-blue-500"),style:{width:"".concat(Math.max(10,ex),"%")}})}),(0,a.jsx)("div",{className:"text-center mt-1",children:(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:[ex,"% filled"]})})]}),(0,a.jsx)("div",{className:"mb-4 p-2 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs font-bold",children:(null==(b=R.hostUserId)||null==(f=b.username)?void 0:f.charAt(0).toUpperCase())||"H"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-purple-300 text-xs font-medium",children:["Hosted by ",(null==(y=R.hostUserId)?void 0:y.username)||"Anonymous"]})})]})}),!er&&!ei&&!H&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-white/5 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"Seat Assignment"}),(0,a.jsx)("span",{className:"text-blue-400 text-xs",children:null==M||null==(N=M.nextSeat)?void 0:N.seatType})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:R.requestedSeats.map((e,t)=>{let s=eu.includes(e.seatNumber),l=t===(null==M?void 0:M.nextSeatIndex);return(0,a.jsxs)("div",{className:"px-2 py-1 rounded text-xs font-medium ".concat(s?"bg-gray-600 text-gray-400":l?"bg-gradient-to-r from-purple-600 to-pink-600 text-white animate-pulse":"bg-blue-500/20 text-blue-400"),children:[e.seatNumber,!eh&&l&&" (You)",s&&" (Taken)"]},e._id)})})]}),!er&&!ei&&!eh&&!H&&(0,a.jsxs)("div",{className:"mb-5 p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-green-400 text-xs font-medium",children:"Your Price"}),R.couponUsed&&(0,a.jsxs)("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded",children:[R.couponUsed.discountPercentage,"% OFF"]})]}),(0,a.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,a.jsxs)("div",{className:"flex justify-between text-gray-300",children:[(0,a.jsxs)("span",{children:["Seat ",null==M||null==(S=M.nextSeat)?void 0:S.seatNumber," (",null==M||null==(A=M.nextSeat)?void 0:A.seatType,")"]}),(0,a.jsxs)("span",{children:["₹",null==M||null==(k=M.priceBreakdown)?void 0:k.originalPrice]})]}),R.couponUsed&&(0,a.jsxs)("div",{className:"flex justify-between text-green-400",children:[(0,a.jsxs)("span",{children:["Discount (",R.couponUsed.discountPercentage,"%)"]}),(0,a.jsxs)("span",{children:["-₹",null==M||null==(I=M.priceBreakdown)?void 0:I.discountAmount]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-400",children:[(0,a.jsx)("span",{children:"Convenience Fee (5%)"}),(0,a.jsxs)("span",{children:["₹",null==M||null==(E=M.priceBreakdown)?void 0:E.convenienceFee]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-400",children:[(0,a.jsx)("span",{children:"Tax (18%)"}),(0,a.jsxs)("span",{children:["₹",null==M||null==(_=M.priceBreakdown)?void 0:_.tax]})]}),(0,a.jsx)("div",{className:"border-t border-green-500/20 pt-1 mt-2",children:(0,a.jsxs)("div",{className:"flex justify-between text-green-300 font-bold",children:[(0,a.jsx)("span",{children:"Total Amount"}),(0,a.jsxs)("span",{children:["₹",null==M?void 0:M.actualPriceForJoiner]})]})})]})]}),(er||ei||H)&&(0,a.jsx)("div",{className:"mb-5 p-3 bg-gray-500/10 border border-gray-500/20 rounded-lg",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:ei?"This group invite has expired":"This group booking has been completed"})})}),(0,a.jsx)("div",{className:"w-full",children:eh?(0,a.jsxs)("button",{onClick:ed,disabled:ei,className:"".concat(es.className," w-full py-3 rounded-xl transition-all duration-300 flex items-center justify-center gap-2 font-medium ").concat(ei?"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-400 cursor-not-allowed border border-gray-600/30 shadow-md":"bg-gradient-to-r from-red-400 to-red-500 text-white hover:from-red-600 hover:to-red-700 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] border border-red-500/20"),children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),ei?"EXPIRED":"EXIT GROUP"]}):(0,a.jsxs)("button",{onClick:()=>{var e,t,s,a,l;if(er)return void u.Ay.error("This group is already complete!");if(ei)return void u.Ay.error("This group invite has expired!");let n={userId:(null==en?void 0:en.id)||(null==en?void 0:en.userId)||(null==en?void 0:en._id),movieId:R.movieId._id,theaterId:R.theaterId._id,screenId:R.screenId._id,showtimeId:R.showtimeId,appliedCoupon:R.couponUsed?{_id:R.couponUsed._id,discountPercentage:R.couponUsed.discountPercentage,name:R.couponUsed.couponName,uniqueId:R.couponUsed.couponCode}:void 0,paymentStatus:"pending",bookingStatus:"pending",selectedSeats:[M.nextSeat.seatNumber],selectedSeatIds:[],seatPricing:[{rowId:null==M||null==(e=M.nextSeat)?void 0:e._id,seatType:null==M||null==(t=M.nextSeat)?void 0:t.seatType,basePrice:null==M||null==(s=M.priceBreakdown)?void 0:s.originalPrice,finalPrice:null==M||null==(a=M.priceBreakdown)?void 0:a.discountedPrice,rowLabel:null==M||null==(l=M.nextSeat)?void 0:l.seatRow}],priceDetails:{subtotal:M.priceBreakdown.discountedPrice,convenienceFee:M.priceBreakdown.convenienceFee,taxes:M.priceBreakdown.tax,discount:R.couponUsed?M.priceBreakdown.discountAmount:0,total:M.priceBreakdown.finalAmount},totalAmount:M.priceBreakdown.finalAmount,amount:M.priceBreakdown.finalAmount,showDate:R.showDate,showTime:R.showTime,contactInfo:{email:(null==en?void 0:en.email)||""},paymentMethod:"",movieTitle:R.movieId.title,theaterName:R.theaterId.name};el((0,W._Z)(n)),U(!0)},disabled:0===J||H||er||ei,className:"".concat(es.className," w-full py-3 rounded-xl transition-all duration-300 flex items-center justify-center gap-2 font-medium transform hover:scale-[1.02] active:scale-[0.98] ").concat(0===J||H||er||ei?"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-400 cursor-not-allowed border border-gray-600/30 shadow-md":"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl border border-purple-500/20"),children:[(0,a.jsx)(v.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"font-semibold",children:ei?"EXPIRED":er||H?"Group Complete":0===J?"Group Full":"Join for ₹".concat(M.actualPriceForJoiner)})]})})]})]}),!er&&!ei&&!H&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T,{isOpen:L,onClose:()=>U(!1),invite:R,onConfirmJoin:e=>{U(!1),z(e),G(!0)}}),F&&(0,a.jsx)(K,{totalAmount:null==M?void 0:M.actualPriceForJoiner,onClose:()=>{U(!1),G(!1)},inviteId:O})]})]})},en=e=>{let{invites:t,onJoin:s,onRefresh:l}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsx)(el,{invite:e,onJoin:s,onRefresh:l},e._id))})};var er=s(6877),ei=s(62525),eo=s(66516),ec=s(92657);let ed={className:"font-bold"},em={className:"font-medium"},ex={className:"font-normal text-sm"},eu=e=>{var t,s,l,n,i,c,x;let{invite:u,onCopyLink:p,onRefresh:v,handleCancel:f}=e,[b,y]=(0,r.useState)(u.availableSlots),[N,w]=(0,r.useState)(u.status),[S,A]=(0,r.useState)((null==(t=u.participants)?void 0:t.length)||0);(0,r.useEffect)(()=>{var e;y(u.availableSlots),w(u.status),A((null==(e=u.participants)?void 0:e.length)||0)},[u.availableSlots,u.status,u.participants,u.inviteId]);let k=u.totalSlotsRequested-b,E=Math.round(k/u.totalSlotsRequested*100),_=Math.round(u.totalAmount/u.totalSlotsRequested),T="cancelled"===N,C="completed"===N;return(0,a.jsx)("div",{className:"bg-gradient-to-br border rounded-2xl p-6 backdrop-blur-xl transition-all duration-300 ".concat(T?"from-gray-800/50 via-gray-900/30 to-gray-800/20 border-gray-600/30 opacity-75":C?"from-green-800/50 via-green-900/30 to-green-800/20 border-green-600/30":"from-white/10 via-white/5 to-transparent border-white/10"),children:(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 relative",children:[(0,a.jsx)("img",{src:(null==(s=u.movieId)?void 0:s.poster)||"https://via.placeholder.com/300x400/1f2937/ffffff?text=No+Poster",alt:(null==(l=u.movieId)?void 0:l.title)||"Movie",className:"w-24 h-36 object-cover rounded-xl transition-all duration-300 ".concat(T?"grayscale blur-sm":""),onError:e=>{e.currentTarget.src="https://via.placeholder.com/300x400/1f2937/ffffff?text=No+Poster"}}),T&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 rounded-xl flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(er.A,{className:"w-8 h-8 text-red-400 mx-auto mb-1"}),(0,a.jsx)("span",{className:"text-red-300 text-xs font-medium",children:"CANCELLED"})]})}),C&&!T&&(0,a.jsx)("div",{className:"absolute inset-0 bg-green-600/60 rounded-xl flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(I.A,{className:"w-8 h-8 text-white mx-auto mb-1"}),(0,a.jsx)("span",{className:"text-white text-xs font-medium",children:"COMPLETE"})]})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h3",{className:"".concat(ed.className," text-xl ").concat(T?"text-gray-400 line-through":"text-white"),children:(null==(n=u.movieId)?void 0:n.title)||"Unknown Movie"}),T?(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-red-500/20 border border-red-500/30 rounded-lg",children:[(0,a.jsx)(er.A,{className:"w-3 h-3 text-red-400"}),(0,a.jsx)("span",{className:"text-red-300 text-xs font-medium",children:"Cancelled"})]}):C?(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/20 border border-green-500/30 rounded-lg",children:[(0,a.jsx)(I.A,{className:"w-3 h-3 text-green-400"}),(0,a.jsx)("span",{className:"text-green-300 text-xs font-medium",children:"Completed"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-500/20 border border-purple-500/30 rounded-lg",children:[(0,a.jsx)(o.A,{className:"w-3 h-3 text-purple-400"}),(0,a.jsx)("span",{className:"text-purple-300 text-xs font-medium",children:"Host"})]})]}),(0,a.jsxs)("p",{className:"".concat(ex.className," mb-2 ").concat(T?"text-gray-500":"text-gray-300"),children:[(null==(i=u.theaterId)?void 0:i.name)||"Unknown Theater"," - ",(null==(c=u.screenId)?void 0:c.name)||"Screen"]})]}),(0,a.jsx)("div",{className:"ml-4",children:T?(0,a.jsx)("div",{className:"px-3 py-2 bg-red-500/10 border border-red-500/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(er.A,{className:"w-4 h-4 text-red-400"}),(0,a.jsx)("span",{className:"text-red-300 text-sm font-medium",children:"Cancelled"})]})}):C?(0,a.jsx)("div",{className:"px-3 py-2 bg-green-500/10 border border-green-500/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"text-green-300 text-sm font-medium",children:"Complete"})]})}):(0,a.jsx)(j,{createdAt:u.createdAt,size:"medium",showProgress:!0})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 text-sm mb-4 ".concat(T?"text-gray-500":"text-gray-400"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),new Date(u.showDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),u.showTime]}),u.minRequiredRating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 ".concat(T?"text-gray-500":"text-yellow-400")}),u.minRequiredRating,"+ Rating"]})]}),!T&&!C&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"".concat(em.className," text-white text-sm"),children:"Group Progress"}),(0,a.jsxs)("span",{className:"".concat(ex.className," text-gray-300"),children:[k,"/",u.totalSlotsRequested," joined (",E,"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat(E>=100?"bg-green-500":E>=50?"bg-yellow-500":"bg-blue-500"),style:{width:"".concat(Math.max(5,E),"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-yellow-300 mt-1",children:["DEBUG: Available=",b,", Joined=",k,", Progress=",E,"%"]})]}),T&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(er.A,{className:"w-4 h-4 text-red-400"}),(0,a.jsx)("span",{className:"text-red-300 text-sm font-medium",children:"This group invite has been cancelled"})]})}),C&&!T&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"text-green-300 text-sm font-medium",children:"Group booking is complete! All participants have joined."})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"rounded-lg p-3 ".concat(T?"bg-gray-800/30":"bg-white/5"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(I.A,{className:"w-4 h-4 ".concat(T?"text-gray-500":"text-blue-400")}),(0,a.jsx)("span",{className:"text-xs ".concat(T?"text-gray-500":"text-gray-400"),children:"Seats"})]}),(0,a.jsx)("p",{className:"text-sm font-medium ".concat(T?"text-gray-500 line-through":"text-white"),children:(null==(x=u.requestedSeats)?void 0:x.map(e=>e.seatNumber).join(", "))||"N/A"})]}),(0,a.jsxs)("div",{className:"rounded-lg p-3 ".concat(T?"bg-gray-800/30":"bg-white/5"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 ".concat(T?"text-gray-500":"text-purple-400")}),(0,a.jsx)("span",{className:"text-xs ".concat(T?"text-gray-500":"text-gray-400"),children:"Available"})]}),(0,a.jsx)("p",{className:"text-sm font-medium ".concat(T?"text-gray-500":"text-white"),children:T?"N/A":C?"Complete":"".concat(b," seats left")})]}),(0,a.jsxs)("div",{className:"rounded-lg p-3 ".concat(T?"bg-gray-800/30":"bg-white/5"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 ".concat(T?"text-gray-500":"text-yellow-400")}),(0,a.jsx)("span",{className:"text-xs ".concat(T?"text-gray-500":"text-gray-400"),children:"Price/Person"})]}),(0,a.jsx)("div",{children:T?(0,a.jsxs)("span",{className:"text-gray-500 text-sm font-medium line-through",children:["₹",_]}):u.couponUsed?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-green-400 text-sm font-medium",children:["₹",_]}),(0,a.jsxs)("span",{className:"text-xs bg-green-500/20 text-green-400 px-1 py-0.5 rounded",children:[u.couponUsed.discountPercentage,"% OFF"]})]}):(0,a.jsxs)("span",{className:"text-white text-sm font-medium",children:["₹",_]})})]})]}),(0,a.jsx)("div",{className:"flex gap-3",children:T||C?(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{disabled:!0,className:"".concat(em.className," flex items-center gap-2 px-4 py-2 bg-gray-600 text-gray-400 rounded-lg cursor-not-allowed text-sm"),children:[(0,a.jsx)(eo.A,{className:"w-4 h-4"}),"Share Invite"]}),(0,a.jsxs)("button",{className:"".concat(em.className," flex items-center gap-2 px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors text-sm"),children:[(0,a.jsx)(ec.A,{className:"w-4 h-4"}),"View Details"]})]}):(0,a.jsx)(a.Fragment,{children:b===u.totalSlotsRequested-1&&(0,a.jsxs)("button",{onClick:()=>f(u.inviteId),className:"".concat(em.className," flex items-center gap-2 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors text-sm"),children:[(0,a.jsx)(ei.A,{className:"w-4 h-4"}),"Cancel"]})})})]})]})})},eh=e=>{let{invites:t,onCopyLink:s,onRefresh:l,handleCancel:n}=e;return(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)(eu,{invite:e,onCopyLink:s,onRefresh:l,handleCancel:n},e._id))})};var ep=s(76049);let eg={className:"font-bold"},ev={className:"font-medium"},ef={className:"font-normal text-sm"},eb=()=>{let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[h,p]=(0,r.useState)("my-requests"),{socket:g,isConnected:v}=(0,ep.F)();(0,r.useEffect)(()=>{b()},[h]),(0,r.useEffect)(()=>{if(g&&v)return console.log("\uD83D\uDD17 Setting up global invite listeners..."),g.on("participant_joined",e=>{console.log("\uD83D\uDC65 Someone joined invite globally:",e.inviteId,"Available slots:",e.availableSlots),y(e.inviteId,{availableSlots:e.availableSlots})}),g.on("participant_left",e=>{console.log("\uD83D\uDC4B Someone left invite globally:",e.inviteId,"Available slots:",e.availableSlots),console.log("\uD83D\uDCBA Released seat:",e.releasedSeat,"Price:",e.releasedSeatPrice),console.log("\uD83D\uDD0D Full socket data on left:",e),y(e.inviteId,{availableSlots:e.availableSlots,releasedSeat:e.releasedSeat,releasedSeatPrice:e.releasedSeatPrice}),t(t=>t.map(t=>t.inviteId===e.inviteId?{...t,status:e.availableSlots>0?"pending":t.status}:t)),l(t=>t.map(t=>t.inviteId===e.inviteId?{...t,status:e.availableSlots>0?"pending":t.status}:t)),e.releasedSeat&&u.Ay.success("Seat ".concat(e.releasedSeat," is now available to join!"))}),g.on("group_completed",e=>{console.log("✅ Group completed globally:",e.inviteId),N(e.inviteId)}),g.on("invite_cancelled",e=>{console.log(" Invite cancelled globally:",e.inviteId),j(e.inviteId)}),()=>{console.log("\uD83E\uDDF9 Cleaning up global invite listeners..."),g.off("participant_joined"),g.off("participant_left"),g.off("group_completed"),g.off("invite_cancelled")}},[g,v,h]);let f=(0,C.d4)(e=>{var t,s;return null==e||null==(s=e.auth)||null==(t=s.user)?void 0:t.id}),b=async()=>{try{if(i(!0),"my-requests"===h){let e=await (0,x.Qr)({limit:50});t(e.data||[]),console.log("my invites",e.data)}else{let e=await (0,x.aE)({limit:50});l(e.data||[]),console.log("all invites",e.data)}}catch(e){console.error("Failed to fetch invites:",e),u.Ay.error("Failed to load group invites")}finally{i(!1)}},y=(e,s)=>{console.log("\uD83D\uDD04 Updating invite ".concat(e," with:"),s),l(t=>t.map(t=>t.inviteId===e?{...t,availableSlots:s.availableSlots,nextAvailableSeat:s.releasedSeat||t.nextAvailableSeat,nextSeatPrice:s.releasedSeatPrice||t.nextSeatPrice}:t)),t(t=>t.map(t=>t.inviteId===e?{...t,availableSlots:s.availableSlots,nextAvailableSeat:s.releasedSeat||t.nextAvailableSeat,nextSeatPrice:s.releasedSeatPrice||t.nextSeatPrice}:t))},N=e=>{l(t=>t.map(t=>t.inviteId===e?{...t,status:"completed",availableSlots:0}:t)),t(t=>t.map(t=>t.inviteId===e?{...t,status:"completed",availableSlots:0}:t))},j=e=>{l(t=>t.filter(t=>t.inviteId!==e)),t(t=>t.filter(t=>t.inviteId!==e))},w=async e=>{try{if(!await (0,$.f)({title:"Cancel Group Invite?",message:"Are you sure you want to cancel this group invite?",confirmText:"Confirm",cancelText:"Cancel"}))return;let t=await (0,x.tu)(e);console.log("gtrorororo",t);let s=t.data.participantDetails[0].ticketId,a=t.data.participantDetails[0].amount,l=await (0,ee.vA)([s],a);console.log(l);let n=await (0,Z.EG)(e);console.log("getChatRoomByInvite",n);let r=await (0,Z.n$)({chatRoomId:n.data.inviteGroupId,userId:f});console.log(l),console.log(r),b(),u.Ay.success("Cancelled successfully")}catch(e){console.log(e),u.Ay.error("Failed to cancel")}};if(n)return(0,a.jsx)("div",{className:"max-w-6xl mx-auto p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-pulse text-white",children:"Loading group invites..."})})});let S="my-requests"===h?e:s;return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"".concat(eg.className," text-3xl text-white mb-2"),children:"Group Invites"}),(0,a.jsx)("p",{className:"".concat(ef.className," text-gray-400"),children:"my-requests"===h?"Track your created group invites (expires in 3 hours)":"Find and join available group bookings"})]}),(0,a.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,a.jsxs)("button",{onClick:()=>p("my-requests"),className:"".concat(ev.className," px-6 py-3 rounded-xl transition-all duration-200 flex items-center gap-2 ").concat("my-requests"===h?"bg-purple-600 text-white":"bg-white/10 text-gray-400 hover:text-white"),children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),"My Requests (",e.length,")"]}),(0,a.jsxs)("button",{onClick:()=>p("browse-invites"),className:"".concat(ev.className," px-6 py-3 rounded-xl transition-all duration-200 flex items-center gap-2 ").concat("browse-invites"===h?"bg-purple-600 text-white":"bg-white/10 text-gray-400 hover:text-white"),children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),"Browse Invites (",s.length,")"]}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2 px-3 py-2 bg-orange-500/20 border border-orange-500/30 rounded-xl",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 text-orange-400"}),(0,a.jsx)("span",{className:"text-orange-300 text-sm",children:"Expires in 3hrs"})]})]}),0===S.length?(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)(m.A,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),(0,a.jsxs)("h3",{className:"".concat(ev.className," text-xl text-white mb-2"),children:["No ","my-requests"===h?"requests created":"invites available"]}),(0,a.jsx)("p",{className:"".concat(ef.className," text-gray-400"),children:"my-requests"===h?"Create a group invite from the seat selection page":"No group invites are currently available to join"})]}):"my-requests"===h?(0,a.jsx)(eh,{invites:S,onCopyLink:e=>{let t="".concat(window.location.origin,"/join-group/").concat(e);navigator.clipboard.writeText(t),u.Ay.success("Invite link copied! \uD83D\uDCCB")},onRefresh:b,handleCancel:w}):(0,a.jsx)(en,{invites:S,onJoin:e=>{window.location.href="/join-group/".concat(e)},onRefresh:b})]})};var ey=s(19946);let eN=(0,ey.A)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),ej=e=>{let{chatRooms:t,selectedChatId:s,onSelect:l}=e;return(0,a.jsxs)("div",{className:"w-1/3 bg-white/5 border-r border-white/10 flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b border-white/10",children:(0,a.jsx)("h3",{className:"font-medium text-white",children:"Active Groups"})}),(0,a.jsxs)("div",{className:"overflow-y-auto flex-1",children:[0===t.length&&(0,a.jsx)("p",{className:"text-gray-400 p-4",children:"No active chat groups found."}),t.map(e=>(0,a.jsx)("div",{onClick:()=>l(e.id),className:"p-4 border-b border-white/5 cursor-pointer ".concat(s===e.id?"bg-blue-500/20":"hover:bg-white/5"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(eN,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,a.jsx)("h4",{className:"font-medium text-white text-sm truncate",title:e.name,children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-400 truncate",title:e.movieTitle,children:e.movieTitle}),(0,a.jsx)("p",{className:"text-xs text-gray-300 mt-1 truncate",children:e.theaterName})]}),e.unreadCount>0&&(0,a.jsx)("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]})},e.id))]})]})},ew=(0,ey.A)("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var eS=s(5196),eA=s(44020),ek=s(56287);let eI=(0,ey.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),eE=e=>{let{chatRoom:t,messages:s,messageInput:l,onMessageChange:n,onSend:i,onEditMessage:o,onDeleteMessage:c,id:d}=e,[x,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(""),[g,f]=(0,r.useState)(null),b=(0,r.useRef)(null),y=(0,r.useRef)(null);if((0,r.useEffect)(()=>{(()=>{var e;null==(e=y.current)||e.scrollIntoView({behavior:"smooth"})})()},[s]),!t)return(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:"Select a chat room to start messaging"});let N=()=>{x&&h.trim()&&(o(x,h.trim()),u(null),p(""))},j=()=>{u(null),p("")};return(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-white/5 rounded-tr-2xl",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-white/10 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(eN,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-white truncate",children:t.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 flex items-center gap-1 truncate",children:[(0,a.jsx)(m.A,{className:"w-3 h-3"}),t.participantsCount," member",1!==t.participantsCount?"s":""]})]})]}),(0,a.jsxs)("div",{ref:b,className:"flex-1 p-4 overflow-y-auto space-y-3",children:[0===s.length?(0,a.jsx)("p",{className:"text-gray-400 text-center",children:"No messages yet. Say hi!"}):s.map(e=>{var t;let s=String(e.senderId)===String(d),l="SYSTEM"===e.messageType,n=x===e._id,r=(e=>{let t=new Date(e);return 5>=Math.floor((new Date().getTime()-t.getTime())/6e4)})(e.createdAt);return l?(0,a.jsx)("div",{className:"flex justify-center my-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-gray-700/50 text-gray-300 px-3 py-1 rounded-full text-xs",children:["USER_JOINED"===e.systemMessageType&&(0,a.jsx)(v.A,{className:"w-3 h-3"}),"USER_LEFT"===e.systemMessageType&&(0,a.jsx)(ew,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"italic",children:(e=>{var t;let s=(null==(t=e.systemData)?void 0:t.username)||"Someone";switch(e.systemMessageType){case"USER_JOINED":return"".concat(s," joined the chat");case"USER_LEFT":return"".concat(s," left the chat");case"BOOKING_UPDATE":return"".concat(s," updated the booking");default:return e.content||"".concat(s," performed an action")}})(e)}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e._id):(0,a.jsxs)("div",{className:"flex gap-3 ".concat(s?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-xs text-white",children:(null==(t=e.senderName[0])?void 0:t.toUpperCase())||"U"})}),(0,a.jsxs)("div",{className:"max-w-[70%] ".concat(s?"items-end":"items-start"," flex flex-col"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1 ".concat(s?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)("span",{className:"font-medium text-sm text-white",children:s?"You":e.senderName}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:[new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),e.updatedAt&&e.updatedAt!==e.createdAt&&(0,a.jsx)("span",{className:"ml-1 text-gray-500",children:"(edited)"})]})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"px-4 py-2 rounded-lg max-w-full break-words ".concat(e.isDeleted?"bg-gray-800 text-gray-500 italic":s?"bg-blue-600 text-white rounded-br-sm":"bg-gray-700 text-gray-200 rounded-bl-sm"),children:n?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value),className:"w-full bg-white/10 text-white px-2 py-1 rounded text-sm focus:outline-none",onKeyPress:e=>{"Enter"===e.key&&N(),"Escape"===e.key&&j()},autoFocus:!0}),(0,a.jsxs)("div",{className:"flex gap-1 justify-end",children:[(0,a.jsx)("button",{onClick:N,className:"p-1 bg-green-600 hover:bg-green-700 rounded",title:"Save",children:(0,a.jsx)(eS.A,{className:"w-3 h-3"})}),(0,a.jsx)("button",{onClick:j,className:"p-1 bg-gray-600 hover:bg-gray-700 rounded",title:"Cancel",children:(0,a.jsx)(k.A,{className:"w-3 h-3"})})]})]}):(0,a.jsx)("p",{className:"text-sm",children:e.content})}),s&&!e.isDeleted&&!n&&r&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>(e=>{f(g===e?null:e)})(e._id),className:"absolute -top-8 right-0 p-1 bg-gray-600 hover:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity",title:"Message options",children:(0,a.jsx)(eA.A,{className:"w-3 h-3 text-white"})}),g===e._id&&(0,a.jsxs)("div",{className:"absolute top-0 right-0 mt-2 bg-gray-800 rounded-lg shadow-lg border border-gray-700 z-10",children:[(0,a.jsxs)("button",{onClick:()=>{var t,s;return t=e._id,s=e.content,void(u(t),p(s),f(null))},className:"flex items-center gap-2 px-3 py-2 text-sm text-white hover:bg-gray-700 rounded-t-lg w-full text-left",children:[(0,a.jsx)(ek.A,{className:"w-3 h-3"}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>{c(e._id),f(null)},className:"flex items-center gap-2 px-3 py-2 text-sm text-red-400 hover:bg-gray-700 rounded-b-lg w-full text-left",children:[(0,a.jsx)(ei.A,{className:"w-3 h-3"}),"Delete"]})]})]})]})]})]},e._id)}),(0,a.jsx)("div",{ref:y})]}),(0,a.jsx)("div",{className:"p-4 border-t border-white/10",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:"Type a message...",className:"flex-1 bg-white/10 text-white placeholder-gray-400 px-4 py-2 rounded-lg focus:outline-none",onKeyPress:e=>"Enter"===e.key&&i()}),(0,a.jsx)("button",{onClick:i,className:"bg-blue-500 hover:bg-blue-600 p-2 rounded-lg transition-colors",children:(0,a.jsx)(eI,{className:"w-4 h-4 text-white"})})]})})]})},e_=()=>{let[e,t]=(0,r.useState)(""),[s,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(""),[o,c]=(0,r.useState)([]),d=(0,C.d4)(e=>{var t,s;return null==e||null==(s=e.auth)||null==(t=s.user)?void 0:t.id})||4545345,m=(0,C.d4)(e=>{var t,s;return null==e||null==(s=e.auth)||null==(t=s.user)?void 0:t.email}),{socket:x,isConnected:u,joinChatRoom:h,leaveChatRoom:p}=(0,ep.F)();(0,r.useEffect)(()=>{let t=t=>{let s=t.detail;if(s.chatRoomId===e&&s.senderId!==String(d)){let e={_id:s._id,chatRoomId:s.chatRoomId,content:s.content,createdAt:s.createdAt,updatedAt:s.updatedAt,isDeleted:s.isDeleted,messageType:s.messageType,senderId:s.senderId,senderName:s.senderName||"Unknown",systemData:s.systemData,systemMessageType:s.systemMessageType,replyToMessageId:s.replyToMessageId};c(t=>[...t,e])}},s=t=>{let{messageId:s,content:a,chatRoomId:l}=t.detail;l===e&&c(e=>e.map(e=>e._id===s?{...e,content:a,updatedAt:new Date().toISOString()}:e))},a=t=>{let{messageId:s,chatRoomId:a}=t.detail;a===e&&c(e=>e.map(e=>e._id===s?{...e,isDeleted:!0,content:"This message was deleted"}:e))};return window.addEventListener("newMessage",t),window.addEventListener("messageEdited",s),window.addEventListener("messageDeleted",a),()=>{window.removeEventListener("newMessage",t),window.removeEventListener("messageEdited",s),window.removeEventListener("messageDeleted",a)}},[e,d]),(0,r.useEffect)(()=>{if(e&&u)return h(e),()=>{p(e)}},[e,u]),(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,Z.ix)();if(e.success&&e.data){let s=e.data.map(e=>({id:e._id,name:e.roomName,movieTitle:e.movieInfo.title,theaterName:e.theaterInfo.name,participantsCount:e.participantCount,lastMessageTime:e.lastMessageAt,unreadCount:0}));l(s),s.length>0&&t(s[0].id)}else l([])}catch(e){l([])}})()},[]);let g=s.find(t=>t.id===e),v=async()=>{if(!e)return void c([]);try{let t=await (0,Z.VL)({chatRoomId:e});if(console.log("the messages are:",t),t.success&&t.data&&t.data.messages){let e=t.data.messages.map(e=>({_id:e._id,chatRoomId:e.chatRoomId,content:e.content,createdAt:e.createdAt,updatedAt:e.updatedAt,isDeleted:e.isDeleted,messageType:e.messageType,senderId:e.senderId,senderName:e.senderName||"Unknown",systemData:e.systemData,systemMessageType:e.systemMessageType,replyToMessageId:e.replyToMessageId})),s=e.filter(e=>"SYSTEM"===e.messageType);console.log("System messages found:",s),s.forEach(e=>{var t;console.log("System message: ".concat(e.systemMessageType,", username: ").concat(null==(t=e.systemData)?void 0:t.username))}),c(e)}else c([])}catch(e){console.log(e),c([])}};(0,r.useEffect)(()=>{v()},[e]);let f=async()=>{if(n.trim()&&e)try{let t={chatRoomId:e,content:n.trim(),messageType:"TEXT"};console.log("send data",t);let s=await (0,Z.gu)(t);console.log(s);let a={_id:"temp-".concat(Date.now()),chatRoomId:e,content:n.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDeleted:!1,messageType:"TEXT",senderId:String(d),senderName:null==m?void 0:m.split("@")[0]};c(e=>[...e,a]),i("")}catch(e){console.error("Failed to send message:",e)}},b=async(e,t)=>{try{let s=await (0,Z.u_)({messageId:e,content:t});console.log("Edit response:",s),s.success&&c(s=>s.map(s=>s._id===e?{...s,content:t,updatedAt:new Date().toISOString()}:s))}catch(e){console.error("Failed to edit message:",e)}},y=async e=>{try{let t=await (0,Z.RC)({messageId:e});console.log("Delete response:",t),t.success&&c(t=>t.map(t=>t._id===e?{...t,isDeleted:!0,content:"This message was deleted"}:t))}catch(e){console.error("Failed to delete message:",e)}};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"font-bold text-3xl text-white mb-2",children:"Group Chats"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Chat with your movie group members"})]}),(0,a.jsxs)("div",{className:"flex h-[500px] bg-white/5 rounded-2xl overflow-hidden",children:[(0,a.jsx)(ej,{chatRooms:s,selectedChatId:e,onSelect:t}),s.length?e?(0,a.jsx)(eE,{chatRoom:g,messages:o,messageInput:n,onMessageChange:i,onSend:()=>{n.trim()&&(f(),i(""))},onEditMessage:b,onDeleteMessage:y,id:d}):(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:"Select a chat group to start messaging."}):(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:"You have not joined any groups yet."})]})]})},eT={className:"font-medium"},eC=()=>{let[e,t]=(0,r.useState)("invites");return(0,a.jsx)(l.A,{allowedRoles:["user"],children:(0,a.jsxs)("div",{className:"relative min-h-screen bg-black",children:[(0,a.jsx)("div",{className:"fixed top-9 inset-0 z-0",children:(0,a.jsx)(i.A,{animationType:"rotate",timeScale:.5,height:3.5,baseWidth:4,scale:4,hueShift:.7,colorFrequency:1,noise:0,glow:.5})}),(0,a.jsx)("div",{className:"relative z-20",children:(0,a.jsx)(n.jq,{})}),(0,a.jsxs)("div",{className:"relative z-10 max-w-6xl mx-auto p-6",children:[(0,a.jsx)("div",{className:"mb-8 flex justify-center",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("button",{onClick:()=>t("invites"),className:"".concat(eT.className," px-6 py-3 rounded-xl transition-all duration-200 flex items-center gap-2 ").concat("invites"===e?"bg-purple-600 text-white":"bg-white/10 text-gray-400 hover:text-white"),children:[(0,a.jsx)(m.A,{className:"w-4 h-4"}),"Group Invites"]}),(0,a.jsxs)("button",{onClick:()=>t("chats"),className:"".concat(eT.className," px-6 py-3 rounded-xl transition-all duration-200 flex items-center gap-2 ").concat("chats"===e?"bg-blue-600 text-white":"bg-white/10 text-gray-400 hover:text-white"),children:[(0,a.jsx)(eN,{className:"w-4 h-4"}),"Group Chats",(0,a.jsx)("span",{className:"bg-green-500 text-white text-xs px-2 py-0.5 rounded-full",children:"3"})]})]})}),"invites"===e?(0,a.jsx)(eb,{}):(0,a.jsx)(e_,{})]})]})})}},21579:e=>{e.exports={style:{fontFamily:"'Lexend', 'Lexend Fallback'",fontWeight:200,fontStyle:"normal"},className:"__className_9e6433"}},33901:e=>{e.exports={style:{fontFamily:"'Lexend', 'Lexend Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_3f8a51"}},33991:(e,t,s)=>{"use strict";s.d(t,{ConfirmDialog:()=>N,f:()=>j});var a=s(95155),l=s(12115),n=s(67372),r=s(52596),i=s(39688);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,r.$)(t))}let c=(0,s(74466).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{...t}=e;return(0,a.jsx)(n.bL,{"data-slot":"alert-dialog",...t})}function m(e){let{...t}=e;return(0,a.jsx)(n.ZL,{"data-slot":"alert-dialog-portal",...t})}function x(e){let{className:t,...s}=e;return(0,a.jsx)(n.hJ,{"data-slot":"alert-dialog-overlay",className:o("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function u(e){let{className:t,...s}=e;return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{}),(0,a.jsx)(n.UC,{"data-slot":"alert-dialog-content",className:o("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function h(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:o("flex flex-col gap-2 text-center sm:text-left",t),...s})}function p(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:o("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function g(e){let{className:t,...s}=e;return(0,a.jsx)(n.hE,{"data-slot":"alert-dialog-title",className:o("text-lg font-semibold",t),...s})}function v(e){let{className:t,...s}=e;return(0,a.jsx)(n.VY,{"data-slot":"alert-dialog-description",className:o("text-muted-foreground text-sm",t),...s})}function f(e){let{className:t,...s}=e;return(0,a.jsx)(n.rc,{className:o(c(),t),...s})}function b(e){let{className:t,...s}=e;return(0,a.jsx)(n.ZD,{className:o(c({variant:"outline"}),t),...s})}let y=null;function N(e){let{title:t,message:s,confirmText:n="Confirm",cancelText:r="Cancel"}=e,[i,o]=(0,l.useState)(!1),[c,m]=(0,l.useState)({title:t,message:s,confirmText:n,cancelText:r});(0,l.useEffect)(()=>{window.__openConfirmDialog=e=>(m(e),o(!0),new Promise(e=>{y=e}))},[]);let x=e=>{o(!1),null==y||y(e),y=null};return(0,a.jsx)(d,{open:i,onOpenChange:o,children:(0,a.jsxs)(u,{className:"bg-slate-800 text-slate-50 dark:bg-slate-900 dark:text-slate-100 rounded-lg shadow-lg p-6 border border-slate-700",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{children:c.title}),(0,a.jsx)(v,{children:c.message})]}),(0,a.jsxs)(p,{className:"flex justify-end space-x-2",children:[(0,a.jsx)(b,{onClick:()=>x(!1),className:"px-4 py-2 bg-muted text-muted-foreground rounded hover:bg-muted/90",children:c.cancelText}),(0,a.jsx)(f,{onClick:()=>x(!0),className:"px-4 py-2 bg-destructive text-destructive-foreground rounded hover:bg-destructive/90",children:c.confirmText})]})]})})}function j(e){return window.__openConfirmDialog(e)}},44020:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},56287:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},62525:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},65576:e=>{e.exports={style:{fontFamily:"'Lexend', 'Lexend Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_3f8a51"}},66516:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},76049:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});var a=s(12115),l=s(14298);let n=null,r=()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(!n){let e="https://cineora.fun";console.log("\uD83D\uDD17 Creating socket connection to:",e),(n=(0,l.io)(e,{withCredentials:!0,transports:["polling","websocket"],timeout:2e4,forceNew:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:10})).on("connect",()=>{console.log("✅ Socket connected! ID:",null==n?void 0:n.id),t(!0)}),n.on("disconnect",e=>{console.log(" Socket disconnected. Reason:",e),t(!1)}),n.on("connect_error",e=>{t(!1)}),n.on("new-message",e=>{console.log("\uD83D\uDCE8 New message received:",e),window.dispatchEvent(new CustomEvent("newMessage",{detail:e}))}),n.on("message-edited",e=>{console.log("✏️ Message edited:",e),window.dispatchEvent(new CustomEvent("messageEdited",{detail:e}))}),n.on("message-deleted",e=>{console.log("\uD83D\uDDD1️ Message deleted:",e),window.dispatchEvent(new CustomEvent("messageDeleted",{detail:e}))}),n.onAny(function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a]}),n.on("participant_left",e=>{}),n.on("participant_joined",e=>{}),n.on("connect",()=>{null==n||n.emit("test-ping",{message:"Frontend connected"})}),n.on("test-pong",e=>{})}return n&&n.connected&&!e&&t(!0),()=>{}},[]),(0,a.useEffect)(()=>{let s=setInterval(()=>{if(n){let s=n.connected;s!==e&&t(s)}},5e3);return()=>clearInterval(s)},[e]),{socket:n,isConnected:e,joinChatRoom:e=>{console.log("\uD83D\uDD17 Joining chat room:",e),null==n||n.emit("join-showtime","chat-".concat(e))},leaveChatRoom:e=>{console.log("\uD83D\uDC4B Leaving chat room:",e),null==n||n.emit("leave-showtime","chat-".concat(e))}}}},97285:(e,t,s)=>{Promise.resolve().then(s.bind(s,21153))}},e=>{e.O(0,[4303,2601,730,2089,9268,1410,9772,5947,3568,1256,5356,7440,2686,8465,8441,5964,7358],()=>e(e.s=97285)),_N_E=e.O()}]);