(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5261],{6188:(e,s,t)=>{Promise.resolve().then(t.bind(t,85982))},12267:(e,s,t)=>{"use strict";t.d(s,{XQ:()=>i,xw:()=>d,uV:()=>x,Vh:()=>r,lA:()=>n,_O:()=>o,Dl:()=>m,QP:()=>c});let a={SEND_OTP:"/owners/send-otp",VERIFY_OTP:"/owners/verify-otp",SUBMIT_REQUEST:"/owners/submit-kyc",PROFILE:"/owner/profile",UPDATE_PROFILE:"/owner",RESET_PASSWORD:"/owner/reset-password",EMAIL_CHANGE_OTP_SEND:"/owner/email/change",EMAIL_CHANGE_OTP_VERIFY:"/owner/email/verify"};var l=t(77567);let r=async e=>(await l.A.post(a.SEND_OTP,{email:e})).data,c=async(e,s)=>(await l.A.post(a.VERIFY_OTP,{email:e,otp:s})).data,n=async e=>(await l.A.post(a.SUBMIT_REQUEST,e)).data,i=async()=>(await l.A.get(a.PROFILE)).data,o=async e=>(await l.A.put(a.UPDATE_PROFILE,e)).data,d=async e=>(await l.A.patch(a.RESET_PASSWORD,e)).data,x=async e=>(await l.A.post(a.EMAIL_CHANGE_OTP_SEND,e)).data,m=async e=>(await l.A.post(a.EMAIL_CHANGE_OTP_VERIFY,e)).data},82680:(e,s,t)=>{"use strict";t.d(s,{D1:()=>r,r8:()=>n,OC:()=>c});let a={CREATE:"/owner/create/staff",VERIFY_TICKET:"/staff/verify-ticket",GET_DETAILS:"/staff/details"};var l=t(77567);let r=async e=>(await l.A.post(a.CREATE,e)).data,c=async e=>(await l.A.post(a.VERIFY_TICKET,{data:e})).data,n=async()=>(await l.A.get(a.GET_DETAILS)).data.data},85982:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>rN});var a=t(95155),l=t(12115),r=t(18283),c=t.n(r),n=t(42533),i=t.n(n),o=t(42195),d=t.n(o),x=t(84616),m=t(48136),h=t(27265),u=t(47924),g=t(53844),b=t.n(g),p=t(69144),N=t.n(p),j=t(90232),y=t(85339),w=t(44020),v=t(92657),f=t(13717),k=t(71007),S=t(62525),A=t(4516),C=t(19420),D=t(69074),T=t(33991);let P=e=>{let{theater:s,onToggleStatus:t,onDelete:r,onEdit:c,onView:n,openAddStaffModal:i}=e,[o,d]=(0,l.useState)(!1),x=async()=>{if(!await (0,T.f)({title:"Delete theater",message:"Do you want to permanently delete this theater?",confirmText:"Delete",cancelText:"Cancel"}))return void d(!1);r(s._id),d(!1)};return(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-gray-400/50 transition-all duration-300 group",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(s.isActive?"bg-green-500/20":"bg-orange-500/20"),children:(0,a.jsx)(m.A,{className:"w-6 h-6 ".concat(s.isActive?"text-green-400":"text-orange-400")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"".concat(b().className," text-lg text-white"),children:s.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s.isActive?"bg-green-400":"bg-orange-400")}),(0,a.jsx)("span",{className:"".concat(N().className," text-xs ").concat(s.isActive?"text-green-400":"text-orange-400"),children:s.isActive?"Active":"Inactive"}),(0,a.jsxs)("span",{className:"".concat(N().className," text-xs flex gap-1 ").concat(s.isVerified?"text-green-400":"text-red-400"),children:[s.isVerified?(0,a.jsx)(j.A,{className:"w-3 h-3"}):(0,a.jsx)(y.A,{className:"w-3 h-3"}),s.isVerified?"Verified":"Not Verified"]})]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>d(!o),className:"p-2 hover:bg-white/10 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:(0,a.jsx)(w.A,{className:"w-5 h-5 text-gray-400"})}),o&&(0,a.jsx)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-xl shadow-2xl z-10",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)("button",{onClick:()=>{d(!1),n(s)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-white/10 rounded-lg transition-colors text-gray-300 hover:text-white",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{className:"".concat(N().className," text-sm"),children:"View Details"})]}),(0,a.jsxs)("button",{onClick:()=>{c(s),d(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-white/10 rounded-lg transition-colors text-gray-300 hover:text-white",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"".concat(N().className," text-sm"),children:"Edit Theater"})]}),(0,a.jsxs)("button",{onClick:()=>{t(s),d(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-white/10 rounded-lg transition-colors text-gray-300 hover:text-white",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 ".concat(s.isActive?"text-orange-400":"text-green-400")}),(0,a.jsx)("span",{className:"".concat(N().className," text-sm"),children:s.isActive?"Deactivate":"Activate"})]}),(0,a.jsxs)("button",{onClick:()=>i(s),className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-white/10 rounded-lg transition-colors text-gray-300 hover:text-white",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"".concat(N().className," text-sm"),children:"Add Staff"})]}),(0,a.jsx)("div",{className:"border-t border-gray-500/30 my-2"}),(0,a.jsxs)("button",{onClick:x,className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-red-500/20 rounded-lg transition-colors text-red-400 hover:text-red-300",children:[(0,a.jsx)(S.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"".concat(N().className," text-sm"),children:"Delete Theater"})]})]})})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2 mb-4",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(N().className," text-gray-300 text-sm"),children:s.address}),(0,a.jsxs)("p",{className:"".concat(N().className," text-gray-400 text-xs"),children:[s.city,", ",s.state]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"".concat(N().className," text-gray-300 text-sm"),children:s.phone})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"".concat(N().className," text-gray-400 text-xs mb-2"),children:"Facilities:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[s.facilities.slice(0,3).map((e,s)=>(0,a.jsx)("span",{className:"".concat(N().className," px-2 py-1 bg-white/10 text-gray-300 text-xs rounded-lg"),children:e},s)),s.facilities.length>3&&(0,a.jsxs)("span",{className:"".concat(N().className," px-2 py-1 bg-white/10 text-gray-400 text-xs rounded-lg"),children:["+",s.facilities.length-3," more"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4 pt-4 border-t border-gray-500/30",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"".concat(N().className," text-xs text-gray-400"),children:"Screens"}),(0,a.jsx)("p",{className:"".concat(b().className," text-sm text-white"),children:s.screens})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"".concat(N().className," text-xs text-gray-400"),children:"Shows Today"}),(0,a.jsx)("p",{className:"".concat(b().className," text-sm text-white"),children:"12"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"".concat(N().className," text-xs text-gray-400"),children:"Occupancy"}),(0,a.jsx)("p",{className:"".concat(b().className," text-sm text-green-400"),children:"68%"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-500/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("span",{className:"".concat(N().className," text-xs text-gray-400"),children:["Added ",new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]}),(0,a.jsx)("button",{className:"".concat(N().className," text-xs text-blue-400 hover:text-blue-300 transition-colors"),children:"View Analytics"})]}),o&&(0,a.jsx)("div",{className:"fixed inset-0 z-5",onClick:()=>d(!1)})]})};var I=t(11489),E=t.n(I),L=t(66932);let R=e=>{let{selectedFilter:s,onFilterChange:t}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(L.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsx)("select",{value:s,onChange:e=>t(e.target.value),className:"".concat(E().className," bg-white/10 border border-gray-500/30 rounded-xl text-white px-4 py-3 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300"),children:[{value:"all",label:"All Theaters"},{value:"active",label:"Active Only"},{value:"inactive",label:"Inactive Only"}].map(e=>(0,a.jsx)("option",{value:e.value,className:"bg-black text-white",children:e.label},e.value))})]})},F={BASE:"/owner/theaters",BY_ID:e=>"/owner/theaters/".concat(e),TOGGLE_STATUS:e=>"/owner/theaters/".concat(e)};var M=t(77567);async function _(e){return(await M.A.post(F.BASE,e)).data}let O=async e=>{try{return(await M.A.get(F.BASE,{params:e})).data}catch(e){throw console.error("Error fetching theaters:",e),e}},B=async e=>(await M.A.patch(F.TOGGLE_STATUS(e))).data,U=async(e,s)=>(await M.A.put(F.BY_ID(e),s)).data;async function V(e){return(await M.A.delete(F.BY_ID(e))).data}var z=t(21143),W=t.n(z),H=t(68993),G=t.n(H),Y=t(54416),q=t(51154),K=t(55672),X=t.n(K),Q=t(76972),$=t.n(Q),J=t(15448);let Z=e=>{let{formData:s,errors:t,onChange:l}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(X().className," block text-white text-sm mb-2"),children:"Theater Name *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",name:"name",value:s.name,onChange:l,placeholder:"Enter theater name",className:"".concat(X().className," w-full pl-12 pr-4 py-3 bg-white/10 border ").concat(t.name?"border-red-500":"border-gray-500/30"," rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300")}),t.name&&(0,a.jsxs)("p",{className:"".concat($().className," text-red-400 text-xs mt-1 flex items-center gap-1"),children:[(0,a.jsx)(y.A,{className:"w-3 h-3"}),t.name]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(X().className," block text-white text-sm mb-2"),children:"Address *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(A.A,{className:"absolute left-4 top-4 text-gray-400 w-5 h-5"}),(0,a.jsx)("textarea",{name:"address",value:s.address,onChange:l,placeholder:"Enter full address",rows:3,className:"".concat(X().className," w-full pl-12 pr-4 py-3 bg-white/10 border ").concat(t.address?"border-red-500":"border-gray-500/30"," rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 resize-none")}),t.address&&(0,a.jsxs)("p",{className:"".concat($().className," text-red-400 text-xs mt-1 flex items-center gap-1"),children:[(0,a.jsx)(y.A,{className:"w-3 h-3"}),t.address]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(X().className," block text-white text-sm mb-2"),children:"City *"}),(0,a.jsx)("input",{type:"text",name:"city",value:s.city,onChange:l,placeholder:"Enter city",className:"".concat(X().className," w-full px-4 py-3 bg-white/10 border ").concat(t.city?"border-red-500":"border-gray-500/30"," rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300")}),t.city&&(0,a.jsx)("p",{className:"".concat($().className," text-red-400 text-xs mt-1"),children:t.city})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(X().className," block text-white text-sm mb-2"),children:"State *"}),(0,a.jsx)("input",{type:"text",name:"state",value:s.state,onChange:l,placeholder:"Enter state",className:"".concat(X().className," w-full px-4 py-3 bg-white/10 border ").concat(t.state?"border-red-500":"border-gray-500/30"," rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300")}),t.state&&(0,a.jsx)("p",{className:"".concat($().className," text-red-400 text-xs mt-1"),children:t.state})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(X().className," block text-white text-sm mb-2"),children:"Pincode *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(J.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",name:"pincode",value:s.pincode,onChange:l,placeholder:"000000",maxLength:6,className:"".concat(X().className," w-full pl-12 pr-4 py-3 bg-white/10 border ").concat(t.pincode?"border-red-500":"border-gray-500/30"," rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300")}),t.pincode&&(0,a.jsx)("p",{className:"".concat($().className," text-red-400 text-xs mt-1"),children:t.pincode})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(X().className," block text-white text-sm mb-2"),children:"Phone Number *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(C.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"tel",name:"phone",value:s.phone,onChange:l,placeholder:"Enter phone number",className:"".concat(X().className," w-full pl-12 pr-4 py-3 bg-white/10 border ").concat(t.phone?"border-red-500":"border-gray-500/30"," rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300")}),t.phone&&(0,a.jsx)("p",{className:"".concat($().className," text-red-400 text-xs mt-1"),children:t.phone})]})]})})]})};var ee=t(95479),es=t.n(ee),et=t(46881),ea=t.n(et),el=t(35742),er=t(55028);let ec=(0,er.default)(()=>Promise.all([t.e(9484),t.e(1761),t.e(683)]).then(t.bind(t,70683)),{loadableGenerated:{webpack:()=>[70683]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"w-full h-64 bg-gray-800 rounded-xl flex items-center justify-center",children:(0,a.jsx)(q.A,{className:"w-6 h-6 animate-spin text-gray-400"})})}),en=e=>{let{formData:s,errors:t,updateFormData:r,clearError:c}=e,[n,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)("map");return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(es().className," block text-white text-sm mb-2"),children:"Location Coordinates *"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>d("map"),className:"".concat(ea().className," px-3 py-1 rounded-lg text-xs transition-all duration-200 flex items-center gap-1 ").concat("map"===o?"bg-blue-500/20 text-blue-400":"bg-white/10 text-gray-300 hover:bg-white/20"),children:[(0,a.jsx)(A.A,{className:"w-3 h-3"}),"Pick on Map"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>d("auto"),className:"".concat(ea().className," px-3 py-1 rounded-lg text-xs transition-all duration-200 flex items-center gap-1 ").concat("auto"===o?"bg-blue-500/20 text-blue-400":"bg-white/10 text-gray-300 hover:bg-white/20"),children:[(0,a.jsx)(el.A,{className:"w-3 h-3"}),"Auto Detect"]})]}),"map"===o&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"".concat(ea().className," text-gray-400 text-xs"),children:"Click anywhere on the map to select theater location:"}),(0,a.jsx)(ec,{onLocationSelect:(e,s)=>{r({location:{type:"Point",coordinates:[s,e]}}),c("location")},initialPosition:[s.location.coordinates[1]||28.7041,s.location.coordinates[0]||77.1025]}),(0!==s.location.coordinates[0]||0!==s.location.coordinates[1])&&(0,a.jsx)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-2",children:(0,a.jsxs)("p",{className:"".concat(ea().className," text-green-400 text-xs"),children:["\uD83D\uDCCD Selected Location: ",s.location.coordinates[1].toFixed(6),", ",s.location.coordinates[0].toFixed(6)]})})]}),"auto"===o&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{if(i(!0),!navigator.geolocation){alert("Geolocation is not supported by this browser"),i(!1);return}navigator.geolocation.getCurrentPosition(e=>{let{longitude:s,latitude:t}=e.coords;r({location:{type:"Point",coordinates:[s,t]}}),c("location"),i(!1)},e=>{console.error("Error getting location:",e),alert("Unable to get your location. Please select location on map."),d("map"),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},disabled:n,className:"".concat(es().className," w-full py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white hover:bg-white/20 transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50"),children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{className:"w-4 h-4 animate-spin"}),"Getting Location..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(el.A,{className:"w-4 h-4"}),"Get Your Current Location"]})}),(0!==s.location.coordinates[0]||0!==s.location.coordinates[1])&&(0,a.jsxs)("p",{className:"".concat(ea().className," text-green-400 text-xs"),children:["Location: ",s.location.coordinates[1].toFixed(6),", ",s.location.coordinates[0].toFixed(6)]})]}),t.location&&(0,a.jsxs)("p",{className:"".concat(ea().className," text-red-400 text-xs mt-1 flex items-center gap-1"),children:[(0,a.jsx)(y.A,{className:"w-3 h-3"}),t.location]})]})};var ei=t(5061),eo=t.n(ei),ed=t(33267),ex=t.n(ed);let em=e=>{let{facilities:s,updateFacilities:t}=e,[r,c]=(0,l.useState)(""),n=()=>{r.trim()&&!s.includes(r.trim())&&(t([...s,r.trim()]),c(""))};return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(eo().className," block text-white text-sm mb-2"),children:"Facilities"}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"".concat(ex().className," text-gray-400 text-xs mb-2"),children:"Quick add:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["3D","IMAX","4DX","Dolby Atmos","Dolby Vision","Parking","Food Court","AC","Recliner Seats","Premium Seating","Wheelchair Access","Online Booking"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{s.includes(e)||t([...s,e])})(e),disabled:s.includes(e),className:"".concat(ex().className," px-3 py-1 rounded-lg text-xs transition-all duration-200 ").concat(s.includes(e)?"bg-green-500/20 text-green-400 cursor-not-allowed":"bg-white/10 text-gray-300 hover:bg-white/20"),children:e},e))})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("input",{type:"text",value:r,onChange:e=>c(e.target.value),placeholder:"Add custom facility",className:"".concat(ex().className," flex-1 px-3 py-2 bg-white/10 border border-gray-500/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white/50 text-sm"),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),n())}),(0,a.jsx)("button",{type:"button",onClick:n,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:(0,a.jsx)(x.A,{className:"w-4 h-4 text-white"})})]}),s.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(ex().className," text-gray-400 text-xs mb-2"),children:"Selected facilities:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,a.jsxs)("span",{className:"".concat(ex().className," px-3 py-1 bg-blue-500/20 text-blue-400 rounded-lg text-xs flex items-center gap-1"),children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>{t(s.filter(s=>s!==e))},className:"hover:text-red-400 transition-colors",children:(0,a.jsx)(Y.A,{className:"w-3 h-3"})})]},e))})]})]})};var eh=t(13568);let eu=e=>{let{onClose:s,onSuccess:t,mode:r,initialData:c}=e,[n,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)({}),[x,m]=(0,l.useState)({name:"",address:"",city:"",state:"",pincode:"",phone:"",facilities:[],location:{type:"Point",coordinates:[0,0]}});(0,l.useEffect)(()=>{"edit"===r&&c&&m(c)},[r,c]);let h=e=>{m(s=>({...s,...e}))},u=async e=>{if(e.preventDefault(),(()=>{let e={};return x.name.trim()||(e.name="Theater name is required"),x.address.trim()||(e.address="Address is required"),x.city.trim()||(e.city="City is required"),x.state.trim()||(e.state="State is required"),x.pincode.trim()?/^\d{6}$/.test(x.pincode)||(e.pincode="Pincode must be 6 digits"):e.pincode="Pincode is required",x.phone.trim()?/^\d{10}$/.test(x.phone.replace(/\D/g,""))||(e.phone="Phone number must be 10 digits"):e.phone="Phone number is required",0===x.location.coordinates[0]&&0===x.location.coordinates[1]&&(e.location="Location coordinates are required"),d(e),0===Object.keys(e).length})()){i(!0);try{let e;"create"==r?e=await _(x):"edit"==r&&c&&(e=await U(c._id,x)),e.success?("create"==r&&(0,eh.Ay)("Theater submitted successfully! Please check your email for further details"),t(e.data),"edit"==r&&eh.Ay.success("Succesfully ".concat(r,"ed"))):console.log(e.message)}catch(e){console.error("Error creating theater:",e)}finally{i(!1),s()}}};return(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-start justify-center pt-10 pb-10",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:s}),(0,a.jsx)("div",{className:"relative w-full max-w-2xl mx-4 h-[90vh] max-h-[800px] min-h-[600px]",children:(0,a.jsxs)("div",{className:"backdrop-blur-sm bg-black/90 rounded-3xl border border-gray-500/30 shadow-2xl h-full flex flex-col",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-6 pb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"".concat(W().className," text-2xl text-white"),children:"create"===r?"Add New Theater":"Edit Theater"}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-full transition-colors duration-200",children:(0,a.jsx)(Y.A,{className:"w-6 h-6 text-white"})})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-6",children:(0,a.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,a.jsx)(Z,{formData:x,errors:o,onChange:e=>{let{name:s,value:t}=e.target;o[s]&&d(e=>({...e,[s]:""})),m(e=>({...e,[s]:t}))}}),(0,a.jsx)(en,{formData:x,errors:o,updateFormData:h,clearError:e=>{d(s=>({...s,[e]:""}))}}),(0,a.jsx)(em,{facilities:x.facilities,updateFacilities:e=>h({facilities:e})})]})}),(0,a.jsx)("div",{className:"flex-shrink-0 p-6 pt-4 border-t border-gray-500/30",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"".concat(G().className," flex-1 py-3 rounded-xl border border-gray-500/30 text-gray-300 hover:bg-white/10 transition-all duration-300 font-medium"),children:"Cancel"}),(0,a.jsx)("button",{onClick:u,disabled:n||!(x.name.trim()&&x.address.trim()&&x.city.trim()&&x.state.trim()&&x.pincode.trim()&&x.phone.trim()&&(0!==x.location.coordinates[0]||0!==x.location.coordinates[1])),className:"".concat(G().className," flex-1 bg-white text-black py-3 rounded-xl hover:bg-gray-200 transition-all duration-300 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"),children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{className:"w-4 h-4 animate-spin"}),"create"===r?"Creating Theater...":"Saving Changes..."]}):"create"===r?"Create Theater":"Save Changes"})]})})]})})]})};var eg=t(52234),eb=t.n(eg),ep=t(40376),eN=t.n(ep),ej=t(54060),ey=t.n(ej),ew=t(41066);let ev=(0,er.default)(()=>Promise.all([t.e(9484),t.e(1761),t.e(683)]).then(t.bind(t,70683)),{loadableGenerated:{webpack:()=>[70683]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"w-full h-64 bg-gray-800 rounded-xl flex items-center justify-center",children:(0,a.jsx)(q.A,{className:"w-6 h-6 animate-spin text-gray-400"})})}),ef=e=>{var s,t;let{theaterData:l,onClose:r}=e,{name:c,address:n,city:i,state:o,pincode:d,location:x,phone:h,facilities:u,screens:g,isActive:b,isVerified:p,createdAt:N,updatedAt:w,_id:v}=l;return(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:r}),(0,a.jsxs)("div",{className:"relative w-full max-w-3xl bg-black/90 border border-gray-500/30 rounded-3xl shadow-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 flex justify-between items-center border-b border-gray-500/30",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"".concat(eb().className," text-2xl text-white flex items-center gap-2"),children:[(0,a.jsx)(m.A,{className:"w-6 h-6 text-blue-400"})," ",c]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[b?(0,a.jsx)("span",{className:"bg-green-600/20 text-green-400 px-3 py-1 rounded-lg text-xs font-medium",children:"Active"}):(0,a.jsx)("span",{className:"bg-orange-600/20 text-orange-400 px-3 py-1 rounded-lg text-xs font-medium",children:"Inactive"}),p?(0,a.jsxs)("span",{className:"flex items-center gap-1 bg-green-600/20 text-green-400 px-3 py-1 rounded-lg text-xs font-medium",children:[(0,a.jsx)(j.A,{className:"w-4 h-4"})," Verified"]}):(0,a.jsxs)("span",{className:"flex items-center gap-1 bg-gray-600/20 text-red-400 px-3 py-1 rounded-lg text-xs font-medium",children:[(0,a.jsx)(y.A,{className:"w-4 h-4"})," Not Verified"]})]})]}),(0,a.jsx)("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors duration-200",children:(0,a.jsx)(Y.A,{className:"w-6 h-6 text-white"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[75vh]",children:[(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"".concat(eN().className," text-lg text-white mb-2"),children:"Address & Location"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(A.A,{className:"w-5 h-5 text-gray-400 mt-1"}),(0,a.jsx)("span",{className:"".concat(ey().className," text-gray-300"),children:n})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"City"}),(0,a.jsx)("p",{className:"text-white",children:i})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"State"}),(0,a.jsx)("p",{className:"text-white",children:o})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"Pincode"}),(0,a.jsx)("p",{className:"text-white",children:d})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"Phone"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-white",children:h})]})]})]}),(0,a.jsx)("div",{className:"rounded-xl overflow-hidden border border-gray-500/30 h-60",children:(0,a.jsx)(ev,{readOnly:!0,initialPosition:[(null==x||null==(s=x.coordinates)?void 0:s[1])||28.7041,(null==x||null==(t=x.coordinates)?void 0:t[0])||77.1025]})})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"".concat(eN().className," text-lg text-white mb-2 flex items-center gap-2"),children:[(0,a.jsx)(ew.A,{className:"w-5 h-5 text-blue-400"})," Facilities & Screens"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:u.length>0?u.map(e=>(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 rounded-lg text-xs",children:e},e)):(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"None"})}),(0,a.jsxs)("p",{className:"text-gray-300 text-sm",children:["Screens: ",g||"N/A"]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"".concat(eN().className," text-lg text-white mb-2"),children:"Audit Info"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-300",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"Created At"}),(0,a.jsx)("p",{children:new Date(N).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"Last Updated"}),(0,a.jsx)("p",{children:new Date(w).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"Theater ID"}),(0,a.jsx)("p",{children:v})]})]})]})]}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-500/30",children:(0,a.jsx)("button",{type:"button",onClick:r,className:"".concat(eN().className," w-full py-3 rounded-xl border border-gray-500/30 text-gray-300 hover:bg-white/10 transition-all"),children:"Close"})})]})]})};var ek=t(58569),eS=t.n(ek),eA=t(92775),eC=t.n(eA),eD=t(64029),eT=t.n(eD),eP=t(23227),eI=t(28883),eE=t(32919),eL=t(82680);let eR=e=>{let{onClose:s,onSuccess:t,selectedTheater:r}=e,[c,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)({}),[d,x]=(0,l.useState)({firstName:"",lastName:"",email:"",password:"",theaterId:r._id}),m=e=>{let{name:s,value:t}=e.target;i[s]&&o(e=>({...e,[s]:""})),x(e=>({...e,[s]:t}))},h=async e=>{if(e.preventDefault(),(()=>{let e={};return d.firstName.trim()||(e.firstName="First name is required"),d.lastName.trim()||(e.lastName="Last name is required"),d.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(e.email="Please enter a valid email"):e.email="Email is required",d.password.trim()?d.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",o(e),0===Object.keys(e).length})()){n(!0);try{let e=await (0,eL.D1)(d);console.log(e),eh.Ay.success("Staff created succusfully"),t(e.data.staff)}catch(e){console.error("Error adding staff:",e),eh.Ay.error("Something went wrong. Please try again.")}finally{s(),n(!1)}}};return(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-start justify-center pt-10 pb-10",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:s}),(0,a.jsx)("div",{className:"relative w-full max-w-lg mx-4 h-fit max-h-[90vh]",children:(0,a.jsxs)("div",{className:"backdrop-blur-sm bg-black/90 rounded-3xl border border-gray-500/30 shadow-2xl flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 p-6 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"".concat(eS().className," text-2xl text-white"),children:"Add Staff Member"}),(0,a.jsxs)("p",{className:"".concat(eT().className," text-sm text-gray-400 mt-1"),children:["Adding staff to ",r.name]})]}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-full transition-colors duration-200",children:(0,a.jsx)(Y.A,{className:"w-6 h-6 text-white"})})]}),(0,a.jsx)("div",{className:"bg-white/5 border border-gray-500/30 rounded-xl p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)(eP.A,{className:"w-5 h-5 text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"".concat(eC().className," text-white text-sm"),children:r.name}),(0,a.jsxs)("p",{className:"".concat(eT().className," text-xs text-gray-400"),children:[r.city,", ",r.state]})]})]})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-6",children:(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(eT().className," block text-sm text-gray-300 mb-2"),children:"First Name *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(k.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",name:"firstName",value:d.firstName,onChange:m,className:"".concat(eT().className," w-full pl-11 pr-4 py-3 bg-white/5 border ").concat(i.firstName?"border-red-500":"border-gray-500/30"," rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 transition-all duration-300"),placeholder:"First name"})]}),i.firstName&&(0,a.jsx)("p",{className:"".concat(eT().className," text-red-400 text-sm mt-1"),children:i.firstName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(eT().className," block text-sm text-gray-300 mb-2"),children:"Last Name *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(k.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",name:"lastName",value:d.lastName,onChange:m,className:"".concat(eT().className," w-full pl-11 pr-4 py-3 bg-white/5 border ").concat(i.lastName?"border-red-500":"border-gray-500/30"," rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 transition-all duration-300"),placeholder:"Last name"})]}),i.lastName&&(0,a.jsx)("p",{className:"".concat(eT().className," text-red-400 text-sm mt-1"),children:i.lastName})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(eT().className," block text-sm text-gray-300 mb-2"),children:"Email Address *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eI.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"email",name:"email",value:d.email,onChange:m,className:"".concat(eT().className," w-full pl-11 pr-4 py-3 bg-white/5 border ").concat(i.email?"border-red-500":"border-gray-500/30"," rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 transition-all duration-300"),placeholder:"staff@example.com"})]}),i.email&&(0,a.jsx)("p",{className:"".concat(eT().className," text-red-400 text-sm mt-1"),children:i.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(eT().className," block text-sm text-gray-300 mb-2"),children:"Password *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eE.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"password",name:"password",value:d.password,onChange:m,className:"".concat(eT().className," w-full pl-11 pr-4 py-3 bg-white/5 border ").concat(i.password?"border-red-500":"border-gray-500/30"," rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 transition-all duration-300"),placeholder:"Enter password"})]}),i.password&&(0,a.jsx)("p",{className:"".concat(eT().className," text-red-400 text-sm mt-1"),children:i.password})]})]})}),(0,a.jsx)("div",{className:"flex-shrink-0 p-6 pt-4 border-t border-gray-500/30",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"".concat(eC().className," flex-1 py-3 rounded-xl border border-gray-500/30 text-gray-300 hover:bg-white/10 transition-all duration-300 font-medium"),children:"Cancel"}),(0,a.jsx)("button",{onClick:h,disabled:c||!(d.firstName.trim()&&d.lastName.trim()&&d.email.trim()&&d.password.trim()),className:"".concat(eC().className," flex-1 bg-white text-black py-3 rounded-xl hover:bg-gray-200 transition-all duration-300 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"),children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{className:"w-4 h-4 animate-spin"}),"Adding Staff..."]}):"Add Staff Member"})]})})]})})]})},eF=()=>{let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(!0),[n,o]=(0,l.useState)(!1),[g,b]=(0,l.useState)(!1),[p,N]=(0,l.useState)(null),[j,y]=(0,l.useState)(""),[w,v]=(0,l.useState)("all"),[f,k]=(0,l.useState)(!1),[S,A]=(0,l.useState)({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10}),[C,D]=(0,l.useState)({total:0,active:0,inactive:0}),[I,E]=(0,l.useState)(""),[L,F]=(0,l.useState)(!1),[M,_]=(0,l.useState)(null),U=e=>{_(e),F(!0)};(0,l.useEffect)(()=>{let e=setTimeout(()=>{E(j)},500);return()=>clearTimeout(e)},[j]),(0,l.useEffect)(()=>{z()},[I,w,S.currentPage]);let z=async()=>{try{r(!0);let e={search:I.trim()||void 0,status:"all"!==w?w:void 0,page:S.currentPage,limit:S.itemsPerPage,sortBy:"createdAt",sortOrder:"desc"},t=await O(e);s(t.data.theaters||[]),A(e=>({...e,totalItems:t.total,totalPages:Math.ceil(t.total/e.itemsPerPage)})),D({total:t.data.totalAll,active:t.data.activeAll,inactive:t.data.inactiveAll})}catch(e){console.error("Error fetching theaters:",e),s([]),A(e=>({...e,totalItems:0,totalPages:1})),D({total:0,active:0,inactive:0})}finally{r(!1)}},W=e=>{A(s=>({...s,currentPage:e}))},H=async e=>{try{if(!e.isVerified)return void eh.Ay.error("The theater needs to be verified to activate.Please try again later");if(!await (0,T.f)({title:e.isActive?"Disable Theater":"Enable Theater",message:"Are you sure you want to ".concat(e.isActive?"disable":"enable","'the theater?"),confirmText:e.isActive?"Disable":"Enable",cancelText:"Cancel"}))return;let s=await B(e._id);z(),console.log(s)}catch(e){console.error("Error toggling theater status:",e),z()}},G=async t=>{try{await V(t);let a=e.filter(e=>e._id!==t);s(a),eh.Ay.success("Theater deleted succusfully")}catch(e){console.error("Error deleting theater:",e),z()}},Y=e=>{N(e),k(!0)},q=e=>{N(e),b(!0)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(c().className," text-3xl text-white mb-2"),children:"Th002eater Management"}),(0,a.jsx)("p",{className:"".concat(d().className," text-gray-400"),children:"Manage your cinema theaters and their settings"})]}),(0,a.jsxs)("button",{onClick:()=>o(!0),className:"".concat(i().className," bg-white text-black px-6 py-3 rounded-xl hover:bg-gray-200 transition-all duration-300 flex items-center gap-2 font-medium"),children:[(0,a.jsx)(x.A,{className:"w-5 h-5"}),"Add New Theater"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(d().className," text-gray-400 text-sm"),children:"Total Theaters"}),(0,a.jsx)("p",{className:"".concat(c().className," text-2xl text-white mt-1"),children:C.total})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"w-6 h-6 text-blue-400"})})]})}),(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(d().className," text-gray-400 text-sm"),children:"Active Theaters"}),(0,a.jsx)("p",{className:"".concat(c().className," text-2xl text-green-400 mt-1"),children:C.active})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"w-6 h-6 text-green-400"})})]})}),(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(d().className," text-gray-400 text-sm"),children:"Inactive Theaters"}),(0,a.jsx)("p",{className:"".concat(c().className," text-2xl text-orange-400 mt-1"),children:C.inactive})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"w-6 h-6 text-orange-400"})})]})})]}),(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(u.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>{y(e.target.value),A(e=>({...e,currentPage:1}))},placeholder:"Search theaters by name, city, or state...",className:"".concat(i().className," w-full pl-12 pr-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300")}),t&&I!==j&&(0,a.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-white rounded-full animate-spin"})})]}),(0,a.jsx)(R,{selectedFilter:w,onFilterChange:e=>{v(e),A(e=>({...e,currentPage:1}))}})]})}),(0,a.jsx)("div",{className:"space-y-4",children:t?(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 animate-pulse",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-600 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded w-1/2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded w-2/3"})]})},e))}):0===e.length?(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-12 text-center",children:[(0,a.jsx)(m.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"".concat(i().className," text-xl text-white mb-2"),children:j||"all"!==w?"No theaters found":"No theaters yet"}),(0,a.jsx)("p",{className:"".concat(d().className," text-gray-400 mb-6"),children:j||"all"!==w?"No theaters match your criteria":"Add your first theater to get started"}),!j&&"all"===w&&(0,a.jsx)("button",{onClick:()=>o(!0),className:"".concat(i().className," bg-white text-black px-6 py-3 rounded-xl hover:bg-gray-200 transition-all duration-300"),children:"Add Your First Theater"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.map(e=>(0,a.jsx)(P,{theater:e,onToggleStatus:H,onDelete:G,onEdit:q,onView:Y,openAddStaffModal:U},e._id))})}),!t&&e.length>0&&S.totalPages>1&&(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"".concat(d().className," text-gray-400"),children:["Showing"," ",(S.currentPage-1)*S.itemsPerPage+1," to"," ",Math.min(S.currentPage*S.itemsPerPage,S.totalItems)," ","of ",S.totalItems," theaters"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>W(S.currentPage-1),disabled:1===S.currentPage,className:"".concat(i().className," px-4 py-2 rounded-lg border border-gray-500/30 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10 transition-all duration-300"),children:"Previous"}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,S.totalPages)},(e,s)=>{let t;return t=S.totalPages<=5||S.currentPage<=3?s+1:S.currentPage>=S.totalPages-2?S.totalPages-4+s:S.currentPage-2+s,(0,a.jsx)("button",{onClick:()=>W(t),className:"".concat(i().className," w-10 h-10 rounded-lg border border-gray-500/30 transition-all duration-300 ").concat(S.currentPage===t?"bg-white text-black":"text-white hover:bg-white/10"),children:t},t)})}),(0,a.jsx)("button",{onClick:()=>W(S.currentPage+1),disabled:S.currentPage===S.totalPages,className:"".concat(i().className," px-4 py-2 rounded-lg border border-gray-500/30 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10 transition-all duration-300"),children:"Next"})]})]})}),n&&(0,a.jsx)(eu,{onClose:()=>o(!1),onSuccess:e=>{z(),o(!1)},mode:"create"}),g&&p&&(0,a.jsx)(eu,{onClose:()=>b(!1),onSuccess:()=>{z(),b(!1)},mode:"edit",initialData:p}),f&&p&&(0,a.jsx)(ef,{theaterData:p,onClose:()=>k(!1)}),L&&M&&(0,a.jsx)(eR,{onClose:()=>{F(!1),_(null)},onSuccess:e=>{F(!1),_(null)},selectedTheater:M})]})};var eM=t(35974),e_=t.n(eM),eO=t(79928),eB=t.n(eO),eU=t(12267);let eV=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-600 rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded w-1/2"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-gray-600 rounded-full mx-auto mb-4"}),(0,a.jsx)("div",{className:"h-6 bg-gray-600 rounded mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded mb-2"})]}),(0,a.jsx)("div",{className:"lg:col-span-2 space-y-6",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-600 rounded mb-4"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"h-16 bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"h-16 bg-gray-600 rounded"})]})]},e))})]})]}),ez=e=>{let{onRetry:s}=e;return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-white",children:"Error loading profile data"}),(0,a.jsx)("button",{onClick:s,className:"mt-4 bg-white text-black px-4 py-2 rounded-lg",children:"Retry"})]})})};var eW=t(68016),eH=t.n(eW),eG=t(1866),eY=t.n(eG),eq=t(48850),eK=t.n(eq),eX=t(44940);let eQ=e=>{let{profile:s,onEdit:t,saving:l}=e;return(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(k.A,{className:"w-5 h-5 text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"".concat(eH().className," text-xl text-white"),children:"Personal Details"}),(0,a.jsx)("p",{className:"".concat(eK().className," text-gray-400"),children:"Your personal information"})]})]}),(0,a.jsxs)("button",{onClick:t,disabled:l,className:"".concat(eY().className," bg-white text-black px-4 py-2 rounded-lg hover:bg-gray-200 transition-all duration-300 flex items-center gap-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed"),children:[(0,a.jsx)(eX.A,{className:"w-4 h-4"}),"Edit"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[(0,a.jsx)(k.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(eK().className," text-gray-400 text-xs"),children:"Name"}),(0,a.jsx)("p",{className:"".concat(eY().className," text-white"),children:s.ownerName})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[(0,a.jsx)(eI.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(eK().className," text-gray-400 text-xs"),children:"Email"}),(0,a.jsx)("p",{className:"".concat(eY().className," text-white"),children:s.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[(0,a.jsx)(C.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(eK().className," text-gray-400 text-xs"),children:"Phone"}),(0,a.jsx)("p",{className:"".concat(eY().className," text-white"),children:s.phone})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[(0,a.jsx)(k.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(eK().className," text-gray-400 text-xs"),children:"Account Holder"}),(0,a.jsx)("p",{className:"".concat(eY().className," text-white"),children:s.accountHolder})]})]})]})]})};var e$=t(32059),eJ=t.n(e$),eZ=t(94357),e0=t.n(eZ),e4=t(86947),e2=t.n(e4);let e3=e=>{let{profile:s,docs:t}=e;return(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"relative mb-6",children:(0,a.jsx)("div",{className:"w-24 h-24 bg-gray-600 rounded-full mx-auto flex items-center justify-center overflow-hidden",children:s.ownerPhotoUrl?(0,a.jsx)("img",{src:t.ownerPhotoUrl,alt:"Profile",className:"w-24 h-24 rounded-full object-cover"}):(0,a.jsx)(k.A,{className:"w-12 h-12 text-gray-400"})})}),(0,a.jsx)("h2",{className:"".concat(eJ().className," text-xl text-white mb-2"),children:s.ownerName}),(0,a.jsx)("p",{className:"".concat(e2().className," text-gray-400 mb-1"),children:"Theater Owner"}),(0,a.jsxs)("p",{className:"".concat(e2().className," text-gray-400 mb-4"),children:["Member since ",sH(s.createdAt)]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"px-4 py-2 rounded-lg ".concat(s.isVerified?"bg-green-500/20":"bg-orange-500/20"),children:[(0,a.jsx)("p",{className:"".concat(e2().className," ").concat(s.isVerified?"text-green-400":"text-orange-400"," text-sm"),children:"Account Status"}),(0,a.jsx)("p",{className:"".concat(e0().className," text-white"),children:s.isVerified?"Verified":"Pending Verification"})]}),(0,a.jsxs)("div",{className:"bg-blue-500/20 px-4 py-2 rounded-lg",children:[(0,a.jsx)("p",{className:"".concat(e2().className," text-blue-400 text-sm"),children:"Last Login"}),(0,a.jsx)("p",{className:"".concat(e0().className," text-white text-sm"),children:sH(s.lastLogin)})]})]})]})})})};var e1=t(5798),e5=t.n(e1),e6=t(55828),e8=t.n(e6),e9=t(89368),e7=t.n(e9),se=t(27414),ss=t(81586);let st=e=>{let{profile:s,onEdit:t,saving:l}=e;return(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(se.A,{className:"w-5 h-5 text-green-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"".concat(e5().className," text-xl text-white"),children:"Bank Details"}),(0,a.jsx)("p",{className:"".concat(e7().className," text-gray-400"),children:"Your banking information for payments"})]})]}),(0,a.jsxs)("button",{onClick:t,disabled:l,className:"".concat(e8().className," bg-white text-black px-4 py-2 rounded-lg hover:bg-gray-200 transition-all duration-300 flex items-center gap-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed"),children:[(0,a.jsx)(eX.A,{className:"w-4 h-4"}),s.bankName?"Edit":"Add Details"]})]}),s.bankName?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[(0,a.jsx)(eP.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(e7().className," text-gray-400 text-xs"),children:"Bank Name"}),(0,a.jsx)("p",{className:"".concat(e8().className," text-white"),children:s.bankName})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[(0,a.jsx)(ss.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(e7().className," text-gray-400 text-xs"),children:"Account Number"}),(0,a.jsx)("p",{className:"".concat(e8().className," text-white"),children:sG(s.accountNumber)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[(0,a.jsx)(eP.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(e7().className," text-gray-400 text-xs"),children:"IFSC Code"}),(0,a.jsx)("p",{className:"".concat(e8().className," text-white"),children:s.ifsc})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(se.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"".concat(e8().className," text-gray-400"),children:"Please provide your bank details to receive payments"})]})]})};var sa=t(29363),sl=t.n(sa),sr=t(52605),sc=t.n(sr),sn=t(47547),si=t.n(sn),so=t(57842),sd=t(57434);let sx=e=>{let{profile:s,onView:t}=e;return(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(so.A,{className:"w-5 h-5 text-purple-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"".concat(sl().className," text-xl text-white"),children:"KYC Documents"}),(0,a.jsx)("p",{className:"".concat(si().className," text-gray-400"),children:"Your identity verification documents (View only)"})]})]}),(0,a.jsxs)("button",{onClick:t,className:"".concat(sc().className," bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-all duration-300 flex items-center gap-2 text-sm"),children:[(0,a.jsx)(v.A,{className:"w-4 h-4"}),"View"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[(0,a.jsx)(so.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(si().className," text-gray-400 text-xs"),children:"Aadhaar Number"}),(0,a.jsx)("p",{className:"".concat(sc().className," text-white"),children:sG(s.aadhaar,4)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[(0,a.jsx)(sd.A,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(si().className," text-gray-400 text-xs"),children:"PAN Number"}),(0,a.jsx)("p",{className:"".concat(sc().className," text-white"),children:sG(s.pan,4)})]})]})]})]})};var sm=t(32650),sh=t.n(sm),su=t(21688),sg=t.n(su),sb=t(87084),sp=t.n(sb),sN=t(4229),sj=t(78749);let sy={className:"font-bold"},sw={className:"font-medium"},sv={className:"font-normal text-sm"},sf={className:"font-normal"},sk=e=>{let{currentEmail:s,onClose:t,onEmailChanged:r}=e,[c,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)(!1),[d,x]=(0,l.useState)(0),[m,h]=(0,l.useState)(""),[u,g]=(0,l.useState)(!1),[b,p]=(0,l.useState)(!1),N=(0,l.useRef)([]),[j,y]=(0,l.useState)({newEmail:"",password:"",otp:[]}),w=e=>{let{name:s,value:t}=e.target;y(e=>({...e,[s]:t})),h("")},f=async()=>{if(!j.newEmail)return void h("Please enter a valid new email address");if(j.newEmail===s)return void h("New email cant be as current email");if(!j.password)return void h("Please enter your current password");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.newEmail))return void h("Please enter a valid email address");n(!0);try{let e=await (0,eU.uV)({newEmail:j.newEmail,password:j.password});e.success?(o(!0),x(300),h(""),y(e=>({...e,otp:[]})),setTimeout(()=>{var e;null==(e=N.current[0])||e.focus()},100)):h(e.message||"Failed to send OTP. Please try again.")}catch(s){var e,t;console.error("Send OTP error:",s),h((null==(t=s.response)||null==(e=t.data)?void 0:e.message)||"Failed to send OTP. Please try again.")}finally{n(!1)}},k=async()=>{g(!0);try{let s=await (0,eU.uV)({newEmail:j.newEmail,password:j.password});if(s.success){var e;x(300),h(""),y(e=>({...e,otp:[]})),null==(e=N.current[0])||e.focus()}else h(s.message||"Failed to resend OTP. Please try again.")}catch(e){console.error("Resend OTP error:",e),h((null==e?void 0:e.message)||"Failed to resend OTP. Please try again.")}finally{g(!1)}},S=async()=>{var e,s,t,a;let l=j.otp.join("");if(6!==l.length)return void h("Please enter a valid 6-digit OTP");n(!0);try{let s=await (0,eU.Dl)({email:j.newEmail,otp:l});s.success?(eh.Ay.success("Email changed successfully"),null==r||r(j.newEmail),C()):(h(s.message||"Invalid OTP. Please try again."),y(e=>({...e,otp:[]})),null==(e=N.current[0])||e.focus())}catch(e){console.error("Verify OTP error:",e),h((null==e||null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Invalid OTP. Please try again."),y(e=>({...e,otp:[]})),null==(a=N.current[0])||a.focus()}finally{n(!1)}},A=0===d&&!u;(0,l.useEffect)(()=>{let e;return d>0&&(e=setInterval(()=>{x(e=>e-1)},1e3)),()=>clearInterval(e)},[d]);let C=()=>{y({newEmail:"",password:"",otp:[]}),o(!1),x(0),h(""),p(!1),t()};return(0,a.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm",onClick:C}),(0,a.jsxs)("div",{className:"relative w-full max-w-md bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center",children:(0,a.jsx)(eI.A,{className:"w-5 h-5 text-black"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"".concat(sy.className," text-xl text-white"),children:i?"Verify Your Email":"Change Email"}),(0,a.jsx)("p",{className:"".concat(sv.className," text-gray-400"),children:i?"OTP sent to ".concat(j.newEmail):"Update your email address"})]})]}),(0,a.jsx)("button",{onClick:C,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i?S():f()},className:"p-6 space-y-6",children:[m&&(0,a.jsx)("div",{className:"rounded-lg p-3",children:(0,a.jsx)("p",{className:"".concat(sv.className," text-center text-red-400 text-sm"),children:m})}),i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("h3",{className:"".concat(sf.className," text-lg text-white mb-2"),children:"Enter Verification Code"}),(0,a.jsxs)("p",{className:"".concat(sv.className," text-gray-300"),children:["We've sent a 6-digit code to"," ",(0,a.jsx)("span",{className:"text-blue-400",children:j.newEmail})]})]}),(0,a.jsx)("div",{className:"flex justify-center space-x-3 mb-6",children:Array.from({length:6}).map((e,s)=>(0,a.jsx)("input",{type:"text",inputMode:"numeric",maxLength:1,className:"w-12 h-12 text-center text-white bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 text-lg font-medium",value:j.otp[s]||"",onChange:e=>((e,s)=>{let t=e.target.value.replace(/\D/g,"");if(t.length>1)return;let a=[...j.otp];if(a[s]=t,y(e=>({...e,otp:a})),h(""),t&&s<5){var l;null==(l=N.current[s+1])||l.focus()}})(e,s),onKeyDown:e=>((e,s)=>{var t,a,l;"Backspace"===e.key&&!j.otp[s]&&s>0?null==(t=N.current[s-1])||t.focus():"ArrowLeft"===e.key&&s>0?null==(a=N.current[s-1])||a.focus():"ArrowRight"===e.key&&s<5&&(null==(l=N.current[s+1])||l.focus())})(e,s),ref:e=>{e&&(N.current[s]=e)},disabled:c},s))}),(0,a.jsx)("button",{type:"submit",disabled:c||6!==j.otp.join("").length,className:"".concat(sw.className," w-full px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"),children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):"Verify & Change Email"}),(0,a.jsx)("div",{className:"text-center",children:u?(0,a.jsxs)("span",{className:"".concat(sv.className," flex items-center justify-center text-gray-400"),children:[(0,a.jsx)(q.A,{className:"w-4 h-4 animate-spin mr-2"}),"Sending..."]}):A?(0,a.jsx)("button",{type:"button",onClick:k,className:"".concat(sv.className," text-blue-400 hover:text-blue-300 transition-colors"),children:"Resend OTP"}):(0,a.jsxs)("p",{className:"".concat(sv.className," text-gray-400"),children:["Resend OTP in ",(e=>{let s=Math.floor(e/60);return"".concat(s,":").concat((e%60).toString().padStart(2,"0"))})(d)]})}),(0,a.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"".concat(sv.className," text-gray-300 text-xs mb-2"),children:"OTP Guidelines:"}),(0,a.jsxs)("ul",{className:"".concat(sv.className," text-gray-400 text-xs space-y-1"),children:[(0,a.jsx)("li",{children:" Check your email inbox and spam folder"}),(0,a.jsx)("li",{children:" OTP is valid for 5 minutes"}),(0,a.jsx)("li",{children:" Enter the 6-digit code exactly as received"})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sv.className," block text-sm font-medium text-gray-200 mb-2"),children:"Current Email"}),(0,a.jsx)("div",{className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-gray-400 backdrop-blur-sm",children:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sv.className," block text-sm font-medium text-gray-200 mb-2"),children:"New Email Address"}),(0,a.jsx)("input",{name:"newEmail",value:j.newEmail,onChange:w,className:"".concat(sw.className," w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm"),placeholder:"Enter new email address",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sv.className," block text-sm font-medium text-gray-200 mb-2"),children:"Current Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:b?"text":"password",name:"password",value:j.password,onChange:w,className:"".concat(sw.className," w-full px-4 py-3 pr-12 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm"),placeholder:"Enter your current password",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>p(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:b?(0,a.jsx)(sj.A,{className:"w-5 h-5"}):(0,a.jsx)(v.A,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("button",{type:"submit",disabled:c||!j.newEmail||!j.password,className:"".concat(sw.className," w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"),children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{className:"w-4 h-4 animate-spin"}),"Sending OTP..."]}):"Send OTP"})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-end gap-4 p-6 border-t border-white/10",children:(0,a.jsx)("button",{onClick:C,className:"".concat(sw.className," px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-all duration-200"),children:"Cancel"})})]})]})},sS={className:"font-bold"},sA={className:"font-medium"},sC={className:"font-normal text-sm"},sD=e=>{let{onClose:s,onPasswordChanged:t}=e,[r,c]=(0,l.useState)(!1),[n,i]=(0,l.useState)(""),[o,d]=(0,l.useState)(!1),[x,m]=(0,l.useState)(!1),[h,u]=(0,l.useState)(!1),[g,b]=(0,l.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),p=e=>{let{name:s,value:t}=e.target;b(e=>({...e,[s]:t})),i("")},N=async()=>{if(!g.oldPassword)return void i("Please enter your old password");if(!g.newPassword)return void i("Please enter a new password");if(g.newPassword.length<6)return void i("New password must be at least 6 characters long");if(g.oldPassword===g.newPassword)return void i("New password cannot be the same as old password");if(!g.confirmPassword)return void i("Please confirm your new password");if(g.newPassword!==g.confirmPassword)return void i("New password and confirm password do not match");c(!0);try{let e=await (0,eU.xw)({oldPassword:g.oldPassword,newPassword:g.newPassword});e.success?(eh.Ay.success("Password changed successfully"),null==t||t(),j()):i(e.message||"Failed to change password")}catch(t){var e,s;console.error("Change password error:",t),i((null==(s=t.response)||null==(e=s.data)?void 0:e.message)||"Failed to change password")}finally{c(!1)}},j=()=>{b({oldPassword:"",newPassword:"",confirmPassword:""}),i(""),d(!1),m(!1),u(!1),s()};return(0,a.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm",onClick:j}),(0,a.jsxs)("div",{className:"relative w-full max-w-md bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/10 rounded-2xl backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center",children:(0,a.jsx)(eE.A,{className:"w-5 h-5 text-black"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"".concat(sS.className," text-xl text-white"),children:"Change Password"}),(0,a.jsx)("p",{className:"".concat(sC.className," text-gray-400"),children:"Update your account password"})]})]}),(0,a.jsx)("button",{onClick:j,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),N()},className:"p-6 space-y-6",children:[n&&(0,a.jsx)("div",{className:"rounded-lg p-3",children:(0,a.jsx)("p",{className:"".concat(sC.className," text-center text-red-400 text-sm"),children:n})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sC.className," block text-sm font-medium text-gray-200 mb-2"),children:"Old Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:o?"text":"password",name:"oldPassword",value:g.oldPassword,onChange:p,className:"".concat(sA.className," w-full px-4 py-3 pr-12 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm"),placeholder:"Enter your old password",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>d(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:o?(0,a.jsx)(sj.A,{className:"w-5 h-5"}):(0,a.jsx)(v.A,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sC.className," block text-sm font-medium text-gray-200 mb-2"),children:"New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:x?"text":"password",name:"newPassword",value:g.newPassword,onChange:p,className:"".concat(sA.className," w-full px-4 py-3 pr-12 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm"),placeholder:"Enter your new password",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>m(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:x?(0,a.jsx)(sj.A,{className:"w-5 h-5"}):(0,a.jsx)(v.A,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sC.className," block text-sm font-medium text-gray-200 mb-2"),children:"Confirm Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:h?"text":"password",name:"confirmPassword",value:g.confirmPassword,onChange:p,className:"".concat(sA.className," w-full px-4 py-3 pr-12 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm"),placeholder:"Confirm your new password",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>u(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:h?(0,a.jsx)(sj.A,{className:"w-5 h-5"}):(0,a.jsx)(v.A,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("button",{type:"submit",disabled:r||!g.oldPassword||!g.newPassword||!g.confirmPassword,className:"".concat(sA.className," w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"),children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{className:"w-4 h-4 animate-spin"}),"Changing Password..."]}):"Change Password"})]}),(0,a.jsx)("div",{className:"flex items-center justify-end gap-4 p-6 border-t border-white/10",children:(0,a.jsx)("button",{onClick:j,className:"".concat(sA.className," px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-all duration-200"),children:"Cancel"})})]})]})},sT=e=>{let{show:s,onClose:t,personalDetails:r,setPersonalDetails:c,profile:n,setProfile:i,saving:o,setSaving:d}=e,[x,m]=(0,l.useState)(!1),[h,u]=(0,l.useState)(!1),g=async()=>{if(n){if(!r.ownerName.trim()||!r.email.trim()||!r.phone.trim()||!r.accountHolder.trim())return void eh.Ay.error("Please fill all required fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email))return void eh.Ay.error("Please enter a valid email address");if(r.phone.length<10)return void eh.Ay.error("Please enter a valid phone number");try{d(!0);let e=await (0,eU._O)(r);e.success?(i(e=>e?{...e,...r}:e),eh.Ay.success("Personal details updated successfully"),t()):eh.Ay.error(e.message||"Failed to update personal details")}catch(e){console.error("Error updating personal details:",e),eh.Ay.error("Failed to update personal details")}finally{d(!1)}}};return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black/95 border border-gray-500/30 rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"".concat(sh().className," text-2xl text-white"),children:"Edit Personal Details"}),(0,a.jsx)("button",{onClick:t,disabled:o,className:"text-gray-400 hover:text-white transition-colors disabled:opacity-50",children:(0,a.jsx)(Y.A,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sp().className," text-gray-400 text-sm block mb-2"),children:"Full Name *"}),(0,a.jsx)("input",{type:"text",value:r.ownerName,onChange:e=>c(s=>({...s,ownerName:e.target.value})),disabled:o,className:"".concat(sg().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 disabled:opacity-50")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-end gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"".concat(sp().className," text-gray-400 text-sm block mb-2"),children:"Email Address"}),(0,a.jsx)("input",{type:"email",value:r.email,disabled:!0,className:"".concat(sg().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 disabled:opacity-50")})]}),(0,a.jsx)("button",{type:"button",onClick:()=>m(!0),disabled:o,className:"".concat(sg().className," bg-green-600 hover:bg-green-500 disabled:bg-green-600/50 disabled:cursor-not-allowed rounded-xl text-white text-sm px-4 py-3 h-12 transition-all duration-300"),children:"Change"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sp().className," text-gray-400 text-sm block mb-2"),children:"Phone Number *"}),(0,a.jsx)("input",{type:"tel",value:r.phone,onChange:e=>c(s=>({...s,phone:e.target.value})),disabled:o,className:"".concat(sg().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 disabled:opacity-50")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sp().className," text-gray-400 text-sm block mb-2"),children:"Account Holder Name"}),(0,a.jsx)("input",{type:"text",value:r.accountHolder,onChange:e=>c(s=>({...s,accountHolder:e.target.value})),disabled:o,className:"".concat(sg().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 disabled:opacity-50")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-end gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"".concat(sp().className," text-gray-400 text-sm block mb-2"),children:"Password"}),(0,a.jsx)("input",{type:"text",value:"********",disabled:!0,className:"".concat(sg().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 disabled:opacity-50")})]}),(0,a.jsx)("button",{type:"button",onClick:()=>u(!0),disabled:o,className:"".concat(sg().className," bg-green-600 hover:bg-green-500 disabled:bg-green-600/50 disabled:cursor-not-allowed rounded-xl text-white text-sm px-4 py-3 h-12 transition-all duration-300"),children:"Change"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6 justify-end",children:[(0,a.jsx)("button",{onClick:t,disabled:o,className:"".concat(sg().className," bg-gray-600 text-white px-6 py-3 rounded-xl hover:bg-gray-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"),children:"Cancel"}),(0,a.jsxs)("button",{onClick:g,disabled:o,className:"".concat(sg().className," bg-white text-black px-6 py-3 rounded-xl hover:bg-gray-200 transition-all duration-300 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"),children:[(0,a.jsx)(sN.A,{className:"w-5 h-5"}),o?"Saving...":"Save Changes"]})]})]})}),h&&(0,a.jsx)(sD,{onClose:()=>u(!1)}),x&&(0,a.jsx)(sk,{currentEmail:r.email,onClose:()=>m(!1),onEmailChanged:e=>{c(s=>({...s,email:e})),i(s=>s?{...s,email:e}:s),m(!1)}})]}):null};var sP=t(80299),sI=t.n(sP),sE=t(19749),sL=t.n(sE),sR=t(22387),sF=t.n(sR);let sM=e=>{let{show:s,onClose:t,profile:l,docs:r}=e;return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black/95 border border-gray-500/30 rounded-2xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"".concat(sI().className," text-2xl text-white"),children:"KYC Documents"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)(Y.A,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(so.A,{className:"w-5 h-5 text-blue-400"}),(0,a.jsx)("h3",{className:"".concat(sL().className," text-white"),children:"Aadhaar Card"})]}),(0,a.jsxs)("p",{className:"".concat(sF().className," text-gray-400"),children:["Number: ",l.aadhaar]}),(0,a.jsx)("div",{className:"bg-white/5 rounded-xl p-4 aspect-video flex items-center justify-center",children:l.aadhaarUrl?(0,a.jsx)("img",{src:r.aadhaarUrl,alt:"Aadhaar Document",className:"max-w-full max-h-full object-contain rounded-lg"}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(sd.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"".concat(sF().className," text-gray-400"),children:"No document"})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(sd.A,{className:"w-5 h-5 text-green-400"}),(0,a.jsx)("h3",{className:"".concat(sL().className," text-white"),children:"PAN Card"})]}),(0,a.jsxs)("p",{className:"".concat(sF().className," text-gray-400"),children:["Number: ",l.pan]}),(0,a.jsx)("div",{className:"bg-white/5 rounded-xl p-4 aspect-video flex items-center justify-center",children:l.panUrl?(0,a.jsx)("img",{src:r.panUrl,alt:"PAN Document",className:"max-w-full max-h-full object-contain rounded-lg"}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(sd.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"".concat(sF().className," text-gray-400"),children:"No document"})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(k.A,{className:"w-5 h-5 text-purple-400"}),(0,a.jsx)("h3",{className:"".concat(sL().className," text-white"),children:"Owner Photo"})]}),(0,a.jsx)("p",{className:"".concat(sF().className," text-gray-400"),children:"Profile Picture"}),(0,a.jsx)("div",{className:"bg-white/5 rounded-xl p-4 aspect-video flex items-center justify-center",children:l.ownerPhotoUrl?(0,a.jsx)("img",{src:r.ownerPhotoUrl,alt:"Owner Photo",className:"max-w-full max-h-full object-contain rounded-lg"}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(k.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"".concat(sF().className," text-gray-400"),children:"No photo"})]})})]})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("button",{onClick:t,className:"".concat(sL().className," bg-gray-600 text-white px-6 py-3 rounded-xl hover:bg-gray-700 transition-all duration-300"),children:"Close"})})]})}):null};var s_=t(90972),sO=t.n(s_),sB=t(57286),sU=t.n(sB),sV=t(37262),sz=t.n(sV);let sW=e=>{let{show:s,onClose:t,bankDetails:r,setBankDetails:c,profile:n,setProfile:i,saving:o,setSaving:d}=e;(0,l.useEffect)(()=>{s&&n&&c({bankName:n.bankName||"",accountNumber:n.accountNumber||"",ifsc:n.ifsc||"",accountHolder:n.accountHolder||n.ownerName||""})},[s,n,c]);let x=async()=>{if(n){if(!r.bankName.trim()||!r.accountNumber.trim()||!r.ifsc.trim()||!r.accountHolder.trim())return void eh.Ay.error("Please fill all bank details fields");if(11!==r.ifsc.length)return void eh.Ay.error("IFSC code must be 11 characters long");if(r.accountNumber.length<9||r.accountNumber.length>18)return void eh.Ay.error("Please enter a valid account number");try{d(!0);let e=await (0,eU._O)(r);e.success?(i(e=>e?{...e,bankName:r.bankName,accountNumber:r.accountNumber,ifsc:r.ifsc,accountHolder:r.accountHolder}:e),eh.Ay.success("Bank details updated successfully"),t()):eh.Ay.error(e.message||"Failed to update bank details")}catch(e){console.error("Error updating bank details:",e),eh.Ay.error("Failed to update bank details")}finally{d(!1)}}},m=()=>{o||(n&&c({bankName:n.bankName||"",accountNumber:n.accountNumber||"",ifsc:n.ifsc||"",accountHolder:n.accountHolder||n.ownerName||""}),t())};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black/95 border border-gray-500/30 rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"".concat(sO().className," text-2xl text-white"),children:[(null==n?void 0:n.bankName)?"Edit":"Add"," Bank Details"]}),(0,a.jsx)("button",{onClick:m,disabled:o,className:"text-gray-400 hover:text-white transition-colors disabled:opacity-50",children:(0,a.jsx)(Y.A,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sz().className," text-gray-400 text-sm block mb-2"),children:"Account Holder Name *"}),(0,a.jsx)("input",{type:"text",value:r.accountHolder,onChange:e=>c(s=>({...s,accountHolder:e.target.value})),disabled:o,placeholder:"Enter account holder name",className:"".concat(sU().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 disabled:opacity-50")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sz().className," text-gray-400 text-sm block mb-2"),children:"Bank Name *"}),(0,a.jsx)("input",{type:"text",value:r.bankName,onChange:e=>c(s=>({...s,bankName:e.target.value})),disabled:o,placeholder:"Enter your bank name",className:"".concat(sU().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 disabled:opacity-50")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sz().className," text-gray-400 text-sm block mb-2"),children:"Account Number *"}),(0,a.jsx)("input",{type:"text",value:r.accountNumber,onChange:e=>c(s=>({...s,accountNumber:e.target.value})),disabled:o,placeholder:"Enter your account number",className:"".concat(sU().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 disabled:opacity-50")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(sz().className," text-gray-400 text-sm block mb-2"),children:"IFSC Code *"}),(0,a.jsx)("input",{type:"text",value:r.ifsc,onChange:e=>c(s=>({...s,ifsc:e.target.value.toUpperCase()})),disabled:o,placeholder:"Enter IFSC code",maxLength:11,className:"".concat(sU().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 disabled:opacity-50")}),(0,a.jsxs)("p",{className:"".concat(sz().className," text-gray-500 text-xs mt-1"),children:["Current: ",r.ifsc.length,"/11 characters"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6 justify-end",children:[(0,a.jsx)("button",{onClick:m,disabled:o,className:"".concat(sU().className," bg-gray-600 text-white px-6 py-3 rounded-xl hover:bg-gray-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"),children:"Cancel"}),(0,a.jsxs)("button",{onClick:x,disabled:o,className:"".concat(sU().className," bg-white text-black px-6 py-3 rounded-xl hover:bg-gray-200 transition-all duration-300 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"),children:[(0,a.jsx)(sN.A,{className:"w-5 h-5"}),o?"Saving...":((null==n?void 0:n.bankName)?"Update":"Add")+" Details"]})]})]})}):null},sH=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",sG=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e?e.length<=s?e:e.slice(0,s)+"*".repeat(e.length-s):"Not provided"},sY=()=>{let[e,s]=(0,l.useState)(!1),[t,r]=(0,l.useState)(!1),[c,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)(null),[d,x]=(0,l.useState)({ownerName:"",phone:"",email:"",accountHolder:""}),[m,h]=(0,l.useState)({bankName:"",accountNumber:"",ifsc:"",accountHolder:""}),[u,g]=(0,l.useState)(!0),[b,p]=(0,l.useState)(!1),[N,j]=(0,l.useState)([]);async function y(){try{g(!0);let e=await (0,eU.XQ)();console.log("Full API Response:",e),console.log("Response data:",e.data);let s=e.data;o(s),j(e),console.log("Profile Data:",s),h({bankName:(null==s?void 0:s.bankName)||"",accountNumber:(null==s?void 0:s.accountNumber)||"",ifsc:(null==s?void 0:s.ifsc)||"",accountHolder:(null==s?void 0:s.accountHolder)||(null==s?void 0:s.ownerName)||""}),x({ownerName:(null==s?void 0:s.ownerName)||"",phone:(null==s?void 0:s.phone)||"",email:(null==s?void 0:s.email)||"",accountHolder:(null==s?void 0:s.accountHolder)||(null==s?void 0:s.ownerName)||""}),console.log("Mapped Bank Details:",{bankName:null==s?void 0:s.bankName,accountNumber:null==s?void 0:s.accountNumber,ifsc:null==s?void 0:s.ifsc,accountHolder:null==s?void 0:s.accountHolder})}catch(e){console.error("Error fetching owner profile:",e),eh.Ay.error("Failed to load profile data")}finally{g(!1)}}return((0,l.useEffect)(()=>{y()},[]),u)?(0,a.jsx)(eV,{}):i?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(e_().className," text-3xl text-white mb-2"),children:"My Account"}),(0,a.jsx)("p",{className:"".concat(eB().className," text-gray-400"),children:"Manage your profile and account settings"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)(e3,{profile:i,docs:N}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsx)(eQ,{profile:i,onEdit:()=>s(!0),saving:b}),(0,a.jsx)(st,{profile:i,onEdit:()=>r(!0),saving:b}),(0,a.jsx)(sx,{profile:i,onView:()=>n(!0)})]})]}),(0,a.jsx)(sT,{show:e,onClose:()=>s(!1),personalDetails:d,setPersonalDetails:x,profile:i,setProfile:o,saving:b,setSaving:p}),(0,a.jsx)(sW,{show:t,onClose:()=>r(!1),bankDetails:m,setBankDetails:h,profile:i,setProfile:o,saving:b,setSaving:p}),(0,a.jsx)(sM,{show:c,onClose:()=>n(!1),docs:N,profile:i})]})}):(0,a.jsx)(ez,{onRetry:y})};var sq=t(5875),sK=t.n(sq),sX=t(30909),sQ=t.n(sX),s$=t(14738),sJ=t(39785),sZ=t(72713),s0=t(55868),s4=t(61432),s2=t(34835),s3=t(34540),s1=t(35695),s5=t(33208);let s6=e=>{let{activeTab:s,setActiveTab:t}=e,l=[{id:"theaters",label:"My Theaters",icon:eP.A},{id:"screens",label:"Screens",icon:s$.A},{id:"shows",label:"Shows & Pricing",icon:D.A},{id:"bookings",label:"Bookings",icon:D.A},{id:"wallet",label:"Wallet",icon:sJ.A},{id:"analytics",label:"Analytics",icon:sZ.A},{id:"revenue",label:"Revenue",icon:s0.A},{id:"coupons",label:"Coupons",icon:s4.A},{id:"account",label:"My Account",icon:k.A}],r=(0,s3.wA)(),c=(0,s1.useRouter)(),n=async()=>{try{await r((0,s5.y4)()).unwrap(),console.log("Logged out successfully"),c.push("/login")}catch(e){console.error("Logout failed:",e)}};return(0,a.jsx)("div",{className:"fixed left-0 top-0 h-full w-64 bg-black/95 backdrop-blur-sm border-r border-gray-500/30 z-50",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-500/30",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center",children:(0,a.jsx)(eP.A,{className:"w-6 h-6 text-black"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"".concat(sK().className," text-white text-lg"),children:"Owner Panel"}),(0,a.jsx)("p",{className:"".concat(sQ().className," text-gray-400 text-sm"),children:"Dashboard"})]})]})}),(0,a.jsx)("div",{className:"flex-1 p-4 space-y-2",children:l.map(e=>{let l=e.icon,r=s===e.id;return(0,a.jsxs)("button",{onClick:()=>t(e.id),className:"\n                  w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300\n                  ".concat(r?"bg-white text-black":"text-gray-300 hover:bg-white/10 hover:text-white","\n                "),children:[(0,a.jsx)(l,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"".concat(sQ().className),children:e.label})]},e.id)})}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-500/30",children:(0,a.jsxs)("button",{onClick:n,className:"\n              ".concat(sQ().className," w-full flex items-center gap-3 px-4 py-3 rounded-xl\n              text-red-400 hover:bg-red-500/20 transition-all duration-300\n            "),children:[(0,a.jsx)(s2.A,{className:"w-5 h-5"}),"Logout"]})})]})})};var s8=t(47440),s9=t(35169),s7=t(17580),te=t(54653),ts=t(13052),tt=t(70304),ta=t.n(tt),tl=t(10052),tr=t.n(tl);let tc=e=>{let{theaters:s,isLoading:t,onTheaterSelect:l}=e;return t?(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"h-16 bg-gray-600 rounded-xl"})},e))})}):0===s.length?(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-12 text-center",children:[(0,a.jsx)(m.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"".concat(ta().className," text-xl text-white mb-2"),children:"No theaters found"}),(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400"),children:"You need to add theaters first before managing screens"})]}):(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("h2",{className:"".concat(ta().className," text-lg text-white mb-4"),children:"Select Theater"}),(0,a.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,a.jsxs)("div",{onClick:()=>l(e),className:"flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-xl transition-all duration-300 cursor-pointer group border border-transparent hover:border-gray-500/30",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(e.isActive?"bg-green-500/20":"bg-orange-500/20"),children:(0,a.jsx)(m.A,{className:"w-6 h-6 ".concat(e.isActive?"text-green-400":"text-orange-400")})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,a.jsx)("h3",{className:"".concat(ta().className," text-white text-lg truncate"),children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isActive?"bg-green-400":"bg-orange-400")}),(0,a.jsx)("span",{className:"".concat(tr().className," text-xs ").concat(e.isActive?"text-green-400":"text-orange-400"),children:e.isActive?"Active":"Inactive"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsxs)("span",{className:"".concat(tr().className," text-sm truncate"),children:[e.city,", ",e.state]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-xs text-gray-400"),children:"Screens"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-sm text-white"),children:e.screens||0}),(0,a.jsx)("p",{className:"".concat(ta().className," text-sm text-white")})]}),(0,a.jsx)(ts.A,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]})]},e._id))})]})},tn={BASE:"/owner/screens",BY_THEATER_ID:e=>"/owner/screens/theater/".concat(e),STATS:e=>"/owner/screens/stats/".concat(e),BY_ID:e=>"/owner/screens/".concat(e)},ti=async e=>(await M.A.post(tn.BASE,e)).data,to=async e=>(await M.A.get(tn.BY_THEATER_ID(e))).data,td=async e=>(await M.A.get(tn.STATS(e))).data,tx=async e=>(await M.A.patch(tn.BY_ID(e))).data,tm=async e=>(await M.A.delete(tn.BY_ID(e))).data,th=async(e,s)=>(await M.A.put(tn.BY_ID(e),s)).data,tu=e=>{let{theater:s,onEditScreen:t,onViewScreen:r,refreshTrigger:c,searchQuery:n=""}=e,[i,o]=(0,l.useState)([]),[d,x]=(0,l.useState)(!0);(0,l.useEffect)(()=>{m()},[s._id,c]);let m=async()=>{try{x(!0);let e=await to(s._id);o(e.data)}catch(e){console.error("Error fetching screens:",e)}finally{x(!1)}},u=(0,l.useMemo)(()=>n?i.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())):i,[i,n]),g=async(e,s)=>{try{let t=s?"disable":"enable",a=t[0].toUpperCase()+t.slice(1);if(!await (0,T.f)({title:"".concat(a," Screen?"),message:"Are you sure you want to ".concat(t," this screen?"),confirmText:a,cancelText:"Cancel"}))return;await tx(e),m(),eh.Ay.success(s?"Screen successfully disabled":"Screen successfully activated")}catch(e){if(e.response.data.includes("Please enable the theater first"))return void eh.Ay.error(e.response.data);console.error("Error toggling screen status:",e),eh.Ay.error("Failed to toggle screen status")}},b=async e=>{try{if(!await (0,T.f)({title:"Delete Screen?",message:"Are you sure you want to delete this screen? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel"}))return;await tm(e),eh.Ay.success("Screen deleted successfully"),m()}catch(e){var s,t;console.error("Error deleting screen:",e),eh.Ay.error((null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to delete screen")}};return d?(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"h-20 bg-gray-600 rounded-xl"})},e))})}):(i||(s$.A,ta().className,tr().className),(null==i?void 0:i.length)===0)?(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-12 text-center",children:[(0,a.jsx)(s$.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"".concat(ta().className," text-xl text-white mb-2"),children:"No screens found"}),(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400"),children:"Add your first screen to get started"})]}):(null==u?void 0:u.length)===0&&n?(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-12 text-center",children:[(0,a.jsx)(s$.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"".concat(ta().className," text-xl text-white mb-2"),children:"No screens match your search"}),(0,a.jsxs)("p",{className:"".concat(tr().className," text-gray-400 mb-4"),children:['No screens found for "',n,'"']}),(0,a.jsxs)("p",{className:"".concat(tr().className," text-gray-500 text-sm"),children:["Try adjusting your search terms or browse all ",i.length," screens"]})]}):(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[n&&(0,a.jsx)("div",{className:"mb-4 pb-4 border-b border-gray-500/30",children:(0,a.jsxs)("p",{className:"".concat(tr().className," text-gray-400 text-sm"),children:["Showing ",u.length," of ",i.length,' screens for "',n,'"']})}),(0,a.jsx)("div",{className:"space-y-3",children:null==u?void 0:u.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-xl transition-all duration-300 border border-transparent hover:border-gray-500/30",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(e.isActive?"bg-green-500/20":"bg-gray-500/20"),children:(0,a.jsx)(s$.A,{className:"w-6 h-6 ".concat(e.isActive?"text-green-400":"text-gray-400")})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,a.jsx)("h3",{className:"".concat(ta().className," text-white text-lg"),children:n?(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:e.name.replace(RegExp(n,"gi"),'<mark class="bg-yellow-400/30 text-yellow-200 px-1 rounded">$&</mark>')}}):e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isActive?"bg-green-400":"bg-gray-400")}),(0,a.jsx)("span",{className:"".concat(tr().className," text-xs ").concat(e.isActive?"text-green-400":"text-gray-400"),children:e.isActive?"Active":"Inactive"})]})]}),(0,a.jsxs)("p",{className:"".concat(tr().className," text-gray-400 text-sm"),children:[e.totalSeats," seats  ",e.layout.rows," rows \xd7"," ",e.layout.seatsPerRow," seats"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>r(e),className:"p-2 bg-blue-500/20 hover:bg-blue-500/30 rounded-lg text-blue-400 transition-all",title:"View Details",children:(0,a.jsx)(v.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>t(e),className:"p-2 bg-green-500/20 hover:bg-green-500/30 rounded-lg text-green-400 transition-all",title:"Edit Screen",children:(0,a.jsx)(f.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>g(e._id,e.isActive),className:"p-2 rounded-lg transition-all ".concat(e.isActive?"bg-orange-500/20 hover:bg-orange-500/30 text-orange-400":"bg-green-500/20 hover:bg-green-500/30 text-green-400"),title:e.isActive?"Deactivate":"Activate",children:(0,a.jsx)(h.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>b(e._id),className:"p-2 bg-red-500/20 hover:bg-red-500/30 rounded-lg text-red-400 transition-all",title:"Delete Screen",children:(0,a.jsx)(S.A,{className:"w-4 h-4"})})]})]},e._id))}),n&&(null==u?void 0:u.length)>0&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-500/30",children:(0,a.jsxs)("p",{className:"".concat(tr().className," text-gray-500 text-center text-sm"),children:[u.length," screen",1!==u.length?"s":""," found"]})})]})};var tg=t(82292),tb=t.n(tg),tp=t(79054),tN=t.n(tp),tj=t(20787),ty=t.n(tj),tw=t(71539),tv=t(381),tf=t(65299),tk=t.n(tf);let tS=e=>{let{setupMode:s,setSetupMode:t}=e;return(0,a.jsx)("div",{className:"mb-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex bg-white/5 border border-gray-500/30 rounded-xl p-1",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>t("quickstart"),className:"".concat(tk().className," px-6 py-3 rounded-lg text-sm transition-all duration-300 flex items-center gap-2 font-medium ").concat("quickstart"===s?"bg-white text-black":"text-gray-300 hover:text-white"),children:[(0,a.jsx)(tw.A,{className:"w-4 h-4"}),"Quick Start"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>t("manual"),className:"".concat(tk().className," px-6 py-3 rounded-lg text-sm transition-all duration-300 flex items-center gap-2 font-medium ").concat("manual"===s?"bg-white text-black":"text-gray-300 hover:text-white"),children:[(0,a.jsx)(tv.A,{className:"w-4 h-4"}),"Custom Setup"]})]})})};var tA=t(27855),tC=t.n(tA),tD=t(59954),tT=t.n(tD),tP=t(80987),tI=t(57340),tE=t(6456),tL=t(1240),tR=t(2680),tF=t(38564);let tM=[{name:"Cozy Cinema",description:"Perfect for intimate screenings and art house films",icon:(0,a.jsx)(tP.A,{}),capacity:"120-180 seats",layout:[{rowLabel:"A",seatCount:12,offset:2,type:"Normal",price:120},{rowLabel:"B",seatCount:14,offset:1,type:"Normal",price:120},{rowLabel:"C",seatCount:16,offset:0,type:"Normal",price:140},{rowLabel:"D",seatCount:16,offset:0,type:"Premium",price:180},{rowLabel:"E",seatCount:14,offset:1,type:"Premium",price:200}],aisles:{vertical:[{id:"v1",position:7,width:1}],horizontal:[{id:"h1",afterRow:2,width:1}]}},{name:"Grand Auditorium",description:"Classic theater experience with premium amenities",icon:(0,a.jsx)(tI.A,{}),capacity:"280-350 seats",layout:[{rowLabel:"A",seatCount:16,offset:3,type:"Normal",price:150},{rowLabel:"B",seatCount:18,offset:2,type:"Normal",price:150},{rowLabel:"C",seatCount:20,offset:1,type:"Normal",price:170},{rowLabel:"D",seatCount:22,offset:0,type:"Premium",price:200},{rowLabel:"E",seatCount:22,offset:0,type:"Premium",price:220},{rowLabel:"F",seatCount:20,offset:1,type:"VIP",price:300},{rowLabel:"G",seatCount:18,offset:2,type:"VIP",price:320}],aisles:{vertical:[{id:"v1",position:10,width:1}],horizontal:[{id:"h1",afterRow:3,width:1}]}},{name:"Mega Multiplex",description:"Large-scale entertainment with luxury seating",icon:(0,a.jsx)(tE.A,{}),capacity:"450-600 seats",layout:[{rowLabel:"A",seatCount:20,offset:4,type:"Normal",price:180},{rowLabel:"B",seatCount:22,offset:3,type:"Normal",price:180},{rowLabel:"C",seatCount:24,offset:2,type:"Normal",price:200},{rowLabel:"D",seatCount:26,offset:1,type:"Premium",price:250},{rowLabel:"E",seatCount:28,offset:0,type:"Premium",price:280},{rowLabel:"F",seatCount:28,offset:0,type:"Premium",price:280},{rowLabel:"G",seatCount:26,offset:1,type:"VIP",price:400},{rowLabel:"H",seatCount:24,offset:2,type:"VIP",price:450},{rowLabel:"I",seatCount:20,offset:4,type:"VIP",price:500}],aisles:{vertical:[{id:"v1",position:12,width:1}],horizontal:[{id:"h1",afterRow:4,width:1},{id:"h2",afterRow:6,width:1}]}},{name:"CinemaScope Elite",description:"Premium wide-screen experience with curved seating",icon:(0,a.jsx)(tL.A,{}),capacity:"320-420 seats",layout:[{rowLabel:"A",seatCount:14,offset:5,type:"Normal",price:300},{rowLabel:"B",seatCount:16,offset:4,type:"Normal",price:320},{rowLabel:"C",seatCount:18,offset:3,type:"Normal",price:340},{rowLabel:"D",seatCount:20,offset:2,type:"Premium",price:400},{rowLabel:"E",seatCount:22,offset:1,type:"Premium",price:450},{rowLabel:"F",seatCount:24,offset:0,type:"Premium",price:500},{rowLabel:"G",seatCount:22,offset:1,type:"VIP",price:600},{rowLabel:"H",seatCount:20,offset:2,type:"VIP",price:650}],aisles:{vertical:[{id:"v1",position:10,width:1}],horizontal:[{id:"h1",afterRow:4,width:1}]}},{name:"Platinum Lounge",description:"Ultra-luxury recliner experience with premium service",icon:(0,a.jsx)(tR.A,{}),capacity:"60-100 seats",layout:[{rowLabel:"A",seatCount:8,offset:2,type:"VIP",price:800},{rowLabel:"B",seatCount:10,offset:1,type:"VIP",price:750},{rowLabel:"C",seatCount:12,offset:0,type:"VIP",price:700},{rowLabel:"D",seatCount:12,offset:0,type:"VIP",price:650},{rowLabel:"E",seatCount:10,offset:1,type:"VIP",price:600}],aisles:{vertical:[{id:"v1",position:6,width:1}],horizontal:[{id:"h1",afterRow:2,width:1}]}},{name:"Open Air Theater",description:"Spacious outdoor-style seating with wide aisles",icon:(0,a.jsx)(tF.A,{}),capacity:"180-240 seats",layout:[{rowLabel:"A",seatCount:12,offset:2,type:"Normal",price:200},{rowLabel:"B",seatCount:14,offset:1,type:"Normal",price:200},{rowLabel:"C",seatCount:16,offset:0,type:"Normal",price:220},{rowLabel:"D",seatCount:16,offset:0,type:"Premium",price:280},{rowLabel:"E",seatCount:14,offset:1,type:"Premium",price:300},{rowLabel:"F",seatCount:12,offset:2,type:"VIP",price:400}],aisles:{vertical:[{id:"v1",position:8,width:1}],horizontal:[{id:"h1",afterRow:2,width:1}]}}],t_=e=>{let{onApplyTemplate:s}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"".concat(tC().className," text-2xl text-white mb-2"),children:"Choose Your Screen Layout"}),(0,a.jsx)("p",{className:"".concat(tT().className," text-gray-400"),children:"Select a pre-designed layout that matches your theater's style and capacity"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:tM.map((e,t)=>(0,a.jsx)("button",{type:"button",onClick:()=>s(t),className:"p-6 bg-white/5 hover:bg-white/10 border border-gray-500/30 hover:border-white/30 rounded-2xl text-left transition-all duration-300 group",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"text-4xl text-white mb-4",children:e.icon}),(0,a.jsx)("h4",{className:"".concat(tC().className," text-white text-lg font-bold group-hover:text-blue-400 transition-colors mb-2"),children:e.name}),(0,a.jsx)("p",{className:"".concat(tT().className," text-gray-400 text-sm mb-3 leading-relaxed"),children:e.description}),(0,a.jsx)("div",{className:"inline-flex items-center px-3 py-1 bg-blue-600/20 border border-blue-500/30 rounded-full",children:(0,a.jsx)("span",{className:"".concat(tT().className," text-blue-400 text-xs font-medium"),children:e.capacity})})]})},t))})]})};var tO=t(3048),tB=t.n(tO),tU=t(72445),tV=t.n(tU),tz=t(34302),tW=t(36870),tH=t.n(tW);let tG=e=>{let{rowsDefs:s,setRowsDefs:t}=e,l=(e,s,a)=>{t(t=>{let l=[...t];return l[e]={...l[e],[s]:a},l})};return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[80px_80px_80px_100px_100px_50px] gap-2 text-xs text-gray-400 font-medium",children:[(0,a.jsx)("span",{children:"Row"}),(0,a.jsx)("span",{children:"Offset"}),(0,a.jsx)("span",{children:"Seats"}),(0,a.jsx)("span",{children:"Type"}),(0,a.jsx)("span",{children:"Price ()"}),(0,a.jsx)("span",{children:"Del"})]}),s.map((e,s)=>(0,a.jsxs)("div",{className:"grid grid-cols-[80px_80px_80px_100px_100px_50px] gap-2 items-center",children:[(0,a.jsx)("input",{value:e.rowLabel,onChange:e=>l(s,"rowLabel",e.target.value),className:"".concat(tH().className," px-2 py-2 bg-white/10 border border-gray-500/30 rounded text-center text-white focus:outline-none focus:border-white/50"),maxLength:2}),(0,a.jsx)("input",{type:"number",min:0,value:e.offset,onChange:e=>l(s,"offset",Number(e.target.value)),className:"".concat(tH().className," px-2 py-2 bg-white/10 border border-gray-500/30 rounded text-center text-white focus:outline-none focus:border-white/50")}),(0,a.jsx)("input",{type:"number",min:1,value:e.seatCount,onChange:e=>l(s,"seatCount",Number(e.target.value)),className:"".concat(tH().className," px-2 py-2 bg-white/10 border border-gray-500/30 rounded text-center text-white focus:outline-none focus:border-white/50")}),(0,a.jsxs)("select",{value:e.type,onChange:e=>l(s,"type",e.target.value),className:"".concat(tH().className," px-2 py-2 bg-white/10 border border-gray-500/30 rounded text-white focus:outline-none focus:border-white/50"),children:[(0,a.jsx)("option",{value:"Normal",children:"Normal"}),(0,a.jsx)("option",{value:"Premium",children:"Premium"}),(0,a.jsx)("option",{value:"VIP",children:"VIP"})]}),(0,a.jsx)("input",{type:"number",min:0,value:e.price,onChange:e=>l(s,"price",Number(e.target.value)),className:"".concat(tH().className," px-2 py-2 bg-white/10 border border-gray-500/30 rounded text-center text-white focus:outline-none focus:border-white/50")}),(0,a.jsx)("button",{type:"button",onClick:()=>{t(e=>e.filter((e,t)=>t!==s))},className:"text-red-400 hover:text-red-300 text-xs",title:"Remove Row",children:(0,a.jsx)(S.A,{})})]},s)),(0,a.jsx)("button",{type:"button",onClick:()=>{let e=String.fromCharCode(65+s.length);t(s=>[...s,{rowLabel:e,seatCount:10,offset:0,type:"Normal",price:150}])},className:"".concat(tH().className," px-4 py-2 bg-white/10 hover:bg-white/20 border border-gray-500/30 rounded-xl text-white transition-all duration-300"),children:"+ Add Row"})]})};var tY=t(92138),tq=t(91809),tK=t.n(tq),tX=t(56858),tQ=t.n(tX);let t$=e=>{let{verticalAisles:s,horizontalAisles:t,setVerticalAisles:l,setHorizontalAisles:r,maxSeatsPerRow:c,maxRows:n}=e,i=(e,t,a)=>{let r=[...s];r[e]={...r[e],[t]:a},l(r)},o=(e,s,a)=>{let l=[...t];l[e]={...l[e],[s]:a},r(l)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h3",{className:"".concat(tK().className," text-lg text-white flex items-center gap-2"),children:[(0,a.jsx)(tY.A,{className:"w-5 h-5 text-red-500"}),"Aisle Configuration"]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 border border-gray-500/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h4",{className:"".concat(tQ().className," text-white"),children:"Vertical Aisles"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{l([...s,{id:"v-aisle-".concat(Date.now()),position:Math.floor(c/2),width:1}])},className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-sm transition-colors flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3"}),"Add"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[s.map((e,t)=>(0,a.jsx)("div",{className:"bg-white/10 rounded p-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"Position"}),(0,a.jsx)("input",{type:"number",min:"1",max:c,value:e.position,onChange:e=>i(t,"position",parseInt(e.target.value)),className:"w-full mt-1 px-2 py-1 bg-white/10 border border-gray-500/30 rounded text-white text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"Width"}),(0,a.jsxs)("select",{value:e.width,onChange:e=>i(t,"width",parseInt(e.target.value)),className:"w-full mt-1 px-2 py-1 bg-white/10 border border-gray-500/30 rounded text-white text-sm",children:[(0,a.jsx)("option",{value:1,children:"1 Unit"}),(0,a.jsx)("option",{value:2,children:"2 Units"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{type:"button",onClick:()=>{l(s.filter((e,s)=>s!==t))},className:"w-full px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-sm transition-colors",children:(0,a.jsx)(S.A,{className:"w-3 h-3 mx-auto"})})})]})},e.id)),0===s.length&&(0,a.jsx)("p",{className:"".concat(tQ().className," text-gray-400 text-center py-4"),children:"No vertical aisles configured"})]})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 border border-gray-500/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h4",{className:"".concat(tQ().className," text-white"),children:"Horizontal Aisles"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{r([...t,{id:"h-aisle-".concat(Date.now()),afterRow:Math.floor(n/2),width:1}])},className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-sm transition-colors flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3"}),"Add"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[t.map((e,s)=>(0,a.jsx)("div",{className:"bg-white/10 rounded p-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"After Row"}),(0,a.jsx)("input",{type:"number",min:"1",max:n,value:e.afterRow,onChange:e=>o(s,"afterRow",parseInt(e.target.value)),className:"w-full mt-1 px-2 py-1 bg-white/10 border border-gray-500/30 rounded text-white text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-xs",children:"Width"}),(0,a.jsxs)("select",{value:e.width,onChange:e=>o(s,"width",parseInt(e.target.value)),className:"w-full mt-1 px-2 py-1 bg-white/10 border border-gray-500/30 rounded text-white text-sm",children:[(0,a.jsx)("option",{value:1,children:"1 Unit"}),(0,a.jsx)("option",{value:2,children:"2 Units"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{type:"button",onClick:()=>{r(t.filter((e,t)=>t!==s))},className:"w-full px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-sm transition-colors",children:(0,a.jsx)(S.A,{className:"w-3 h-3 mx-auto"})})})]})},e.id)),0===t.length&&(0,a.jsx)("p",{className:"".concat(tQ().className," text-gray-400 text-center py-4"),children:"No horizontal aisles configured"})]})]})]})},tJ=e=>{let{formData:s,errors:t,rowsDefs:l,setRowsDefs:r,maxCols:c,advancedLayoutJSON:n,handleInputChange:i,handleSubmit:o,isLoading:d,isFormValid:m,onClose:h,mode:u,setSetupMode:g,verticalAisles:b,horizontalAisles:p,setVerticalAisles:N,setHorizontalAisles:j}=e;return(0,a.jsxs)("form",{onSubmit:o,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"".concat(tB().className," text-lg text-white flex items-center gap-2"),children:"Basic Information"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tV().className," text-sm text-gray-300 mb-2 block"),children:"Screen Name *"}),(0,a.jsx)("input",{type:"text",value:s.name,onChange:e=>i("name",e.target.value),className:"".concat(tV().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300"),placeholder:"e.g., Screen 1, IMAX Hall, Premium Theater",maxLength:50}),t.name&&(0,a.jsx)("p",{className:"text-red-400 text-xs mt-1",children:t.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tV().className," text-sm text-gray-300 mb-2 block"),children:"Screen Type"}),(0,a.jsxs)("select",{value:s.screenType||"",onChange:e=>i("screenType",e.target.value),className:"".concat(tV().className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300"),children:[(0,a.jsx)("option",{value:"",children:"Select Screen Type"}),(0,a.jsx)("option",{value:"Standard",children:"Standard"}),(0,a.jsx)("option",{value:"IMAX",children:"IMAX"}),(0,a.jsx)("option",{value:"4DX",children:"4DX"}),(0,a.jsx)("option",{value:"Dolby Cinema",children:"Dolby Cinema"}),(0,a.jsx)("option",{value:"IMAX 3D",children:"IMAX 3D"}),(0,a.jsx)("option",{value:"Premium",children:"Premium"}),(0,a.jsx)("option",{value:"VIP",children:"VIP"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tV().className," text-sm text-gray-300 mb-2 block"),children:"Screen Features"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(s.features||[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{let a=[...s.features||[]];a[e]=t,i("features",a)})(t,e.target.value),className:"".concat(tV().className," flex-1 px-3 py-2 bg-white/10 border border-gray-500/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white/50"),placeholder:"e.g., Dolby Atmos, 3D, Recliner Seats"}),(0,a.jsx)("button",{type:"button",onClick:()=>{i("features",(s.features||[]).filter((e,s)=>s!==t))},className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all",children:(0,a.jsx)(S.A,{className:"w-4 h-4"})})]},t)),(0,a.jsxs)("button",{type:"button",onClick:()=>{i("features",[...s.features||[],""])},className:"".concat(tV().className," flex items-center gap-2 px-3 py-2 bg-white/10 hover:bg-white/20 border border-gray-500/30 rounded-lg text-white transition-all duration-300"),children:[(0,a.jsx)(x.A,{className:"w-4 h-4"}),"Add Feature"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"".concat(tB().className," text-lg text-white flex items-center gap-2"),children:[(0,a.jsx)(te.A,{className:"w-5 h-5"}),"Seating Layout Configuration"]}),"create"===u&&(0,a.jsxs)("button",{type:"button",onClick:()=>g("quickstart"),className:"".concat(tV().className," px-3 py-1 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/30 rounded-lg text-blue-400 transition-all duration-300 flex items-center gap-1"),children:[(0,a.jsx)(tw.A,{className:"w-3 h-3"}),"Use Presets"]})]}),(0,a.jsx)(tG,{rowsDefs:l,setRowsDefs:r}),(0,a.jsx)(t$,{verticalAisles:b,horizontalAisles:p,setVerticalAisles:N,setHorizontalAisles:j,maxSeatsPerRow:s.layout.seatsPerRow,maxRows:s.layout.rows}),(0,a.jsx)(tz.l,{advancedLayoutJSON:n,maxCols:c,showAisles:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"p-4 bg-white/5 border border-gray-500/30 rounded-xl",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"".concat(tV().className," text-gray-300 block"),children:"Total Seats"}),(0,a.jsx)("span",{className:"".concat(tB().className," text-2xl text-white font-bold"),children:s.totalSeats})]})}),(0,a.jsx)("div",{className:"p-4 bg-white/5 border border-gray-500/30 rounded-xl",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"".concat(tV().className," text-gray-300 block"),children:"Total Rows"}),(0,a.jsx)("span",{className:"".concat(tB().className," text-2xl text-white font-bold"),children:s.layout.rows})]})}),(0,a.jsx)("div",{className:"p-4 bg-white/5 border border-gray-500/30 rounded-xl",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"".concat(tV().className," text-gray-300 block"),children:"Max Seats/Row"}),(0,a.jsx)("span",{className:"".concat(tB().className," text-2xl text-white font-bold"),children:s.layout.seatsPerRow})]})})]}),(0,a.jsxs)("div",{className:"p-4 bg-white/5 border border-gray-500/30 rounded-xl",children:[(0,a.jsx)("h4",{className:"".concat(tB().className," text-white mb-3"),children:"Seat Distribution"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:["Normal","Premium","VIP"].map(e=>{let t=l.filter(s=>s.type===e).reduce((e,s)=>e+s.seatCount,0),r=s.totalSeats>0?(t/s.totalSeats*100).toFixed(1):"0";return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"".concat(tV().className," text-gray-300"),children:[e," Seats:"]}),(0,a.jsxs)("span",{className:"".concat(tV().className," text-white font-medium"),children:[t," (",r,"%)"]})]},e)})})]}),t.submit&&(0,a.jsx)("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-xl",children:(0,a.jsxs)("p",{className:"text-red-400 text-sm flex items-center gap-2",children:[(0,a.jsx)(Y.A,{className:"w-4 h-4"}),t.submit]})})]})};var tZ=t(98386);let t0=e=>{let{theater:s,onClose:t,onSuccess:r,mode:c,initialData:n}=e,[i,o]=(0,l.useState)({name:"",totalSeats:0,features:[],screenType:"",layout:{rows:0,seatsPerRow:0,advancedLayout:{rows:[]}}}),[d,x]=(0,l.useState)(!1),[m,h]=(0,l.useState)({}),[u,g]=(0,l.useState)("quickstart"),[b,p]=(0,l.useState)([{rowLabel:"A",seatCount:10,offset:0,type:"Normal",price:150},{rowLabel:"B",seatCount:12,offset:0,type:"Normal",price:150},{rowLabel:"C",seatCount:14,offset:0,type:"Premium",price:200},{rowLabel:"D",seatCount:14,offset:0,type:"Premium",price:200},{rowLabel:"E",seatCount:16,offset:0,type:"VIP",price:300}]),[N,j]=(0,l.useState)([]),[y,w]=(0,l.useState)([]),v=(0,l.useMemo)(()=>0===b.length?0:Math.max(...b.map(e=>e.offset+e.seatCount)),[b]),f=(0,l.useMemo)(()=>({rows:b.map(e=>({rowLabel:e.rowLabel,offset:e.offset,seats:Array.from({length:e.seatCount},(s,t)=>({col:t+1,id:"".concat(e.rowLabel).concat(t+1),type:e.type,price:e.price}))})),aisles:{vertical:N,horizontal:y}}),[b,N,y]),k=(0,l.useMemo)(()=>b.reduce((e,s)=>e+s.seatCount,0),[b]);(0,l.useEffect)(()=>{if("edit"===c&&n){var e,s,t,a,l;p((e=>{var s,t;return(null==(t=e.layout)||null==(s=t.advancedLayout)?void 0:s.rows)?e.layout.advancedLayout.rows.map((e,s)=>{let t=Array.isArray(e.seats)?e.seats:[],a="Normal",l=150;return t.length>0&&t&&"object"==typeof t&&(a=t.type||"Normal",l=t.price||150),"Normal"===a&&e.type&&(a=e.type),150===l&&e.price&&(l=e.price),{rowLabel:e.rowLabel||String.fromCharCode(65+s),seatCount:t.length,offset:e.offset||0,type:a,price:l}}):[]})(n));let r=null==(s=n.layout)||null==(e=s.advancedLayout)?void 0:e.aisles;r?(j(r.vertical),w(r.horizontal)):(j([]),w([]));let c=(null==(t=n.layout)?void 0:t.advancedLayout)||{rows:[]};o({name:n.name||"",features:n.features||[],screenType:n.screenType||"Standard",totalSeats:n.totalSeats||0,layout:{rows:(null==(a=n.layout)?void 0:a.rows)||0,seatsPerRow:(null==(l=n.layout)?void 0:l.seatsPerRow)||0,advancedLayout:{...c,aisles:c.aisles||{vertical:[],horizontal:[]}}}}),g("manual")}},[c,n]),(0,l.useEffect)(()=>{o(e=>({...e,totalSeats:k,layout:{...e.layout,rows:b.length,seatsPerRow:b.length>0?Math.max(...b.map(e=>e.seatCount)):0,advancedLayout:f}}))},[k,b,f]);let S=async e=>{e.preventDefault();try{let e=tZ.u7.parse(i);x(!0),h({}),"create"===c?(console.log({...e,theater:s}),await ti({...e,theater:s}),r(),eh.Ay.success("Screen created successfully")):"edit"===c&&(null==n?void 0:n._id)&&(console.log(n._id,{name:e.name,totalSeats:e.totalSeats,features:e.features,screenType:e.screenType,layout:e.layout}),await th(n._id,{name:e.name,totalSeats:e.totalSeats,features:e.features,screenType:e.screenType,layout:e.layout}),r(),eh.Ay.success("Screen updated successfully"))}catch(e){if(e.errors){let s={};e.errors.forEach(e=>{s[e.path.join(".")]=e.message}),h(s),eh.Ay.error("Please fix the validation errors");return}{var a,l;console.error("Error saving screen:",e);let s=(null==e||null==(l=e.response)||null==(a=l.data)?void 0:a.message)||"Network error. Please try again.";h({submit:s}),eh.Ay.error(s)}}finally{t(),x(!1)}},A=()=>i.name.trim().length>0&&i.totalSeats>0&&b.length>0;return(0,a.jsxs)("div",{className:"fixed inset-0 z-999 flex items-start justify-center pt-10 pb-10",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,a.jsx)("div",{className:"relative w-full pb-5 max-w-6xl mx-4 h-[90vh] max-h-[900px] min-h-[700px]",children:(0,a.jsxs)("div",{className:"backdrop-blur-sm bg-black/90 rounded-3xl border border-gray-500/30 shadow-2xl h-full flex flex-col",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-6 pb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center",children:(0,a.jsx)(s$.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"".concat(tb().className," text-2xl text-white"),children:"create"===c?"Create New Screen":"Edit Screen"}),(0,a.jsxs)("p",{className:"".concat(ty().className," text-gray-400"),children:[null==s?void 0:s.name,"  ",null==s?void 0:s.city]})]})]}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition-colors duration-200",children:(0,a.jsx)(Y.A,{className:"w-6 h-6 text-white"})})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6",children:["create"===c&&(0,a.jsx)(tS,{setupMode:u,setSetupMode:g}),"quickstart"===u&&"create"===c?(0,a.jsx)(t_,{onApplyTemplate:e=>{let s=tM[e];p(s.layout),s.aisles?(j(s.aisles.vertical||[]),w(s.aisles.horizontal||[])):(j([]),w([])),g("manual"),i.name.trim()||o(e=>({...e,name:"".concat(s.name," Hall")}))}}):(0,a.jsx)(tJ,{formData:i,errors:m,rowsDefs:b,setRowsDefs:p,maxCols:v,advancedLayoutJSON:f,handleInputChange:(e,s)=>{o(t=>({...t,[e]:s})),m[e]&&h(s=>({...s,[e]:""}))},handleSubmit:S,isLoading:d,isFormValid:A,onClose:t,mode:c,setSetupMode:g,verticalAisles:N,horizontalAisles:y,setVerticalAisles:j,setHorizontalAisles:w})]}),"manual"===u&&(0,a.jsx)("div",{className:"flex-shrink-0 p-6 pt-4 border-t border-gray-500/30",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"".concat(tN().className," flex-1 py-3 rounded-xl border border-gray-500/30 text-gray-300 hover:bg-white/10 transition-all duration-300 font-medium"),children:"Cancel"}),(0,a.jsx)("button",{onClick:S,disabled:d||!A(),className:"".concat(tN().className," flex-1 bg-white text-black py-3 rounded-xl hover:bg-gray-200 transition-all duration-300 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"),children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{className:"w-4 h-4 animate-spin"}),"create"===c?"Creating Screen...":"Saving Changes..."]}):"create"===c?"Create Screen":"Save Changes"})]})})]})})]})};var t4=t(38221),t2=t.n(t4),t3=t(13947),t1=t.n(t3),t5=t(84100),t6=t.n(t5);let t8=e=>{let{screen:s,theater:t,onClose:r,onEdit:c}=e,n=(0,l.useMemo)(()=>{let e={};return s.layout.advancedLayout.rows.forEach(s=>{s.seats.forEach(s=>{e[s.type]||(e[s.type]={count:0,price:s.price}),e[s.type].count++})}),e},[s.layout.advancedLayout.rows]),i=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-start justify-center pt-8 pb-8",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:r}),(0,a.jsx)("div",{className:"relative w-full pb-5 max-w-7xl mx-4 h-[92vh] max-h-[950px] min-h-[700px]",children:(0,a.jsxs)("div",{className:"backdrop-blur-sm bg-black/90 rounded-3xl border border-gray-500/30 shadow-2xl h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 p-6 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center",children:(0,a.jsx)(s$.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"".concat(t2().className," text-2xl text-white"),children:s.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("p",{className:"".concat(t6().className," text-gray-400"),children:[null==t?void 0:t.name,"  ",null==t?void 0:t.city]})]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors duration-200",children:(0,a.jsx)(Y.A,{className:"w-6 h-6 text-white"})})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(s.isActive?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"),children:s.isActive?"Active":"Inactive"}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:["ID: ",s._id.slice(-8)]})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white/5 rounded-2xl p-6 border border-gray-500/20",children:[(0,a.jsxs)("h3",{className:"".concat(t1().className," text-lg text-white mb-4 flex items-center gap-2"),children:[(0,a.jsx)(s7.A,{className:"w-5 h-5"}),"Basic Information"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(t6().className," text-gray-400 text-sm"),children:"Total Seats"}),(0,a.jsx)("p",{className:"".concat(t1().className," text-white text-xl"),children:s.totalSeats.toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(t6().className," text-gray-400 text-sm"),children:"Layout"}),(0,a.jsxs)("p",{className:"".concat(t1().className," text-white"),children:[s.layout.rows," rows \xd7 ",s.layout.seatsPerRow," max seats per row"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(t6().className," text-gray-400 text-sm"),children:"Screen Type"}),(0,a.jsx)("p",{className:"".concat(t1().className," text-white"),children:s.screenType||"Standard"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-2xl p-6 border border-gray-500/20",children:[(0,a.jsxs)("h3",{className:"".concat(t1().className," text-lg text-white mb-4 flex items-center gap-2"),children:[(0,a.jsx)(tF.A,{className:"w-5 h-5"}),"Seat Categories"]}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(n).map(e=>{let[s,t]=e;return(0,a.jsx)("div",{className:"p-4 rounded-xl border ".concat((e=>{switch(e.toLowerCase()){case"vip":return"bg-gradient-to-r from-yellow-500/20 to-amber-500/20 border-yellow-500/30 text-yellow-300";case"premium":return"bg-gradient-to-r from-blue-500/20 to-indigo-500/20 border-blue-500/30 text-blue-300";default:return"bg-gradient-to-r from-gray-500/20 to-slate-500/20 border-gray-500/30 text-gray-300"}})(s)),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(t1().className," font-medium"),children:s.charAt(0).toUpperCase()+s.slice(1)}),(0,a.jsxs)("p",{className:"".concat(t6().className," text-sm opacity-80"),children:[t.count," seats"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"".concat(t1().className," font-medium"),children:["",t.price]}),(0,a.jsx)("p",{className:"".concat(t6().className," text-xs opacity-80"),children:"per seat"})]})]})},s)})})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-2xl p-6 border border-gray-500/20",children:[(0,a.jsxs)("h3",{className:"".concat(t1().className," text-lg text-white mb-4 flex items-center gap-2"),children:[(0,a.jsx)(D.A,{className:"w-5 h-5"}),"Timeline"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(t6().className," text-gray-400 text-sm"),children:"Created"}),(0,a.jsx)("p",{className:"".concat(t6().className," text-white"),children:i(s.createdAt)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(t6().className," text-gray-400 text-sm"),children:"Last Updated"}),(0,a.jsx)("p",{className:"".concat(t6().className," text-white"),children:i(s.updatedAt)})]})]})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(tz.l,{advancedLayoutJSON:s.layout.advancedLayout,maxCols:(()=>{var e;return(null==(e=s.layout.advancedLayout)?void 0:e.rows)?Math.max(...s.layout.advancedLayout.rows.map(e=>{var s;return(e.offset||0)+((null==(s=e.seats)?void 0:s.length)||0)})):s.layout.seatsPerRow})(),showAisles:!0})})]}),(0,a.jsx)("div",{className:"flex-shrink-0 p-6 pt-4 border-t border-gray-500/30",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"".concat(t1().className," flex-1 py-3 rounded-xl border border-gray-500/30 text-gray-300 hover:bg-white/10 transition-all duration-300 font-medium"),children:"Close"}),(0,a.jsxs)("button",{onClick:()=>c(s),className:"".concat(t1().className," flex-1 bg-white text-black py-3 rounded-xl hover:bg-gray-200 transition-all duration-300 font-medium flex items-center justify-center gap-2"),children:[(0,a.jsx)(eX.A,{className:"w-4 h-4"}),"Edit Screen"]})]})})]})})]})};var t9=t(7170),t7=t.n(t9);let ae=()=>{let[e,s]=(0,l.useState)(null),[t,r]=(0,l.useState)(!1),[c,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)(!1),[d,m]=(0,l.useState)(null),[g,b]=(0,l.useState)([]),[p,N]=(0,l.useState)(!0),[j,y]=(0,l.useState)(0),[w,v]=(0,l.useState)({total:0,active:0,inactive:0,totalSeats:0}),[f,k]=(0,l.useState)("");(0,l.useEffect)(()=>{S()},[]),(0,l.useEffect)(()=>{e&&A()},[e,j]);let S=async()=>{try{N(!0);let e=await O();b(e.data.theaters||[])}catch(e){console.error("Error fetching theaters:",e)}finally{N(!1)}},A=async()=>{if(e)try{let s=await td(e._id);v({total:s.data.overview.totalScreens,active:s.data.overview.activeScreens,inactive:s.data.overview.inactiveScreens,totalSeats:s.data.overview.totalSeats})}catch(e){console.error("Error fetching screen stats:",e)}},C=e=>{o(!1),m(e),n(!0)},D=()=>{y(e=>e+1)};return(0,a.jsxs)("div",{className:"space-y-6",children:[e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("button",{onClick:()=>{s(null),k("")},className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 rounded-xl transition-all duration-300 text-white",children:[(0,a.jsx)(s9.A,{className:"w-4 h-4"}),"Back to Theaters"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(t7().className," text-3xl text-white mb-2"),children:e.name}),(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400"),children:"Manage screens and seating for this theater"})]})]}),(0,a.jsxs)("button",{onClick:()=>{r(!0)},className:"".concat(ta().className," bg-white text-black px-6 py-3 rounded-xl hover:bg-gray-200 transition-all duration-300 flex items-center gap-2 font-medium"),children:[(0,a.jsx)(x.A,{className:"w-5 h-5"}),"Add New Screen"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-sm"),children:"Total Screens"}),(0,a.jsx)("p",{className:"".concat(t7().className," text-2xl text-white mt-1"),children:w.total})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(s$.A,{className:"w-6 h-6 text-blue-400"})})]})}),(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-sm"),children:"Active Screens"}),(0,a.jsx)("p",{className:"".concat(t7().className," text-2xl text-green-400 mt-1"),children:w.active})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"w-6 h-6 text-green-400"})})]})}),(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-sm"),children:"Inactive Screens"}),(0,a.jsx)("p",{className:"".concat(t7().className," text-2xl text-orange-400 mt-1"),children:w.inactive})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"w-6 h-6 text-orange-400"})})]})}),(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-sm"),children:"Total Seats"}),(0,a.jsx)("p",{className:"".concat(t7().className," text-2xl text-purple-400 mt-1"),children:w.totalSeats})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(s7.A,{className:"w-6 h-6 text-purple-400"})})]})})]}),(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(u.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",value:f,onChange:e=>{k(e.target.value)},placeholder:"Search screens by name...",className:"".concat(ta().className," w-full pl-12 pr-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300")})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border border-gray-500/30 rounded-xl",children:[(0,a.jsx)(te.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("span",{className:"".concat(tr().className," text-gray-400 text-sm"),children:[w.total," screens"]})]})})]})}),(0,a.jsx)(tu,{theater:e,onEditScreen:C,onViewScreen:e=>{m(e),o(!0)},refreshTrigger:j,searchQuery:f})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(t7().className," text-3xl text-white mb-2"),children:"Screen Management"}),(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400"),children:"Manage your theater screens and seating configurations"})]})}),(0,a.jsx)(tc,{theaters:g,isLoading:p,onTheaterSelect:e=>{s(e)}})]}),t&&(0,a.jsx)(t0,{theater:e,onClose:()=>r(!1),onSuccess:()=>{r(!1),D()},mode:"create",initialData:null}),c&&d&&(0,a.jsx)(t0,{theater:e,onClose:()=>n(!1),onSuccess:()=>{n(!1),D()},mode:"edit",initialData:d}),i&&d&&(0,a.jsx)(t8,{screen:d,theater:e,onClose:()=>o(!1),onEdit:C})]})};var as=t(14186);let at=e=>{let{onSelect:s,onClose:t}=e,[r,c]=(0,l.useState)([]),[n,i]=(0,l.useState)(""),[o,d]=(0,l.useState)(!0);(0,l.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await O({status:"active"});c(e.data.theaters)}catch(e){console.error("Error fetching theaters:",e)}finally{d(!1)}},h=r.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.city.toLowerCase().includes(n.toLowerCase())||e.state.toLowerCase().includes(n.toLowerCase()));return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-60 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-500/30",children:[(0,a.jsx)("h2",{className:"".concat(ta().className," text-lg text-white"),children:"Select Theater"}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsx)("div",{className:"p-6 border-b border-gray-500/30",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search theaters...",value:n,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-gray-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]})}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-96",children:o?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"space-y-3",children:[h.map(e=>(0,a.jsxs)("div",{onClick:()=>s(e),className:"flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-xl transition-all duration-300 cursor-pointer group border border-transparent hover:border-gray-500/30",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(e.isActive?"bg-green-500/20":"bg-orange-500/20"),children:(0,a.jsx)(m.A,{className:"w-6 h-6 ".concat(e.isActive?"text-green-400":"text-orange-400")})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,a.jsx)("h3",{className:"".concat(ta().className," text-white text-lg truncate"),children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isActive?"bg-green-400":"bg-orange-400")}),(0,a.jsx)("span",{className:"".concat(tr().className," text-xs ").concat(e.isActive?"text-green-400":"text-orange-400"),children:e.isActive?"Active":"Inactive"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsxs)("span",{className:"".concat(tr().className," text-sm truncate"),children:[e.city,", ",e.state]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-xs text-gray-400"),children:"Screens"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-sm text-white"),children:e.screens||0})]}),(0,a.jsx)(ts.A,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]})]},e._id)),0===h.length&&!o&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400"),children:"No theaters found matching your search."})})]})})]})})},aa={FILTER:"/owner/movies/filter"},al=async()=>(await M.A.get(aa.FILTER,{params:{isActive:!0}})).data;var ar=t(85690);let ac=e=>{let{movie:s,onSelect:t,onClose:l}=e,r=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-70 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black/95 backdrop-blur-sm border border-gray-500/30 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-500/30",children:[(0,a.jsx)("h2",{className:"".concat(ta().className," text-xl text-white"),children:"Movie Details"}),(0,a.jsx)("button",{onClick:l,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex gap-6 mb-6",children:[(0,a.jsx)("div",{className:"w-48 h-72 rounded-xl overflow-hidden bg-gray-700 flex-shrink-0",children:s.poster?(0,a.jsx)("img",{src:s.poster,alt:s.title,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(ar.A,{className:"w-16 h-16 text-gray-400"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(ta().className," text-3xl text-white mb-2"),children:s.title}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 text-sm rounded-lg font-medium",children:s.rating}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-400",children:[(0,a.jsx)(as.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"".concat(tr().className," text-sm"),children:(e=>{let s=Math.floor(e/60);return"".concat(s,"h ").concat(e%60,"m")})(s.duration)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-400",children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"".concat(tr().className," text-sm"),children:r(s.releaseDate)})]})]})]})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.genre.map((e,s)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-gray-700/50 text-gray-300 text-sm rounded-full border border-gray-600/50",children:e},s))})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-sm mb-1"),children:"Language"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-white"),children:s.language})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-sm mb-1"),children:"Director"}),(0,a.jsxs)("p",{className:"".concat(ta().className," text-white flex items-center gap-2"),children:[(0,a.jsx)(k.A,{className:"w-4 h-4"}),s.director]})]})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"".concat(ta().className," text-white text-lg mb-3"),children:"Description"}),(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-300 leading-relaxed"),children:s.description})]}),s.cast&&s.cast.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h3",{className:"".concat(ta().className," text-white text-lg mb-3 flex items-center gap-2"),children:[(0,a.jsx)(s7.A,{className:"w-5 h-5"}),"Cast"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:s.cast.map((e,s)=>(0,a.jsx)("div",{className:"p-3 bg-white/5 border border-gray-600/30 rounded-lg",children:(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-200 text-sm"),children:e})},s))})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-6 p-4 bg-white/5 rounded-xl border border-gray-600/30",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-sm mb-1"),children:"Release Date"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-white text-sm"),children:r(s.releaseDate)})]})})]})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-500/30 bg-black/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,a.jsx)("button",{onClick:l,className:"".concat(ta().className," px-6 py-3 text-gray-300 hover:text-white transition-colors"),children:"Cancel"}),(0,a.jsxs)("button",{onClick:()=>t(s),className:"".concat(ta().className," px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300 flex items-center gap-2"),children:[(0,a.jsx)(tF.A,{className:"w-4 h-4"}),"Select Movie"]})]})})]})})},an=e=>{let{onSelect:s,onClose:t}=e,[r,c]=(0,l.useState)([]),[n,i]=(0,l.useState)(""),[o,d]=(0,l.useState)(!0),[x,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await al();c(e.data.filter(e=>e.isActive))}catch(e){console.error("Error fetching movies:",e)}finally{d(!1)}},g=r.filter(e=>e.title.toLowerCase().includes(n.toLowerCase())||e.genre.some(e=>e.toLowerCase().includes(n.toLowerCase()))||e.language.toLowerCase().includes(n.toLowerCase()));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-60 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-500/30",children:[(0,a.jsx)("h2",{className:"".concat(ta().className," text-lg text-white"),children:"Select Movie"}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsx)("div",{className:"p-6 border-b border-gray-500/30",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search movies...",value:n,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-gray-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]})}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-96",children:o?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"space-y-3",children:[g.map(e=>(0,a.jsxs)("div",{onClick:()=>{m(e)},className:"flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-xl transition-all duration-300 cursor-pointer group border border-transparent hover:border-gray-500/30",children:[(0,a.jsx)("div",{className:"w-16 h-20 rounded-lg overflow-hidden bg-gray-700 flex-shrink-0",children:e.poster?(0,a.jsx)("img",{src:e.poster,alt:e.title,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(ew.A,{className:"w-6 h-6 text-gray-400"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,a.jsx)("h3",{className:"".concat(ta().className," text-white text-lg truncate"),children:e.title}),(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-lg",children:e.rating})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-gray-400 mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(as.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"".concat(tr().className," text-sm"),children:(e=>{let s=Math.floor(e/60);return"".concat(s,"h ").concat(e%60,"m")})(e.duration)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"".concat(tr().className," text-sm"),children:new Date(e.releaseDate).getFullYear()})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsxs)("span",{className:"".concat(tr().className," text-sm"),children:[e.genre.slice(0,2).join(", "),e.genre.length>2&&" +".concat(e.genre.length-2)]}),(0,a.jsx)("span",{className:"text-gray-500",children:""}),(0,a.jsx)("span",{className:"".concat(tr().className," text-sm"),children:e.language})]})]}),(0,a.jsx)(ts.A,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]},e._id)),0===g.length&&!o&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400"),children:"No movies found matching your search."})})]})})]})}),x&&(0,a.jsx)(ac,{movie:x,onSelect:e=>{s(e),m(null)},onClose:()=>{m(null)},lexendMedium:ta(),lexendSmall:tr()})]})};var ai=t(32417);let ao=e=>{let{screen:s,onSelect:t,onClose:l,lexendMedium:r,lexendSmall:c}=e,n=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-70 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black/95 backdrop-blur-sm border border-gray-500/30 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-500/30",children:[(0,a.jsx)("h2",{className:"".concat(r.className," text-xl text-white"),children:"Screen Details"}),(0,a.jsx)("button",{onClick:l,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex gap-6 mb-6",children:[(0,a.jsx)("div",{className:"w-32 h-32 rounded-xl bg-purple-500/20 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(s$.A,{className:"w-16 h-16 text-purple-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(r.className," text-3xl text-white mb-2"),children:s.name}),(0,a.jsx)("div",{className:"flex items-center gap-3 mb-3",children:(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(s.isActive?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"),children:s.isActive?"Active":"Inactive"})})]})}),(0,a.jsxs)("div",{className:"mb-4 p-4 bg-white/5 rounded-xl border border-gray-600/30",children:[(0,a.jsxs)("h3",{className:"".concat(r.className," text-white text-lg mb-2 flex items-center gap-2"),children:[(0,a.jsx)(A.A,{className:"w-5 h-5"}),"Theater Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(c.className," text-gray-400 text-sm mb-1"),children:"Theater Name"}),(0,a.jsx)("p",{className:"".concat(r.className," text-white"),children:s.theaterId.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(c.className," text-gray-400 text-sm mb-1"),children:"Location"}),(0,a.jsxs)("p",{className:"".concat(r.className," text-white"),children:[s.theaterId.city,", ",s.theaterId.state]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h3",{className:"".concat(r.className," text-white text-lg mb-3 flex items-center gap-2"),children:[(0,a.jsx)(ai.A,{className:"w-5 h-5"}),"Seating Configuration"]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-white/5 border border-gray-600/30 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,a.jsx)(s7.A,{className:"w-6 h-6 text-blue-400"})}),(0,a.jsx)("p",{className:"".concat(r.className," text-white text-xl"),children:s.totalSeats}),(0,a.jsx)("p",{className:"".concat(c.className," text-gray-400 text-sm"),children:"Total Seats"})]}),(0,a.jsxs)("div",{className:"p-4 bg-white/5 border border-gray-600/30 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,a.jsx)(ai.A,{className:"w-6 h-6 text-purple-400"})}),(0,a.jsx)("p",{className:"".concat(r.className," text-white text-xl"),children:s.layout.rows}),(0,a.jsx)("p",{className:"".concat(c.className," text-gray-400 text-sm"),children:"Total Rows"})]}),(0,a.jsxs)("div",{className:"p-4 bg-white/5 border border-gray-600/30 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,a.jsx)(tv.A,{className:"w-6 h-6 text-green-400"})}),(0,a.jsx)("p",{className:"".concat(r.className," text-white text-xl"),children:s.layout.seatsPerRow}),(0,a.jsx)("p",{className:"".concat(c.className," text-gray-400 text-sm"),children:"Seats per Row"})]})]})]}),s.layout.advancedLayout&&s.layout.advancedLayout.rows?(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(tz.l,{advancedLayoutJSON:s.layout.advancedLayout,maxCols:(()=>{var e;return(null==(e=s.layout.advancedLayout)?void 0:e.rows)?Math.max(...s.layout.advancedLayout.rows.map(e=>{var s;return(e.offset||0)+((null==(s=e.seats)?void 0:s.length)||0)})):s.layout.seatsPerRow})(),showAisles:(()=>{var e;let t=null==(e=s.layout.advancedLayout)?void 0:e.aisles;return t&&(t.vertical&&t.vertical.length>0||t.horizontal&&t.horizontal.length>0)})()})}):(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h3",{className:"".concat(r.className," text-white text-lg mb-3 flex items-center gap-2"),children:[(0,a.jsx)(ai.A,{className:"w-5 h-5"}),"Basic Layout Configuration"]}),(0,a.jsx)("div",{className:"p-4 bg-white/5 rounded-xl border border-gray-600/30",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block px-8 py-2 bg-white/10 rounded text-gray-300 text-sm font-medium mb-4",children:"SCREEN"}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:[s.layout.rows," rows \xd7 ",s.layout.seatsPerRow," seats per row"]})]})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h3",{className:"".concat(r.className," text-white text-lg mb-3 flex items-center gap-2"),children:[(0,a.jsx)(tv.A,{className:"w-5 h-5"}),"Screen Features"]}),s.features&&s.features.length>0?(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.features.map((e,s)=>(0,a.jsx)("span",{className:"px-3 py-2 bg-blue-500/20 text-blue-400 text-sm rounded-lg border border-blue-500/30",children:e},s))}):(0,a.jsx)("div",{className:"p-4 bg-gray-700/20 border border-gray-600/30 rounded-lg",children:(0,a.jsx)("p",{className:"".concat(c.className," text-gray-400 text-center"),children:"No special features configured for this screen"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6 p-4 bg-white/5 rounded-xl border border-gray-600/30",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(c.className," text-gray-400 text-sm mb-1"),children:"Created Date"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("p",{className:"".concat(r.className," text-white text-sm"),children:n(s.createdAt)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(c.className," text-gray-400 text-sm mb-1"),children:"Last Updated"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("p",{className:"".concat(r.className," text-white text-sm"),children:n(s.updatedAt)})]})]})]})]})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-500/30 bg-black/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,a.jsx)("button",{onClick:l,className:"".concat(r.className," px-6 py-3 text-gray-300 hover:text-white transition-colors"),children:"Cancel"}),(0,a.jsxs)("button",{onClick:()=>t(s),className:"".concat(r.className," px-8 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl transition-all duration-300 flex items-center gap-2"),children:[(0,a.jsx)(s$.A,{className:"w-4 h-4"}),"Select Screen"]})]})})]})})},ad=e=>{let{theaterId:s,onSelect:t,onClose:r,lexendMedium:c,lexendSmall:n}=e,[i,o]=(0,l.useState)([]),[d,x]=(0,l.useState)(""),[m,h]=(0,l.useState)(!0),[g,b]=(0,l.useState)(null);(0,l.useEffect)(()=>{s&&p()},[s]);let p=async()=>{try{let e=await to(s);console.log(e.data),o(e.data)}catch(e){console.error("Error fetching screens:",e)}finally{h(!1)}},N=i.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())||e.theaterId.name.toLowerCase().includes(d.toLowerCase()));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-60 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-500/30",children:[(0,a.jsx)("h2",{className:"".concat(c.className," text-lg text-white"),children:"Select Screen"}),(0,a.jsx)("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsx)("div",{className:"p-6 border-b border-gray-500/30",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search screens...",value:d,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-gray-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]})}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-96",children:m?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"space-y-3",children:[N.map(e=>(0,a.jsxs)("div",{onClick:()=>{b(e)},className:"flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-xl transition-all duration-300 cursor-pointer group border border-transparent hover:border-gray-500/30",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center",children:(0,a.jsx)(s$.A,{className:"w-6 h-6 text-purple-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,a.jsx)("h3",{className:"".concat(c.className," text-white text-lg truncate"),children:e.name}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs ".concat(e.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.isActive?"Active":"Inactive"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(s7.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"".concat(n.className," text-sm"),children:[e.totalSeats," seats"]})]}),(0,a.jsx)("span",{className:"text-gray-500",children:""}),(0,a.jsxs)("span",{className:"".concat(n.className," text-sm"),children:[e.layout.rows," \xd7 ",e.layout.seatsPerRow]})]})]}),(0,a.jsx)(ts.A,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]},e._id)),0===N.length&&!m&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"".concat(n.className," text-gray-400"),children:"No screens found matching your search."})})]})})]})}),g&&(0,a.jsx)(ao,{screen:g,onSelect:e=>{t(e),b(null)},onClose:()=>{b(null)},lexendMedium:c,lexendSmall:n})]})};function ax(e){let[s,t]=e.split(":").map(Number);return 60*s+t}let am=e=>{let{showtime:s,onClose:t,onSubmit:r,submitting:c,mode:n}=e,[i,o]=(0,l.useState)({movieId:"",theaterId:"",screenId:"",format:"2D",language:"",ageRestriction:null,rowPricing:[]}),[d,x]=(0,l.useState)({start:"",end:""}),[h,u]=(0,l.useState)([]),[g,b]=(0,l.useState)(""),[p,N]=(0,l.useState)(""),[j,y]=(0,l.useState)(""),[w,v]=(0,l.useState)(null),[f,k]=(0,l.useState)(null),[S,A]=(0,l.useState)(null),[C,D]=(0,l.useState)(!1),[T,P]=(0,l.useState)(!1),[I,E]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(s){let e=e=>"object"==typeof e&&null!==e?e._id:e;o({movieId:e(s.movieId),theaterId:e(s.theaterId),screenId:e(s.screenId),format:s.format,language:s.language,ageRestriction:void 0===s.ageRestriction||null===s.ageRestriction?null:"number"==typeof s.ageRestriction?s.ageRestriction:null,rowPricing:s.rowPricing||[]}),"object"==typeof s.movieId&&null!==s.movieId&&k(s.movieId),"object"==typeof s.theaterId&&null!==s.theaterId&&v(s.theaterId),"object"==typeof s.screenId&&null!==s.screenId&&A(s.screenId);let t=e=>e?"string"==typeof e?e.slice(0,10):e instanceof Date?e.toISOString().slice(0,10):"":"";"edit"===n||"view"===n?(N(t(s.showDate)),y(s.showTime||"")):(x({start:t(s.showDate),end:t(s.showDate)}),u(s.showTime?[s.showTime]:[]))}},[s,n]);let L=()=>i.rowPricing.reduce((e,s)=>e+Number(s.totalSeats),0),R=(e,s)=>{if(!e||!s)return"";let[t,a]=e.split(":").map(Number),l=new Date;return l.setHours(t,a,0,0),l.setMinutes(l.getMinutes()+(s+15)),l.toTimeString().slice(0,5)},F=async e=>{if(e.preventDefault(),"view"===n)return;let t=new Date;if(t.setHours(0,0,0,0),!(null==f?void 0:f._id)||!(null==w?void 0:w._id)||!(null==S?void 0:S._id))return void eh.Ay.error("Please select movie, theater, and screen.");if(!i.theaterId)return eh.Ay.error("Please select a theater");if(!i.movieId)return eh.Ay.error("Please select a movie");if(!i.screenId)return eh.Ay.error("Please select a screen");if(!i.format)return eh.Ay.error("Please select a format");if(!i.language)return eh.Ay.error("Movie language is not set");if(!i.rowPricing||0===i.rowPricing.length)return eh.Ay.error("Row pricing is not set");for(let e of i.rowPricing){let s=Number(e.showtimePrice),t=Number(e.basePrice);if(isNaN(s)||s<t)return eh.Ay.error("Showtime price for row ".concat(e.rowLabel," must be at least base price (").concat(t,")"));if(e.totalSeats<=0)return eh.Ay.error("Row ".concat(e.rowLabel," must have at least one seat"))}if("edit"===n){if(!p)return eh.Ay.error("Please select a date");if(!j)return eh.Ay.error("Please select a time");let e=new Date(p);if(e.setHours(0,0,0,0),e<=t)return eh.Ay.error("Show date must be at least from tomorrow");let a=R(j,(null==f?void 0:f.duration)||0);r({showtime:{...i,_id:null==s?void 0:s._id,movieId:null==f?void 0:f._id,theaterId:null==w?void 0:w._id,screenId:null==S?void 0:S._id,showDate:p,showTime:j,endTime:a,ageRestriction:i.ageRestriction,totalSeats:L(),availableSeats:L(),bookedSeats:[],blockedSeats:[],isActive:!0}})}else{if(!d.start||!d.end)return eh.Ay.error("Select start and end date");if(0===h.length)return eh.Ay.error("Add at least one showtime slot");let e=new Date(d.start),s=new Date(d.end);if(e.setHours(0,0,0,0),s.setHours(0,0,0,0),e<=t||s<=t)return eh.Ay.error("Show dates must be at least tomorrow");let a=function(e,s){let t=[],a=new Date(e),l=new Date(s);for(;a<=l;)t.push(a.toISOString().split("T")[0]),a.setDate(a.getDate()+1);return t}(d.start,d.end),l=new Date;for(let e of(l.setHours(0,0,0,0),a))if(new Date(e)<l)return eh.Ay.error("Show dates must be in the future");let c=[];for(let e of a){let s=[...h].sort(),t=null;for(let a of s){let s=R(a,(null==f?void 0:f.duration)||0);if(t&&ax(a)-ax(t)<30)return eh.Ay.error("Shows on ".concat(e," have less than 30 min gap in between"));c.push({...i,movieId:null==f?void 0:f._id,theaterId:null==w?void 0:w._id,screenId:null==S?void 0:S._id,showDate:e,showTime:a,endTime:s,ageRestriction:i.ageRestriction,totalSeats:L(),availableSeats:L(),bookedSeats:[],blockedSeats:[],isActive:!0}),t=s}}if(0===c.length)return eh.Ay.error("No valid showtimes to submit");r({showtimes:c})}};return(0,a.jsxs)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[(0,a.jsxs)("div",{className:"bg-black/90 border border-gray-500/30 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-500/30",children:[(0,a.jsx)("h2",{className:"".concat(ta().className," text-xl text-white"),children:"edit"===n?"Edit Showtime":"create"===n?"Add Bulk Showtimes":"View Showtime"}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsxs)("form",{onSubmit:F,className:"p-6 space-y-6",noValidate:!0,children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>D(!0),className:"flex items-center gap-3 p-4 bg-white/5 hover:bg-white/10 rounded-xl border border-gray-500/30 transition-colors text-left",disabled:"view"===n||"edit"===n,children:[(0,a.jsx)(m.A,{className:"w-6 h-6 text-blue-400"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-xs"),children:"Theater"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-white truncate"),children:w?w.name:"Select Theater"})]})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>P(!0),className:"flex items-center gap-3 p-4 bg-white/5 hover:bg-white/10 rounded-xl border border-gray-500/30 transition-colors text-left",disabled:"view"===n||"edit"===n,children:[(0,a.jsx)(ew.A,{className:"w-6 h-6 text-green-400"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-xs"),children:"Movie"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-white truncate"),children:f?f.title:"Select Movie"})]})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>E(!0),disabled:!w||"view"===n||"edit"===n,className:"flex items-center gap-3 p-4 bg-white/5 hover:bg-white/10 rounded-xl border border-gray-500/30 transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(s$.A,{className:"w-6 h-6 text-purple-400"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-xs"),children:"Screen"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-white truncate"),children:S?S.name:"Select Screen"})]})]})]}),"create"===n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-300 text-sm block mb-2"),children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:d.start,onChange:e=>x(s=>({...s,start:e.target.value})),className:"w-full p-3 bg-white/5 border border-gray-500/30 rounded-xl text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-300 text-sm block mb-2"),children:"End Date"}),(0,a.jsx)("input",{type:"date",value:d.end,onChange:e=>x(s=>({...s,end:e.target.value})),className:"w-full p-3 bg-white/5 border border-gray-500/30 rounded-xl text-white"})]})]}),(0,a.jsxs)("div",{className:"my-4",children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-300 text-sm block mb-2"),children:"Add Showtimes (HH:mm):"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"time",value:g,onChange:e=>b(e.target.value),className:"p-2 bg-white/5 border border-gray-500/30 rounded-lg text-white text-sm"}),(0,a.jsx)("button",{type:"button",className:"px-2 py-1 bg-blue-500 text-white rounded",onClick:()=>{g&&!h.includes(g)&&u(e=>[...e,g]),b("")},children:"Add Time"})]}),(0,a.jsx)("div",{className:"mt-2",children:h.map(e=>(0,a.jsxs)("span",{className:"mr-2 px-2 py-1 bg-white/10 text-blue-300 rounded",children:[e,(0,a.jsx)("button",{type:"button",className:"ml-1 text-red-400",onClick:()=>u(s=>s.filter(s=>s!==e)),children:"\xd7"})]},e))})]})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-300 text-sm block mb-2"),children:"Show Date"}),(0,a.jsx)("input",{type:"date",value:p,onChange:e=>N(e.target.value),className:"w-full p-3 bg-white/5 border border-gray-500/30 rounded-xl text-white",disabled:"view"===n})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-300 text-sm block mb-2"),children:"Show Time"}),(0,a.jsx)("input",{type:"time",value:j,onChange:e=>y(e.target.value),className:"w-full p-3 bg-white/5 border border-gray-500/30 rounded-xl text-white",disabled:"view"===n})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-300 text-sm block mb-2"),children:"Age Restriction (optional)"}),(0,a.jsxs)("select",{value:null===i.ageRestriction?"":String(i.ageRestriction),onChange:e=>o(s=>({...s,ageRestriction:""===e.target.value?null:Number(e.target.value)})),className:"w-full p-3 bg-white/5 border border-gray-500/30 rounded-xl text-white",disabled:"view"===n,children:[(0,a.jsx)("option",{value:"",children:"No Restriction"}),(0,a.jsx)("option",{value:7,children:"7+"}),(0,a.jsx)("option",{value:13,children:"13+"}),(0,a.jsx)("option",{value:16,children:"16+"}),(0,a.jsx)("option",{value:18,children:"18+"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-300 text-sm block mb-2"),children:"Format"}),(0,a.jsxs)("select",{value:i.format,onChange:e=>o(s=>({...s,format:e.target.value})),className:"w-full p-3 bg-white/5 border border-gray-500/30 rounded-xl text-white",disabled:"view"===n,children:[(0,a.jsx)("option",{value:"2D",children:"2D"}),(0,a.jsx)("option",{value:"3D",children:"3D"}),(0,a.jsx)("option",{value:"IMAX",children:"IMAX"}),(0,a.jsx)("option",{value:"4DX",children:"4DX"}),(0,a.jsx)("option",{value:"Dolby Atmos",children:"Dolby Atmos"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-300 text-sm block mb-2"),children:"Language"}),(0,a.jsx)("input",{type:"text",value:i.language,className:"w-full p-3 bg-white/10 border border-gray-500/30 rounded-xl text-white cursor-not-allowed",placeholder:f?"Auto-populated from movie":"Select a movie first",readOnly:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"".concat(ta().className," text-lg text-white"),children:"Row Pricing"}),i.rowPricing.map((e,s)=>(0,a.jsx)("div",{className:"bg-white/5 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-400 text-xs block mb-1"),children:"Row Label"}),(0,a.jsx)("input",{type:"text",className:"w-full p-2 bg-white/10 border border-gray-500/30 rounded-lg text-white text-sm cursor-not-allowed",value:e.rowLabel,readOnly:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-400 text-xs block mb-1"),children:"Seat Type"}),(0,a.jsx)("input",{type:"text",className:"w-full p-2 bg-white/10 border border-gray-500/30 rounded-lg text-white text-sm cursor-not-allowed",value:e.seatType,readOnly:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-400 text-xs block mb-1"),children:"Base Price"}),(0,a.jsx)("input",{type:"number",className:"w-full p-2 bg-white/10 border border-gray-500/30 rounded-lg text-white text-sm cursor-not-allowed",value:e.basePrice,readOnly:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-400 text-xs block mb-1"),children:"Showtime Price"}),(0,a.jsx)("input",{type:"number",className:"w-full p-2 bg-white/10 border border-amber-300 rounded-lg text-white text-sm focus:outline-none focus:border-blue-500",value:0===e.showtimePrice?"":e.showtimePrice,min:e.basePrice,onChange:e=>((e,s,t)=>{if("view"===n)return;let a=[...i.rowPricing];("showtimePrice"===s||"basePrice"===s||"totalSeats"===s)&&(t=""===t?0:Number(t)),a[e]={...a[e],[s]:t},"totalSeats"===s&&(a[e].availableSeats=Number(t)),o(e=>({...e,rowPricing:a}))})(s,"showtimePrice",e.target.value),disabled:"view"===n})]})]})},s)),i.rowPricing.length>0&&(0,a.jsx)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4",children:(0,a.jsxs)("p",{className:"".concat(ta().className," text-blue-400"),children:["Total Seats: ",L()]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-500/30 text-gray-300 rounded-xl hover:bg-white/5 transition-colors",children:"Close"}),"view"!==n&&(0,a.jsx)("button",{type:"submit",disabled:!w||!f||!S||c,className:"px-6 py-3 bg-white hover:bg-gray-200 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:text-white text-black rounded-xl transition-colors",children:c?"Please wait":"edit"===n?"Update Showtime":"Create Bulk Showtimes"})]})]})]}),C&&(0,a.jsx)(at,{onSelect:e=>{"view"!==n&&(v(e),o(s=>({...s,theaterId:e._id})),D(!1),A(null),o(e=>({...e,screenId:""})))},onClose:()=>D(!1),lexendMedium:ta(),lexendSmall:tr()}),T&&(0,a.jsx)(an,{onSelect:e=>{"view"!==n&&(k(e),o(s=>({...s,movieId:e._id,language:e.language||""})),P(!1))},onClose:()=>P(!1),lexendMedium:ta(),lexendSmall:tr()}),I&&w&&(0,a.jsx)(ad,{theaterId:w._id,onSelect:e=>{"view"!==n&&(A(e),o(s=>({...s,screenId:e._id})),E(!1),e.layout&&(e=>{if(!e||!e.advancedLayout||!e.advancedLayout.rows)return console.error("Invalid layout structure:",e);let s=e.advancedLayout.rows.map(e=>{let s=e.seats&&e.seats.length>0?e.seats[0]:null,t=s?s.type:"Normal",a=s?s.price:0;return{rowLabel:e.rowLabel,seatType:t,basePrice:a,showtimePrice:a,totalSeats:e.seats.length,availableSeats:e.seats.length,bookedSeats:[]}});o(e=>({...e,rowPricing:s}))})(e.layout))},onClose:()=>E(!1),lexendMedium:ta(),lexendSmall:tr()})]})},ah={BASE:"/owner/showtime",BY_ID:e=>"/owner/showtime/".concat(e)},au=async e=>{let s=ah.BASE;if((null==e?void 0:e.page)&&(null==e?void 0:e.limit)){let t=new URLSearchParams({page:e.page.toString(),limit:e.limit.toString()});s+="?".concat(t)}return(await M.A.get(s)).data},ag=async e=>(await M.A.post(ah.BASE,e)).data,ab=async e=>(await M.A.put(ah.BASE,e)).data,ap=async(e,s)=>(await M.A.patch(ah.BY_ID(e),{isActive:s})).data,aN=e=>{let{filter:s,sortBy:t,groupBy:l,timeFilter:r,onFilterChange:c,onSortChange:n,onGroupChange:i,onTimeFilterChange:o}=e,d="px-3 py-2 bg-white/5 border border-gray-500/30 rounded-lg text-white text-sm focus:outline-none focus:border-blue-500";return(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("select",{value:r,onChange:e=>o(e.target.value),className:d,children:[(0,a.jsx)("option",{value:"all",children:"All Times"}),(0,a.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,a.jsx)("option",{value:"past",children:"Past"})]}),(0,a.jsxs)("select",{value:l,onChange:e=>i(e.target.value),className:d,children:[(0,a.jsx)("option",{value:"none",children:"No Grouping"}),(0,a.jsx)("option",{value:"theater",children:"Group by Theater"}),(0,a.jsx)("option",{value:"movie",children:"Group by Movie"}),(0,a.jsx)("option",{value:"screen",children:"Group by Screen"})]}),(0,a.jsxs)("select",{value:s,onChange:e=>c(e.target.value),className:d,children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active Only"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive Only"})]}),(0,a.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:d,children:[(0,a.jsx)("option",{value:"date",children:"Sort by Date"}),(0,a.jsx)("option",{value:"time",children:"Sort by Time"})]})]})};var aj=t(66474),ay=t(47863),aw=t(54861),av=t(40646);let af=e=>{var s;let{showtime:t,onEdit:l,onView:r,onToggleStatus:c}=e,n=e=>new Date("2000-01-01T".concat(e)).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return(0,a.jsx)("div",{className:"bg-white/5 rounded-xl p-4 border transition-all duration-300 ".concat(t.isActive?"border-gray-500/30 hover:border-blue-500/50":"border-red-500/30 opacity-70"),children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mt-2 ".concat(t.isActive?"bg-green-400":"bg-red-400")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ew.A,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{className:"".concat(ta().className," text-white truncate"),children:(e=>"object"==typeof e&&(null==e?void 0:e.title)?e.title:"string"==typeof e?e:"Unknown Movie")(t.movieId)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(A.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"".concat(tr().className," text-sm truncate"),children:(e=>"object"==typeof e&&(null==e?void 0:e.name)?e.name:"string"==typeof e?e:"Unknown Theater")(t.theaterId)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(s$.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"".concat(tr().className," text-sm"),children:(e=>"object"==typeof e&&(null==e?void 0:e.name)?e.name:"string"==typeof e?e:"Unknown Screen")(t.screenId)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"".concat(ta().className," text-white"),children:new Date(t.showDate).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(as.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"".concat(tr().className," text-sm"),children:[n(t.showTime)," - ",n(t.endTime)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded-lg",children:t.format}),(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-lg",children:t.language})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(s7.A,{className:"w-4 h-4 text-orange-400"}),(0,a.jsxs)("span",{className:"".concat(ta().className," text-white"),children:[t.availableSeats,"/",t.totalSeats," seats"]})]}),(0,a.jsx)("div",{className:"text-gray-400",children:(0,a.jsxs)("span",{className:"".concat(tr().className," text-sm"),children:["Booking: ",((t.totalSeats-t.availableSeats)/t.totalSeats*100).toFixed(1),"%"]})}),(0,a.jsx)("div",{className:"text-gray-400",children:(0,a.jsxs)("span",{className:"".concat(tr().className," text-sm"),children:["Rows: ",(null==(s=t.rowPricing)?void 0:s.length)||0]})})]})]}),t.rowPricing&&t.rowPricing.length>0&&(0,a.jsx)("div",{className:"border-t border-gray-500/30 pt-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[t.rowPricing.slice(0,3).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"".concat(tr().className," text-gray-400"),children:[e.rowLabel,":"]}),(0,a.jsxs)("span",{className:"".concat(ta().className," text-white"),children:["",e.showtimePrice]})]},s)),t.rowPricing.length>3&&(0,a.jsxs)("span",{className:"".concat(tr().className," text-gray-500"),children:["+",t.rowPricing.length-3," more"]})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("button",{onClick:()=>l(t),className:"p-2 text-blue-400 hover:bg-blue-500/20 rounded-lg transition-colors",title:"Edit Showtime",children:(0,a.jsx)(f.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>r(t),className:"p-2 text-green-400 hover:bg-green-500/20 rounded-lg transition-colors",title:"View Details",children:(0,a.jsx)(v.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>c(t._id,t.isActive),className:"p-2 rounded-lg transition-colors ".concat(t.isActive?"text-red-400 hover:bg-red-500/20":"text-green-400 hover:bg-green-500/20"),title:t.isActive?"Deactivate Showtime":"Activate Showtime",children:t.isActive?(0,a.jsx)(aw.A,{className:"w-4 h-4"}):(0,a.jsx)(av.A,{className:"w-4 h-4"})})]})]})})},ak=e=>{let{groupedShowtimes:s,groupBy:t,collapsedGroups:l,onToggleGroupCollapse:r,onEdit:c,onView:n,onToggleStatus:i}=e;return 0===Object.keys(s).length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(D.A,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-gray-400 text-lg mb-2"),children:"No showtimes found"}),(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-500"),children:"Create your first showtime to get started"})]}):(0,a.jsx)("div",{className:"space-y-6",children:Object.entries(s).map(e=>{let[s,o]=e,[,d]=s.split("|"),x=l.has(s);return(0,a.jsxs)("div",{className:"space-y-4",children:["none"!==t&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h4",{className:"".concat(ta().className," text-lg text-blue-400"),children:d}),(0,a.jsxs)("span",{className:"".concat(tr().className," px-2 py-1 bg-blue-500/20 text-blue-300 text-xs rounded-lg"),children:[o.length," show",1!==o.length?"s":""]})]}),(0,a.jsx)("button",{onClick:()=>r(s),className:"p-2 text-gray-400 hover:text-white transition-colors",children:x?(0,a.jsx)(aj.A,{className:"w-4 h-4"}):(0,a.jsx)(ay.A,{className:"w-4 h-4"})})]}),!x&&(0,a.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,a.jsx)(af,{showtime:e,onEdit:c,onView:n,onToggleStatus:i},e._id))})]},s)})})},aS=e=>{let{showtimes:s,onEdit:t,onRefresh:r,onView:c}=e,[n,i]=(0,l.useState)("all"),[o,d]=(0,l.useState)("date"),[x,m]=(0,l.useState)("none"),[h,u]=(0,l.useState)("all"),[g,b]=(0,l.useState)(new Set);l.useEffect(()=>{s.length>0&&console.log("Sample showtime structure:",s[0])},[s]);let p=async(e,s)=>{try{let t=s?"Deactivate":"Activate";if(!await (0,T.f)({title:"".concat(t," Showtime?"),message:s?"Are you sure you want to deactivate this showtime?":"Are you sure you want to activate this showtime?",confirmText:t,cancelText:"Cancel"}))return;let a=await ap(e,!s);console.log(a),a.success?eh.Ay.success(s?"Showtime deactivated successfully ":"Showtime activated successfully "):eh.Ay.error(a.message||"Failed to update showtime status"),r()}catch(e){console.error("Error toggling showtime status:",e),eh.Ay.error("Something went wrong while updating showtime")}},N=e=>"object"==typeof e&&(null==e?void 0:e.name)?e.name:"string"==typeof e?e:"Unknown Theater",j=e=>{try{let s,t=e.showDate,a=e.showTime;if(!t)return!1;if(a){let e=new Date(t).toISOString().split("T")[0];s=new Date("".concat(e,"T").concat(a))}else(s=new Date(t)).setHours(23,59,59,999);let l=new Date;return s<l}catch(s){return console.error("Error checking if showtime is past:",s,e),!1}},y=s.filter(e=>!("active"===n&&!e.isActive||"inactive"===n&&e.isActive||"past"===h&&!j(e)||"upcoming"===h&&j(e))&&!0).sort((e,s)=>{if("date"===o){let t=e.showDate,a=s.showDate;return new Date(t).getTime()-new Date(a).getTime()}if("time"===o){let t=e.showTime,a=s.showTime;return t.localeCompare(a)}return 0}),w=((e,s)=>"none"===s?{"All Showtimes":e}:e.reduce((e,t)=>{let a="",l="";switch(s){case"theater":a="object"==typeof t.theaterId?t.theaterId._id:t.theaterId,l=N(t.theaterId);break;case"movie":a="object"==typeof t.movieId?t.movieId._id:t.movieId,l=(e=>"object"==typeof e&&(null==e?void 0:e.title)?e.title:"string"==typeof e?e:"Unknown Movie")(t.movieId);break;case"screen":a="object"==typeof t.screenId?t.screenId._id:t.screenId,l="".concat(N(t.theaterId)," - ").concat((e=>"object"==typeof e&&(null==e?void 0:e.name)?e.name:"string"==typeof e?e:"Unknown Screen")(t.screenId))}let r="".concat(a,"|").concat(l);return e[r]||(e[r]=[]),e[r].push(t),e},{}))(y,x);return l.useEffect(()=>{console.log("Time filter: ".concat(h,", Filtered showtimes:"),y.length)},[h,y]),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"".concat(ta().className," text-xl text-white"),children:["Showtimes ","all"!==h&&"(".concat(h,")")]}),(0,a.jsx)(aN,{filter:n,sortBy:o,groupBy:x,timeFilter:h,onFilterChange:i,onSortChange:d,onGroupChange:m,onTimeFilterChange:u})]}),(0,a.jsx)(ak,{groupedShowtimes:w,groupBy:x,collapsedGroups:g,onToggleGroupCollapse:e=>{let s=new Set(g);s.has(e)?s.delete(e):s.add(e),b(s)},onEdit:t,onView:c,onToggleStatus:p})]})},aA=e=>{let{}=e,[s,t]=(0,l.useState)([]),[r,c]=(0,l.useState)(!1),[n,i]=(0,l.useState)(null),[o,d]=(0,l.useState)(!1),[m,h]=(0,l.useState)(!1),[u,g]=(0,l.useState)(0),[b,p]=(0,l.useState)(!1),[N,j]=(0,l.useState)("create"),[y,w]=(0,l.useState)(1),[v,f]=(0,l.useState)([]),[k,S]=(0,l.useState)(!0),[A,C]=(0,l.useState)(!1),[T,P]=(0,l.useState)(0);(0,l.useEffect)(()=>{p(!0),I(1,!0)},[]),(0,l.useEffect)(()=>{if(b&&s.length>0){let e=new Date;e.setHours(0,0,0,0),g(s.filter(s=>{let t=new Date(s.showDate);return t.setHours(0,0,0,0),t.getTime()===e.getTime()&&s.isActive}).length)}},[s,b]),(0,l.useEffect)(()=>{let e;function s(){clearTimeout(e),e=setTimeout(()=>{if(window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-100&&k&&!o&&!A){let e=y+1;w(e),I(e,!1)}},100)}return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s),clearTimeout(e)}},[k,o,A,y]);let I=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!o||s)try{var a,l,r,c,n,i;s?d(!0):C(!0);let o=await au({page:e,limit:10});console.log("the showtime data:",o);let x=o.data||[],m=null==o||null==(l=o.meta)||null==(a=l.pagination)?void 0:a.total;null==o||null==(c=o.meta)||null==(r=c.pagination)||r.currentPage;let h=(null==o||null==(i=o.meta)||null==(n=i.pagination)?void 0:n.hasNextPage)||!1;console.log("\uD83D\uDCE6 Received ".concat(x.length," items")),s||1===e?t(x):t(e=>{let s=e.map(e=>e._id),t=x.filter(e=>!s.includes(e._id));return console.log(" Added ".concat(t.length," new items")),[...e,...t]}),void 0!==m?P(m):P(0),S(h)}catch(e){console.error(" Error fetching showtimes:",e),eh.Ay.error("Failed to fetch showtimes")}finally{s?d(!1):C(!1)}},E=()=>{c(!1),i(null),j("create")},L=async e=>{try{if(h(!0),"edit"===N){console.log("the data is   :",e);let s=await ab(e.showtime);console.log(s),eh.Ay.success("Showtime updated successfully")}else if("create"===N){let a=await ag(e);if(a.success)if(e.showtimes&&Array.isArray(e.showtimes)){var s,t;let e=(null==a||null==(s=a.data)?void 0:s.created)||0,l=(null==a||null==(t=a.data)?void 0:t.skipped)||0;eh.Ay.success("Successfully created ".concat(e," showtimes")),l>0&&eh.Ay.error("".concat(l," showtimes were skipped due to conflicts"))}else eh.Ay.success("Showtime created successfully");else throw Error(a.message||"Failed to create showtime(s)")}I(),E()}catch(e){console.error("Error saving showtime:",e),eh.Ay.error(e.response.data.message||"Failed to save showtime")}finally{h(!1)}};return o?(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center",children:(0,a.jsx)(ew.A,{className:"w-6 h-6 text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(ta().className," text-2xl text-white"),children:"Showtime Manager"}),(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-sm"),children:"Manage movie showtimes across theaters"})]})]}),(0,a.jsxs)("button",{onClick:()=>{i(null),j("create"),c(!0)},disabled:m,className:"bg-white text-black flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[m?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}):(0,a.jsx)(x.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"".concat(tr().className),children:m?"Creating...":"Add Showtimes"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white/5 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(D.A,{className:"w-5 h-5 text-green-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-xs"),children:"Total Showtimes"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-white text-lg"),children:T>0?T:s.length})]})]})}),(0,a.jsx)("div",{className:"bg-white/5 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(as.A,{className:"w-5 h-5 text-blue-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-xs"),children:"Active Today"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-white text-lg"),children:b?u:0})]})]})}),(0,a.jsx)("div",{className:"bg-white/5 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(ew.A,{className:"w-5 h-5 text-purple-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-xs"),children:"Upcoming Shows"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-white text-lg"),children:b?(()=>{let e=new Date;return s.filter(s=>new Date(s.showDate)>=e&&s.isActive).length})():0})]})]})}),(0,a.jsx)("div",{className:"bg-white/5 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(D.A,{className:"w-5 h-5 text-orange-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(tr().className," text-gray-400 text-xs"),children:"Available Seats"}),(0,a.jsx)("p",{className:"".concat(ta().className," text-white text-lg"),children:b?s.reduce((e,s)=>e+(s.availableSeats||0),0):0})]})]})})]})]}),(0,a.jsx)(aS,{showtimes:s,onEdit:e=>{let s=new Date,t=new Date(e.showDate).toISOString().split("T")[0],a=new Date("".concat(t,"T").concat(e.showTime,":00"));return a<s?void eh.Ay.error("Cannot edit past showtimes"):7>Math.ceil((a.getTime()-s.getTime())/864e5)?void eh.Ay.error("Cannot edit showtime within 7 days of show date"):void(i(e),j("edit"),c(!0))},onView:e=>{i(e),j("view"),c(!0)},onRefresh:()=>{w(1),I(1,!0)},lexendMedium:ta(),lexendSmall:tr()}),r&&(0,a.jsx)(am,{submitting:m,showtime:n,mode:N,onClose:E,onSubmit:L,lexendMedium:ta(),lexendSmall:tr()}),k&&s.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-gray-400",children:"Loading more showtimes..."})]}),!k&&s.length>0&&(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-gray-400",children:"No more showtimes to load"})})]})},aC=e=>{var s,t;let{showtime:l,onClick:r,lexendMedium:c,lexendSmall:n}=e,i=(null==(s=l.bookedSeats)?void 0:s.length)||0,o=Math.round(i/l.totalSeats*100);return(0,a.jsxs)("div",{onClick:r,className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-gray-400/50 hover:bg-white/5 transition-all duration-300 cursor-pointer group",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("img",{src:l.movieId.poster,alt:l.movieId.title,className:"w-32 h-44 object-cover rounded-lg border border-gray-500/30 shadow-lg"})}),(0,a.jsxs)("div",{className:"text-center mb-3",children:[(0,a.jsx)("h3",{className:"".concat(c.className," text-white text-lg mb-1 truncate group-hover:text-blue-400 transition-colors"),children:l.movieId.title}),(0,a.jsxs)("p",{className:"".concat(n.className," text-gray-400 text-sm"),children:[null==(t=l.language)?void 0:t.toUpperCase(),"  ",l.format]})]}),(0,a.jsx)("div",{className:"bg-white/5 rounded-lg p-3 mb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(as.A,{className:"w-4 h-4 text-blue-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(n.className," text-gray-400 text-xs"),children:"Start Time"}),(0,a.jsx)("p",{className:"".concat(c.className," text-blue-400 text-lg"),children:l.showTime})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"w-4 h-4 text-purple-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(n.className," text-gray-400 text-xs"),children:"End Time"}),(0,a.jsx)("p",{className:"".concat(c.className," text-purple-400 text-lg"),children:l.endTime})]})]})]})}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(s7.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"".concat(n.className," text-gray-400 text-xs"),children:"Occupancy"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("p",{className:"".concat(c.className," text-white text-sm"),children:[i,"/",l.totalSeats," seats"]}),(0,a.jsxs)("p",{className:"".concat(n.className," ").concat((e=>e>=80?"text-green-400":e>=60?"text-yellow-400":e>=40?"text-orange-400":"text-red-400")(o)," text-xs font-medium"),children:[o,"% filled"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat(o>=80?"bg-green-400":o>=60?"bg-yellow-400":o>=40?"bg-orange-400":"bg-red-400"),style:{width:"".concat(o,"%")}})})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"".concat(n.className," text-gray-400 text-xs"),children:["Screen: ",l.screenId.name]}),(0,a.jsxs)("p",{className:"".concat(n.className," text-gray-400 text-xs"),children:["Age Restriction: ",l.ageRestriction,"+"]})]})]})};var aD=t(3925),aT=t(91788),aP=t(5196),aI=t(84109);let aE=e=>{let{bookings:s,isLoading:t,lexendMedium:l,lexendSmall:r}=e,c=s.filter(e=>"cancelled"!==e.bookingStatus).reduce((e,s)=>{var t;return e+((null==(t=s.priceDetails)?void 0:t.total)||0)},0),n=s.filter(e=>"cancelled"!==e.bookingStatus),i=s.filter(e=>"cancelled"===e.bookingStatus);return t?(0,a.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"bg-white/5 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-6 gap-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded"})]})})},e))}):0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(ss.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"".concat(l.className," text-lg text-white mb-2"),children:"No Bookings Found"}),(0,a.jsx)("p",{className:"".concat(r.className," text-gray-400"),children:"No bookings match your search criteria"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-500/20 to-blue-500/20 border border-green-500/30 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"".concat(r.className," text-green-300 text-sm"),children:"Active Revenue"}),(0,a.jsxs)("p",{className:"".concat(l.className," text-white text-2xl font-bold"),children:["",c.toLocaleString()]}),(0,a.jsxs)("p",{className:"".concat(r.className," text-gray-400 text-xs"),children:["From ",n.length," confirmed bookings"]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500/20 to-purple-500/20 border border-blue-500/30 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"".concat(r.className," text-blue-300 text-sm"),children:"Total Bookings"}),(0,a.jsx)("p",{className:"".concat(l.className," text-white text-2xl font-bold"),children:s.length}),(0,a.jsxs)("p",{className:"".concat(r.className," text-gray-400 text-xs"),children:[n.length," confirmed + ",i.length," cancelled"]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-orange-500/20 to-red-500/20 border border-orange-500/30 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"".concat(r.className," text-orange-300 text-sm"),children:"Cancelled"}),(0,a.jsx)("p",{className:"".concat(l.className," text-white text-2xl font-bold"),children:i.length}),(0,a.jsx)("p",{className:"".concat(r.className," text-gray-400 text-xs"),children:i.length>0?"".concat(i.reduce((e,s)=>{var t;return e+((null==(t=s.priceDetails)?void 0:t.total)||0)},0).toLocaleString()," refunded"):"No cancellations"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-4 px-4 py-3 bg-white/5 rounded-lg",children:[(0,a.jsx)("div",{className:"".concat(r.className," text-gray-400 text-sm font-medium"),children:"Booking ID"}),(0,a.jsx)("div",{className:"".concat(r.className," text-gray-400 text-sm font-medium"),children:"Customer"}),(0,a.jsx)("div",{className:"".concat(r.className," text-gray-400 text-sm font-medium"),children:"Seats"}),(0,a.jsx)("div",{className:"".concat(r.className," text-gray-400 text-sm font-medium"),children:"Amount"}),(0,a.jsx)("div",{className:"".concat(r.className," text-gray-400 text-sm font-medium"),children:"Payment"}),(0,a.jsx)("div",{className:"".concat(r.className," text-gray-400 text-sm font-medium"),children:"Status"}),(0,a.jsx)("div",{className:"".concat(r.className," text-gray-400 text-sm font-medium"),children:"Date/Time"})]}),s.map(e=>{var s,t,c,n,i,o,d,x,m,h,u,g,b,p;return(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-4 px-4 py-4 rounded-lg hover:bg-white/10 transition-all duration-300 border ".concat("cancelled"===e.bookingStatus?"bg-red-500/5 border-red-500/20":"bg-white/5 border-gray-500/20"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(l.className," text-white text-sm mb-1"),children:e.bookingId}),(0,a.jsx)("p",{className:"".concat(r.className," text-gray-400 text-xs"),children:e.paymentMethod||"razorpay"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(k.A,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("p",{className:"".concat(l.className," text-white text-sm"),children:(null==(s=e.userId)?void 0:s.email)||(null==(t=e.contactInfo)?void 0:t.email)||"N/A"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eI.A,{className:"w-3 h-3 text-gray-400"}),(0,a.jsxs)("p",{className:"".concat(r.className," text-gray-400 text-xs truncate"),children:["ID: ",(null==(n=e.userId)||null==(c=n._id)?void 0:c.slice(-8))||"N/A"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:(null==(i=e.selectedSeats)?void 0:i.map(s=>(0,a.jsx)("span",{className:"".concat(r.className," px-2 py-1 rounded text-xs ").concat("cancelled"===e.bookingStatus?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"),children:s},s)))||(0,a.jsx)("span",{className:"".concat(r.className," text-gray-400 text-xs"),children:"No seats"})}),(0,a.jsxs)("p",{className:"".concat(r.className," text-gray-400 text-xs mt-1"),children:[(null==(o=e.selectedSeats)?void 0:o.length)||0," seat",1!==((null==(d=e.selectedSeats)?void 0:d.length)||0)?"s":""]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"".concat(l.className," text-sm font-bold ").concat("cancelled"===e.bookingStatus?"text-red-400 line-through":"text-green-400"),children:["",(null==(m=e.priceDetails)||null==(x=m.total)?void 0:x.toLocaleString())||0]}),(0,a.jsxs)("div",{className:"".concat(r.className," text-gray-400 text-xs space-y-0.5"),children:[(0,a.jsxs)("div",{children:["Subtotal: ",(null==(h=e.priceDetails)?void 0:h.subtotal)||0]}),(0,a.jsxs)("div",{children:["Taxes: ",(null==(u=e.priceDetails)?void 0:u.taxes)||0]}),(0,a.jsxs)("div",{children:["Fee: ",(null==(g=e.priceDetails)?void 0:g.convenienceFee)||0]}),(null==(b=e.priceDetails)?void 0:b.discount)&&(0,a.jsxs)("div",{children:["Discount: ",(null==(p=e.priceDetails)?void 0:p.discount)||0]})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full ".concat((e=>{switch(e){case"completed":return"text-green-400 bg-green-500/20";case"refunded":return"text-orange-400 bg-orange-500/20";case"failed":return"text-red-400 bg-red-500/20";case"pending":return"text-yellow-400 bg-yellow-500/20";default:return"text-gray-400 bg-gray-500/20"}})(e.paymentStatus)),children:[(e=>{switch(e){case"completed":return(0,a.jsx)(aP.A,{className:"w-4 h-4 text-green-400"});case"refunded":return(0,a.jsx)(aI.A,{className:"w-4 h-4 text-orange-400"});case"failed":return(0,a.jsx)(Y.A,{className:"w-4 h-4 text-red-400"});case"pending":return(0,a.jsx)(as.A,{className:"w-4 h-4 text-yellow-400"});default:return null}})(e.paymentStatus),(0,a.jsx)("span",{className:"".concat(r.className," text-xs font-medium capitalize"),children:e.paymentStatus})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full ".concat((e=>{switch(e){case"confirmed":return"text-green-400 bg-green-500/20";case"cancelled":return"text-red-400 bg-red-500/20";default:return"text-gray-400 bg-gray-500/20"}})(e.bookingStatus)),children:(0,a.jsx)("span",{className:"".concat(r.className," text-xs font-medium capitalize"),children:e.bookingStatus})}),"cancelled"===e.bookingStatus&&e.cancelledAt&&(0,a.jsxs)("p",{className:"".concat(r.className," text-red-400 text-xs mt-1"),children:["Cancelled: ",new Date(e.cancelledAt).toLocaleDateString("en-IN",{month:"short",day:"numeric"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(r.className," text-white text-sm"),children:new Date(e.bookedAt).toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})}),(0,a.jsx)("p",{className:"".concat(r.className," text-gray-400 text-xs"),children:new Date(e.bookedAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]})]},e._id)}),(0,a.jsx)("div",{className:"bg-white/5 rounded-lg p-4 border-t-2 border-green-500/50",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(r.className," text-gray-400 text-sm"),children:"Confirmed"}),(0,a.jsx)("p",{className:"".concat(l.className," text-green-400 text-lg"),children:n.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(r.className," text-gray-400 text-sm"),children:"Cancelled"}),(0,a.jsx)("p",{className:"".concat(l.className," text-red-400 text-lg"),children:i.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(r.className," text-gray-400 text-sm"),children:"Seats Sold"}),(0,a.jsx)("p",{className:"".concat(l.className," text-white text-lg"),children:n.reduce((e,s)=>{var t;return e+((null==(t=s.selectedSeats)?void 0:t.length)||0)},0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(r.className," text-gray-400 text-sm"),children:"Active Revenue"}),(0,a.jsxs)("p",{className:"".concat(l.className," text-green-400 text-lg font-bold"),children:["",c.toLocaleString()]})]})]})})]})};var aL=t(60105),aR=t.n(aL);let aF=e=>{let{totalSeats:s,bookedSeats:t,lexendSmall:l,showtime:r}=e,c=(()=>{var e,a,l;if(null==r||null==(l=r.screenId)||null==(a=l.layout)||null==(e=a.advancedLayout)?void 0:e.rows){let e=r.screenId.layout.advancedLayout,s=Math.max(...e.rows.map(e=>{var s;return(e.offset||0)+((null==(s=e.seats)?void 0:s.length)||0)+2}));return{rows:e.rows.map(e=>({rowLabel:e.rowLabel,offset:e.offset||0,seats:e.seats.map(e=>{var s;return{id:e.id,type:e.type,price:e.price,col:e.col,isBooked:t.includes(e.id),isBlocked:(null==(s=r.blockedSeats)?void 0:s.includes(e.id))||!1}})})),maxCols:s}}return(()=>{let e=["A","B","C","D","E","F","G","H"],a=Math.ceil(s/e.length),l={rows:[],maxCols:a+2};for(let r=0;r<e.length;r++){let c=[],n=Math.min(a,s-r*a);if(n<=0)break;for(let s=1;s<=n;s++){let a="".concat(e[r]).concat(s),l=t.includes(a),n="Normal",i=150;r>=0&&r<=2&&(n="Premium",i=200),r>=6&&(n="VIP",i=300),c.push({id:a,type:n,price:i,col:s,isBooked:l,isBlocked:!1})}c.length>0&&l.rows.push({rowLabel:e[r],offset:1,seats:c})}return l})()})();return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"".concat(aR().className," text-sm text-gray-300"),children:"Seat Layout"}),(0,a.jsxs)("div",{className:"bg-white/5 border border-gray-500/30 rounded-xl p-6",children:[(0,a.jsx)("div",{className:"text-center mb-4",children:(0,a.jsx)("div",{className:"inline-block px-8 py-2 bg-white/10 rounded text-gray-300 text-sm font-medium",children:"SCREEN"})}),(0,a.jsx)("div",{className:"flex flex-col items-center space-y-1",children:c.rows.map(e=>(0,a.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"repeat(".concat(c.maxCols,", 32px)"),gap:"4px"},children:[Array.from({length:e.offset}).map((s,t)=>(0,a.jsx)("div",{},"offset-".concat(e.rowLabel,"-").concat(t))),e.seats.map(e=>(0,a.jsx)("div",{style:{width:28,height:28,backgroundColor:(e=>{if(e.isBlocked||e.isBooked)return"#dc2626";switch(e.type){case"VIP":return"#ffd700";case"Premium":return"#9333ea";default:return"#6b7280"}})(e),color:(e=>e.isBlocked||e.isBooked?"#ffffff":"VIP"===e.type?"#1f2937":"#ffffff")(e),borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:e.col&&e.col>=10?8:10,fontWeight:"bold"},title:"".concat(e.id,": ").concat(e.type," @ Rs.").concat(e.price," ").concat(e.isBlocked?"(Blocked)":e.isBooked?"(Booked)":"(Available)"),children:(e=>{if(e.col)return e.col.toString();let s=e.id.match(/\d+$/);return s?s[0]:e.id.slice(-1)})(e)},e.id)),(0,a.jsx)("div",{className:"flex items-center justify-center text-gray-400 text-xs font-medium",children:e.rowLabel})]},e.rowLabel))}),(0,a.jsxs)("div",{className:"flex justify-center gap-6 mt-4 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-500 rounded"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Normal"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-purple-600 rounded"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Premium"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),(0,a.jsx)("span",{className:"text-gray-400",children:"VIP"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-red-600 rounded"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Booked/Blocked"})]})]}),(0,a.jsx)("div",{className:"text-center pt-4 border-t border-gray-500/30",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(l.className," text-gray-400 text-sm"),children:"Total"}),(0,a.jsx)("p",{className:"".concat(l.className," text-white font-medium"),children:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(l.className," text-gray-400 text-sm"),children:"Booked"}),(0,a.jsx)("p",{className:"".concat(l.className," text-red-400 font-medium"),children:t.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(l.className," text-gray-400 text-sm"),children:"Available"}),(0,a.jsx)("p",{className:"".concat(l.className," text-green-400 font-medium"),children:s-t.length})]})]})})]})]})},aM={SHOWTIMES_FOR_BOOKINGS:(e,s,t)=>"/owner/showtimes/".concat(e,"/").concat(s,"?date=").concat(t),BOOKING_DETAILS:e=>"/owner/bookings/".concat(e),BOOKING_BY_OWNER_ID:"/owner/bookings/by-owner"},a_=async(e,s,t)=>{let a=aM.SHOWTIMES_FOR_BOOKINGS(e,s,t);return(await M.A.get(a)).data},aO=async e=>(await M.A.get(aM.BOOKING_DETAILS(e))).data,aB=async()=>(await M.A.get(aM.BOOKING_BY_OWNER_ID)).data,aU=e=>{var s,t;let{showtime:r,theater:c,screen:n,date:i,onBack:o,lexendMedium:d,lexendSmall:x}=e,[m,h]=(0,l.useState)([]),[g,b]=(0,l.useState)([]),[p,N]=(0,l.useState)(""),[j,y]=(0,l.useState)("all"),[w,f]=(0,l.useState)(!0);(0,l.useEffect)(()=>{k()},[]),(0,l.useEffect)(()=>{S()},[m,p,j]);let k=async()=>{try{let e=await aO(r._id);console.log("booking respm",e.data),h(e.data),f(!1)}catch(e){f(!1)}},S=()=>{let e=m;p&&(e=e.filter(e=>{var s,t,a,l;return(null==(t=e.contactInfo)||null==(s=t.email)?void 0:s.toLowerCase().includes(p.toLowerCase()))||(null==(a=e.selectedSeats)?void 0:a.some(e=>e.toLowerCase().includes(p.toLowerCase())))||(null==(l=e.bookingId)?void 0:l.toLowerCase().includes(p.toLowerCase()))})),"all"!==j&&(e=e.filter(e=>e.bookingStatus===j)),b(e)},A=(null==(s=r.bookedSeats)?void 0:s.length)||0,C=Math.round(A/r.totalSeats*100),D=m.filter(e=>"cancelled"!==e.bookingStatus).reduce((e,s)=>{var t;return e+((null==(t=s.priceDetails)?void 0:t.total)||0)},0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:o,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300",children:(0,a.jsx)(s9.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(d.className," text-2xl text-white mb-1"),children:"Show Details"}),(0,a.jsxs)("p",{className:"".concat(x.className," text-gray-400"),children:[null==c?void 0:c.name,"  ",null==n?void 0:n.name,"  ",new Date(i).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("img",{src:r.movieId.poster,alt:r.movieId.title,className:"w-24 h-32 object-cover rounded-lg border border-gray-500/30"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"".concat(d.className," text-xl text-white"),children:r.movieId.title}),(0,a.jsxs)("p",{className:"".concat(x.className," text-gray-400"),children:[null==(t=r.language)?void 0:t.toUpperCase(),"  ",r.format]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(as.A,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{className:"".concat(d.className," text-blue-400 text-lg"),children:r.showTime})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(as.A,{className:"w-4 h-4 text-purple-400"}),(0,a.jsx)("span",{className:"".concat(d.className," text-purple-400 text-lg"),children:r.endTime})]})]}),(0,a.jsxs)("p",{className:"".concat(x.className," text-gray-400"),children:["Screen: ",r.screenId.name]})]})]}),(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,a.jsx)(s7.A,{className:"w-6 h-6 text-blue-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"".concat(x.className," text-gray-400 text-sm mb-1"),children:"Total Seats"}),(0,a.jsx)("p",{className:"".concat(d.className," text-white text-xl"),children:r.totalSeats})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,a.jsx)(s7.A,{className:"w-6 h-6 text-green-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"".concat(x.className," text-gray-400 text-sm mb-1"),children:"Booked"}),(0,a.jsx)("p",{className:"".concat(d.className," text-green-400 text-xl"),children:A})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,a.jsx)(s7.A,{className:"w-6 h-6 text-orange-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"".concat(x.className," text-gray-400 text-sm mb-1"),children:"Available"}),(0,a.jsx)("p",{className:"".concat(d.className," text-orange-400 text-xl"),children:r.totalSeats-A})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,a.jsx)(s0.A,{className:"w-6 h-6 text-yellow-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"".concat(x.className," text-gray-400 text-sm mb-1"),children:"Revenue"}),(0,a.jsxs)("p",{className:"".concat(d.className," text-yellow-400 text-xl"),children:["",D.toLocaleString()]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"".concat(x.className," text-gray-400"),children:"Theater Occupancy"}),(0,a.jsxs)("span",{className:"".concat(d.className," text-white"),children:[C,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-3",children:(0,a.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(C>=80?"bg-green-400":C>=60?"bg-yellow-400":"bg-red-400"),style:{width:"".concat(C,"%")}})})]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"".concat(d.className," text-lg text-white mb-4 flex items-center gap-2"),children:[(0,a.jsx)(v.A,{className:"w-5 h-5 text-purple-400"}),"Seat Layout"]}),(0,a.jsx)(aF,{totalSeats:r.totalSeats,bookedSeats:r.bookedSeats||[],showtime:r,lexendSmall:x})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[(0,a.jsxs)("h3",{className:"".concat(d.className," text-lg text-white flex items-center gap-2"),children:[(0,a.jsx)(s7.A,{className:"w-5 h-5 text-green-400"}),"Booking List (",g.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",value:p,onChange:e=>N(e.target.value),placeholder:"Search by email, seat, booking ID...",className:"".concat(d.className," pl-10 pr-4 py-2 bg-white/10 border border-gray-500/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white/50 w-64")})]}),(0,a.jsxs)("select",{value:j,onChange:e=>y(e.target.value),className:"".concat(d.className," px-3 py-2 bg-white/10 border border-gray-500/30 rounded-lg text-white focus:outline-none focus:border-white/50"),children:[(0,a.jsx)("option",{value:"all",className:"bg-gray-900",children:"All Status"}),(0,a.jsx)("option",{value:"confirmed",className:"bg-gray-900",children:"Confirmed"}),(0,a.jsx)("option",{value:"cancelled",className:"bg-gray-900",children:"Cancelled"})]}),(0,a.jsxs)("button",{onClick:()=>{var e,s;if(!g||0===g.length)return void alert("No data to export");let t=g.map(e=>{var s,t,a,l,i,o,d,x,m,h,u,g;let b={"Booking ID":e.bookingId||"N/A","Customer Email":(null==(s=e.userId)?void 0:s.email)||(null==(t=e.contactInfo)?void 0:t.email)||"N/A","Customer ID":(null==(l=e.userId)||null==(a=l._id)?void 0:a.slice(-8))||"N/A","Selected Seats":(null==(i=e.selectedSeats)?void 0:i.join(", "))||"No seats","Number of Seats":(null==(o=e.selectedSeats)?void 0:o.length)||0,Subtotal:(null==(d=e.priceDetails)?void 0:d.subtotal)||0,Taxes:(null==(x=e.priceDetails)?void 0:x.taxes)||0,"Convenience Fee":(null==(m=e.priceDetails)?void 0:m.convenienceFee)||0,"Total Amount":(null==(h=e.priceDetails)?void 0:h.total)||0,"Payment Status":e.paymentStatus||"N/A","Payment Method":e.paymentMethod||"N/A","Booking Status":e.bookingStatus||"N/A","Booking Date":new Date(e.bookedAt).toLocaleDateString("en-IN"),"Booking Time":new Date(e.bookedAt).toLocaleTimeString("en-IN"),"Show Date":new Date(e.showDate).toLocaleDateString("en-IN"),"Show Time":e.showTime||"N/A","Cancelled At":e.cancelledAt?new Date(e.cancelledAt).toLocaleDateString("en-IN"):"N/A","Movie Title":(null==(u=r.movieId)?void 0:u.title)||"N/A",Theater:(null==c?void 0:c.name)||"N/A",Screen:(null==n?void 0:n.name)||"N/A",Language:(null==(g=r.language)?void 0:g.toUpperCase())||"N/A",Format:r.format||"N/A"};return e.couponUsed?{...b,"Coupon Used":e.couponUsed.couponName||"N/A","Coupon Code":e.couponUsed.couponCode||"N/A","Discount %":e.couponUsed.discountPercentage?"".concat(e.couponUsed.discountPercentage,"%"):"N/A","Discount Amount":e.couponUsed.discountAmount||0,"Coupon Applied At":e.couponUsed.appliedAt?new Date(e.couponUsed.appliedAt).toLocaleDateString("en-IN"):"N/A"}:{...b,"Coupon Used":"No Coupon","Coupon Code":"N/A","Discount %":"0%","Discount Amount":0,"Coupon Applied At":"N/A"}}),a=aD.Wp.json_to_sheet(t);a["!cols"]=[{width:20},{width:25},{width:12},{width:20},{width:8},{width:12},{width:10},{width:15},{width:15},{width:15},{width:15},{width:15},{width:15},{width:12},{width:15},{width:10},{width:15},{width:25},{width:20},{width:15},{width:10},{width:8},{width:18},{width:15},{width:12},{width:15},{width:18}];let l=aD.Wp.book_new();aD.Wp.book_append_sheet(l,a,"Bookings");let i=new Date().toISOString().split("T")[0],o=(null==(s=r.movieId)||null==(e=s.title)?void 0:e.replace(/[^a-zA-Z0-9]/g,"_"))||"Movie",d="".concat(o,"_bookings_").concat(i,".xlsx");aD._h(l,d)},className:"".concat(d.className," flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-all duration-300"),children:[(0,a.jsx)(aT.A,{className:"w-4 h-4"}),"Export CSV"]})]})]}),(0,a.jsx)(aE,{bookings:g,isLoading:w,lexendMedium:d,lexendSmall:x})]})]})},aV=e=>{let{lexendMedium:s,lexendSmall:t}=e,[r,c]=(0,l.useState)(new Date().toISOString().split("T")[0]),[n,i]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[x,m]=(0,l.useState)([]),[h,u]=(0,l.useState)([]),[g,b]=(0,l.useState)([]),[p,N]=(0,l.useState)(!1),[j,y]=(0,l.useState)(null),[w,v]=(0,l.useState)(!1),[f,k]=(0,l.useState)(!0);(0,l.useEffect)(()=>{S()},[]),(0,l.useEffect)(()=>{if(n){let e=x.length>0&&n===x[0]._id&&!f;C(n,e)}else u([]),d("")},[n,x,f]),(0,l.useEffect)(()=>{r&&n&&o?T():b([])},[r,n,o]);let S=async()=>{try{let e=(await O()).data.theaters||[];m(e),f&&e.length>0&&(i(e[0]._id),k(!1))}catch(e){console.log(e)}},C=async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let t=(await to(e)).data||[];u(t),s&&t.length>0&&d(t[0]._id)}catch(e){console.log(e)}},T=async()=>{try{N(!0);let e=await a_(n,o,r);console.log("show suiii",e.data),b(e.data||[])}catch(e){b([]),console.log(e)}finally{N(!1)}};return w&&j?(0,a.jsx)(aU,{showtime:j,theater:x.find(e=>e._id===n),screen:h.find(e=>e._id===o),date:r,onBack:()=>{v(!1),y(null)},lexendMedium:s,lexendSmall:t}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat(s.className," text-3xl text-white mb-2"),children:"Booking Management"}),(0,a.jsx)("p",{className:"".concat(t.className," text-gray-400"),children:"Track and manage theater bookings by show"})]}),(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"".concat(t.className," text-gray-400 text-sm flex items-center gap-2"),children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),"Select Date"]}),(0,a.jsx)("input",{type:"date",value:r,onChange:e=>c(e.target.value),className:"".concat(s.className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300")})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"".concat(t.className," text-gray-400 text-sm flex items-center gap-2"),children:[(0,a.jsx)(A.A,{className:"w-4 h-4"}),"Select Theater"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:n,onChange:e=>{i(e.target.value),d("")},className:"".concat(s.className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 appearance-none"),children:[(0,a.jsx)("option",{value:"",className:"bg-gray-900",children:"Select Theater"}),x.map(e=>(0,a.jsx)("option",{value:e._id,className:"bg-gray-900",children:e.name},e._id))]}),(0,a.jsx)(aj.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"".concat(t.className," text-gray-400 text-sm flex items-center gap-2"),children:[(0,a.jsx)(s$.A,{className:"w-4 h-4"}),"Select Screen"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:o,onChange:e=>d(e.target.value),disabled:!n,className:"".concat(s.className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 appearance-none disabled:opacity-50 disabled:cursor-not-allowed"),children:[(0,a.jsx)("option",{value:"",className:"bg-gray-900",children:"Select Screen"}),h.map(e=>(0,a.jsxs)("option",{value:e._id,className:"bg-gray-900",children:[e.name," (",e.totalSeats," seats)"]},e._id))]}),(0,a.jsx)(aj.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})}),(0,a.jsx)("div",{className:"space-y-4",children:r&&n&&o?p?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 animate-pulse",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-20 bg-gray-600 rounded"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-3 bg-gray-600 rounded w-1/2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-600 rounded w-2/3"})]})]})},e))}):0===g.length?(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-12 text-center",children:[(0,a.jsx)(D.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"".concat(s.className," text-xl text-white mb-2"),children:"No Shows Found"}),(0,a.jsx)("p",{className:"".concat(t.className," text-gray-400"),children:"No showtimes scheduled for selected date and screen"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"".concat(s.className," text-xl text-white"),children:["Shows for ",new Date(r).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,a.jsxs)("p",{className:"".concat(t.className," text-gray-400"),children:[g.length," show",1!==g.length?"s":""," found"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(e=>(0,a.jsx)(aC,{showtime:e,onClick:()=>{y(e),v(!0)},lexendMedium:s,lexendSmall:t},e._id))})]}):(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-12 text-center",children:[(0,a.jsx)(D.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"".concat(s.className," text-xl text-white mb-2"),children:"Select Filters to View Shows"}),(0,a.jsx)("p",{className:"".concat(t.className," text-gray-400"),children:"Choose date, theater, and screen to see showtimes"})]})})]})};var az=t(33109),aW=t(21340),aH=t(79397),aG=t(1243);let aY=e=>{let{className:s=""}=e;return(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 animate-pulse ".concat(s),children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-600 rounded-xl"}),(0,a.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-6 bg-gray-600 rounded w-1/2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-600 rounded w-2/3"})]})]})})},aq=e=>{let{title:s,value:t,subtitle:l,icon:r,color:c,lexendMedium:n,lexendSmall:i}=e;return(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"p-3 ".concat({blue:"bg-blue-500/20 text-blue-400",green:"bg-green-500/20 text-green-400",yellow:"bg-yellow-500/20 text-yellow-400",purple:"bg-purple-500/20 text-purple-400",red:"bg-red-500/20 text-red-400"}[c]," rounded-xl"),children:(0,a.jsx)(r,{className:"w-6 h-6"})})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"".concat(i.className," text-gray-400 text-sm"),children:s}),(0,a.jsx)("p",{className:"".concat(n.className," text-2xl text-white font-semibold"),children:"number"==typeof t?t.toLocaleString("en-IN"):t}),l&&(0,a.jsx)("p",{className:"".concat(i.className," text-gray-500 text-xs"),children:l})]})]})},aK=e=>{let{dateRange:s,lexendMedium:t,lexendSmall:r}=e,[c,n]=(0,l.useState)(!0),[i,o]=(0,l.useState)(null);(0,l.useEffect)(()=>{s.startDate&&s.endDate&&d()},[s]);let d=async()=>{n(!0);try{let e=await (0,aW.Vi)(s);o(e.data)}catch(e){console.error("Error fetching operational analytics:",e)}finally{n(!1)}};if(c||!i)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,a.jsx)(aY,{},e))}),(0,a.jsx)(aY,{})]});let x=i.revenueGrowthRate.length>0?i.revenueGrowthRate.reduce((e,s)=>e+s.growthRate,0)/i.revenueGrowthRate.length:0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl text-white mb-2",style:t,children:"Operational Analytics"}),(0,a.jsx)("p",{className:"text-gray-400",style:r,children:"Monitor operational efficiency and growth trends"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(aq,{title:"Show Utilization",value:i.showUtilization.length,subtitle:"Active shows",icon:aH.A,color:"blue",lexendMedium:t,lexendSmall:r}),(0,a.jsx)(aq,{title:"Low Performing Slots",value:i.lowPerformingTimeSlots.length,subtitle:"Need attention",icon:aG.A,color:"red",lexendMedium:t,lexendSmall:r}),(0,a.jsx)(aq,{title:"Avg Growth Rate",value:"".concat(x.toFixed(1),"%"),subtitle:"Revenue growth",icon:az.A,color:"green",lexendMedium:t,lexendSmall:r})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg text-white mb-4 flex items-center gap-2",style:t,children:[(0,a.jsx)(aG.A,{className:"w-5 h-5 text-red-400"}),"Low Performing Time Slots"]}),(0,a.jsx)("div",{className:"space-y-3",children:0===i.lowPerformingTimeSlots.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(aH.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-400",style:t,children:"All time slots performing well!"})]}):i.lowPerformingTimeSlots.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-red-500/20 rounded-lg",children:(0,a.jsx)(as.A,{className:"w-4 h-4 text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",style:t,children:e.timeSlot}),(0,a.jsxs)("p",{className:"text-red-400 text-xs",style:r,children:[e.performance," performance"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-white text-sm",style:t,children:[e.avgOccupancy.toFixed(1),"% Occupancy"]}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs",style:r,children:["",e.totalRevenue.toLocaleString("en-IN")]})]})]},e.timeSlot))})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg text-white mb-4 flex items-center gap-2",style:t,children:[(0,a.jsx)(az.A,{className:"w-5 h-5 text-green-400"}),"Revenue Growth Trends"]}),(0,a.jsx)("div",{className:"space-y-3",children:i.revenueGrowthRate.slice(-6).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 ".concat("positive"===e.trend?"bg-green-500/20":"negative"===e.trend?"bg-red-500/20":"bg-gray-500/20"," rounded-lg flex items-center justify-center"),children:(0,a.jsx)("span",{className:"text-xs font-semibold ".concat("positive"===e.trend?"text-green-400":"negative"===e.trend?"text-red-400":"text-gray-400"),style:t,children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",style:t,children:e.period}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs capitalize",style:r,children:[e.trend," trend"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-white text-sm font-medium",style:t,children:["",e.totalRevenue.toLocaleString("en-IN")]}),(0,a.jsxs)("p",{className:"text-xs ".concat(e.growthRate>0?"text-green-400":e.growthRate<0?"text-red-400":"text-gray-400"),style:r,children:[e.growthRate>0?"+":"",e.growthRate.toFixed(1),"%"]})]})]},e.period))})]})]})]})};var aX=t(68500);let aQ=e=>{let{title:s,amount:t,growthRate:l,period:r,lexendMedium:c,lexendSmall:n}=e,i=l&&l>0;return(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:(0,a.jsx)(s0.A,{className:"w-6 h-6 text-blue-400"})}),void 0!==l&&(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg ".concat(i?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:[i?(0,a.jsx)(az.A,{className:"w-3 h-3"}):(0,a.jsx)(aX.A,{className:"w-3 h-3"}),(0,a.jsxs)("span",{className:"".concat(n.className," text-xs font-medium"),children:[Math.abs(l).toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"".concat(n.className," text-gray-400 text-sm"),children:s}),(0,a.jsxs)("p",{className:"".concat(c.className," text-2xl text-white font-semibold"),children:["",t.toLocaleString("en-IN")]}),(0,a.jsx)("p",{className:"".concat(n.className," text-gray-500 text-xs"),children:r})]})]})};var a$=t(14474),aJ=t(99445),aZ=t(96025),a0=t(52071),a4=t(27086),a2=t(64683),a3=t(41213),a1=t(90170),a5=t(18357),a6=t(54811),a8=t(3401),a9=t(5641);let a7=["#8884d8","#82ca9d","#ffc658","#ff8042","#a28ce3","#8dd1e1"],le=e=>{let{dateRange:s,lexendMedium:t,lexendSmall:r}=e,[c,n]=(0,l.useState)([]),[i,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{(async()=>{o(!0);try{let e=await (0,aW.kX)({months:6});if(null==e?void 0:e.data){let s=e.data.map(e=>({name:"".concat(e.period.month,"/").concat(e.period.year),revenue:e.totalRevenue||0,bookings:e.totalBookings||0}));n(s)}}catch(e){console.error("Error fetching revenue data:",e),n([])}finally{o(!1)}})()},[s]),i)?(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"h-64 bg-gray-600 rounded"})]})}):(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg text-white mb-4",style:t,children:"Monthly Revenue Trends"}),(0,a.jsx)(a$.u,{width:"100%",height:300,children:(0,a.jsxs)(aJ.Q,{data:c,margin:{top:10,right:30,left:0,bottom:0},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:.2})]})}),(0,a.jsx)(aZ.W,{dataKey:"name",stroke:"#9CA3AF",fontSize:12,tick:{fill:"#9CA3AF"}}),(0,a.jsx)(a0.h,{stroke:"#9CA3AF",fontSize:12,tick:{fill:"#9CA3AF"}}),(0,a.jsx)(a4.m,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px",color:"#F3F4F6"}}),(0,a.jsx)(a2.s,{}),(0,a.jsx)(a3.Gk,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorRevenue)",name:"Revenue ()"})]})})]})},ls=e=>{let{dateRange:s,lexendMedium:t,lexendSmall:r}=e,[c,n]=(0,l.useState)([]),[i,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{let e=async()=>{o(!0);try{let e=await (0,aW._7)(s);if(null==e?void 0:e.data){let s=e.data.map(e=>({name:e.format||"Unknown",value:e.totalRevenue||0,percentage:e.marketShare||0}));n(s)}}catch(e){console.error("Error fetching format data:",e),n([])}finally{o(!1)}};s.startDate&&s.endDate&&e()},[s]),i)?(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"h-64 bg-gray-600 rounded"})]})}):(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg text-white mb-4",style:t,children:"Revenue by Format"}),(0,a.jsx)(a$.u,{width:"100%",height:300,children:(0,a.jsxs)(a1.r,{children:[(0,a.jsx)(a5.F,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,percent:t}=e;return s&&void 0!==t?"".concat(s,": ").concat((100*t).toFixed(1),"%"):""},outerRadius:100,fill:"#8884d8",dataKey:"value",children:c.map((e,s)=>(0,a.jsx)(a6.f,{fill:a7[s%a7.length]},"cell-".concat(s)))}),(0,a.jsx)(a4.m,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px",color:"#F3F4F6"},formatter:e=>["".concat(e.toLocaleString("en-IN")),"Revenue"]}),(0,a.jsx)(a2.s,{})]})})]})},lt=e=>{let{dateRange:s,lexendMedium:t,lexendSmall:r}=e,[c,n]=(0,l.useState)([]),[i,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{let e=async()=>{o(!0);try{let e=await (0,aW.Zw)(s);if(null==e?void 0:e.data){let s=e.data.map(e=>({timeSlot:e.timeSlot||"",revenue:e.totalRevenue||0,occupancy:e.avgOccupancy||0}));n(s)}}catch(e){console.error("Error fetching time slot data:",e),n([])}finally{o(!1)}};s.startDate&&s.endDate&&e()},[s]),i)?(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"h-64 bg-gray-600 rounded"})]})}):(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg text-white mb-4",style:t,children:"Performance by Time Slot"}),(0,a.jsx)(a$.u,{width:"100%",height:300,children:(0,a.jsxs)(a8.E,{data:c,margin:{top:20,right:30,left:20,bottom:5},children:[(0,a.jsx)(aZ.W,{dataKey:"timeSlot",stroke:"#9CA3AF",fontSize:12,tick:{fill:"#9CA3AF"}}),(0,a.jsx)(a0.h,{stroke:"#9CA3AF",fontSize:12,tick:{fill:"#9CA3AF"}}),(0,a.jsx)(a4.m,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px",color:"#F3F4F6"}}),(0,a.jsx)(a2.s,{}),(0,a.jsx)(a9.y,{dataKey:"revenue",fill:"#8884d8",name:"Revenue ()"}),(0,a.jsx)(a9.y,{dataKey:"occupancy",fill:"#82ca9d",name:"Avg Occupancy (%)"})]})})]})},la=e=>{var s;let{dateRange:t,lexendMedium:r,lexendSmall:c}=e,[n,i]=(0,l.useState)(!0),[o,d]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),[u,g]=(0,l.useState)([]),[b,p]=(0,l.useState)([]);(0,l.useEffect)(()=>{N()},[t]);let N=async()=>{i(!0);try{let[e,s,a,l]=await Promise.all([(0,aW.kX)({months:6}),(0,aW.i6)(t),(0,aW.bm)(t),(0,aW.vn)(t)]);console.log("monthlyRes.data",e.data),console.log("theaterRes.data",s.data),console.log("screenRes.data",a.data),console.log("movieRes.data",l.data),d(e.data||[]),h(s.data||[]),g(a.data||[]),p(l.data||[])}catch(e){console.error("Error fetching revenue data:",e)}finally{i(!1)}},j=x.reduce((e,s)=>e+s.totalRevenue,0),y=x.reduce((e,s)=>e+s.totalBookings,0),w=y>0?j/y:0,v=o.length>1?null==(s=o[o.length-1])?void 0:s.growthRate:0;return n?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,a.jsx)(aY,{},e))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(aY,{}),(0,a.jsx)(aY,{})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"".concat(r.className," text-2xl text-white mb-2"),children:"Revenue Analytics"}),(0,a.jsx)("p",{className:"".concat(c.className," text-gray-400"),children:"Track your theater's financial performance"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(aQ,{title:"Total Revenue",amount:j,growthRate:v,period:"Selected Period",lexendMedium:r,lexendSmall:c}),(0,a.jsx)(aq,{title:"Total Bookings",value:y,subtitle:"Confirmed bookings",icon:D.A,color:"green",lexendMedium:r,lexendSmall:c}),(0,a.jsx)(aq,{title:"Average Ticket Price",value:"".concat(w.toFixed(0)),subtitle:"Per ticket",icon:s0.A,color:"blue",lexendMedium:r,lexendSmall:c}),(0,a.jsx)(aq,{title:"Active Theaters",value:x.length,subtitle:"Generating revenue",icon:m.A,color:"purple",lexendMedium:r,lexendSmall:c})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(le,{dateRange:t,lexendMedium:r,lexendSmall:c})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"".concat(r.className," text-lg text-white mb-4"),children:"Top Performing Theaters"}),(0,a.jsx)("div",{className:"space-y-3",children:x.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"".concat(r.className," text-blue-400 text-sm font-semibold"),children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(r.className," text-white text-sm"),children:e.theaterName}),(0,a.jsxs)("p",{className:"".concat(c.className," text-gray-400 text-xs"),children:[e.totalBookings," bookings"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"".concat(r.className," text-white text-sm"),children:["",e.totalRevenue.toLocaleString("en-IN")]}),(0,a.jsxs)("p",{className:"".concat(c.className," text-gray-400 text-xs"),children:[e.marketShare.toFixed(1),"% share"]})]})]},e.theaterId))})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"".concat(r.className," text-lg text-white mb-4"),children:"Top Performing Movies"}),(0,a.jsx)("div",{className:"space-y-3",children:b.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"".concat(r.className," text-green-400 text-sm font-semibold"),children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(r.className," text-white text-sm"),children:e.movieTitle}),(0,a.jsxs)("p",{className:"".concat(c.className," text-gray-400 text-xs"),children:[e.totalTickets," tickets sold"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"".concat(r.className," text-white text-sm"),children:["",e.totalRevenue.toLocaleString("en-IN")]}),(0,a.jsxs)("p",{className:"".concat(c.className," text-gray-400 text-xs"),children:[e.revenueShare.toFixed(1),"% share"]})]})]},e.movieId))})]})]})]})};var ll=t(16785),lr=t(74017),lc=t(6740),ln=t(6736);let li=e=>{let{dateRange:s,lexendMedium:t,lexendSmall:r}=e,[c,n]=(0,l.useState)(!0),[i,o]=(0,l.useState)(null);(0,l.useEffect)(()=>{s.startDate&&s.endDate&&d()},[s]);let d=async()=>{n(!0);try{let e=await (0,aW.Vd)(s);o(e.data)}catch(e){console.error("Error fetching financial KPIs:",e)}finally{n(!1)}};return c||!i?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,a.jsx)(aY,{},e))}),(0,a.jsx)(aY,{})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl text-white mb-2",style:t,children:"Financial KPIs"}),(0,a.jsx)("p",{className:"text-gray-400",style:r,children:"Key financial performance indicators and insights"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(aq,{title:"Revenue Realization",value:"".concat(i.potentialVsActual.realizationPercentage.toFixed(1),"%"),subtitle:"".concat(i.potentialVsActual.efficiency," efficiency"),icon:ll.A,color:"green",lexendMedium:t,lexendSmall:r}),(0,a.jsx)(aq,{title:"Pricing Effectiveness",value:i.dynamicPricingImpact.effectiveness.toUpperCase(),subtitle:"".concat(i.dynamicPricingImpact.pricingImpact.toFixed(1),"% impact"),icon:s0.A,color:"blue",lexendMedium:t,lexendSmall:r}),(0,a.jsx)(aq,{title:"Discount Impact",value:"".concat(i.discountImpact.discountPercentage.toFixed(1),"%"),subtitle:"ROI: ".concat(i.discountImpact.roi.toFixed(0),"%"),icon:lr.A,color:"yellow",lexendMedium:t,lexendSmall:r}),(0,a.jsx)(aq,{title:"Peak Hour Revenue",value:"".concat(i.peakHourRevenue.reduce((e,s)=>e+s.totalRevenue,0).toLocaleString("en-IN")),subtitle:"High-demand periods",icon:az.A,color:"purple",lexendMedium:t,lexendSmall:r})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg text-white mb-4 flex items-center gap-2",style:t,children:[(0,a.jsx)(lc.A,{className:"w-5 h-5 text-green-400"}),"Revenue Analysis"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsx)("span",{className:"text-gray-300",style:t,children:"Potential Revenue"}),(0,a.jsxs)("span",{className:"text-white font-semibold",style:t,children:["",i.potentialVsActual.potentialRevenue.toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsx)("span",{className:"text-gray-300",style:t,children:"Actual Revenue"}),(0,a.jsxs)("span",{className:"text-green-400 font-semibold",style:t,children:["",i.potentialVsActual.actualRevenue.toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsx)("span",{className:"text-gray-300",style:t,children:"Missed Opportunity"}),(0,a.jsxs)("span",{className:"text-red-400 font-semibold",style:t,children:["",i.potentialVsActual.missedOpportunity.toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",style:r,children:"Revenue Realization"}),(0,a.jsxs)("span",{className:"text-sm text-green-400 font-semibold",style:r,children:[i.potentialVsActual.realizationPercentage.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-green-400 h-3 rounded-full transition-all duration-500",style:{width:"".concat(i.potentialVsActual.realizationPercentage,"%")}})})]})]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg text-white mb-4 flex items-center gap-2",style:t,children:[(0,a.jsx)(ln.A,{className:"w-5 h-5 text-yellow-400"}),"Discount Analysis"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsx)("span",{className:"text-gray-300",style:t,children:"Total Bookings"}),(0,a.jsx)("span",{className:"text-white font-semibold",style:t,children:i.discountImpact.totalBookings.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsx)("span",{className:"text-gray-300",style:t,children:"Discounted Bookings"}),(0,a.jsx)("span",{className:"text-yellow-400 font-semibold",style:t,children:i.discountImpact.bookingsWithDiscount.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsx)("span",{className:"text-gray-300",style:t,children:"Total Discount Given"}),(0,a.jsxs)("span",{className:"text-red-400 font-semibold",style:t,children:["",i.discountImpact.totalDiscount.toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsx)("span",{className:"text-gray-300",style:t,children:"Discount ROI"}),(0,a.jsxs)("span",{className:"text-green-400 font-semibold",style:t,children:[i.discountImpact.roi.toFixed(1),"%"]})]})]})]})]})]})};var lo=t(40235),ld=t(34869),lx=t(18186);let lm=e=>{let{dateRange:s,lexendMedium:t,lexendSmall:r}=e,[c,n]=(0,l.useState)(!0),[i,o]=(0,l.useState)(null);(0,l.useEffect)(()=>{s.startDate&&s.endDate&&d()},[s]);let d=async()=>{n(!0);try{let e=await (0,aW.d8)(s);o(e.data)}catch(e){console.error("Error fetching movie analytics:",e)}finally{n(!1)}};return c||!i?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,a.jsx)(aY,{},e))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(aY,{}),(0,a.jsx)(aY,{})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl text-white mb-2",style:t,children:"Movie Analytics"}),(0,a.jsx)("p",{className:"text-gray-400",style:r,children:"Insights on movie performance and audience preferences"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(aq,{title:"Top Movies",value:i.topMovies.length,subtitle:"High performing films",icon:ew.A,color:"blue",lexendMedium:t,lexendSmall:r}),(0,a.jsx)(aq,{title:"Formats Available",value:i.formatPerformance.length,subtitle:"2D, 3D, IMAX options",icon:lo.A,color:"green",lexendMedium:t,lexendSmall:r}),(0,a.jsx)(aq,{title:"Languages",value:i.languagePerformance.length,subtitle:"Multi-language content",icon:ld.A,color:"purple",lexendMedium:t,lexendSmall:r})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(ls,{dateRange:s,lexendMedium:t,lexendSmall:r})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg text-white mb-4 flex items-center gap-2",style:t,children:[(0,a.jsx)(lx.A,{className:"w-5 h-5 text-yellow-400"}),"Top Performing Movies"]}),(0,a.jsx)("div",{className:"space-y-3",children:i.topMovies.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-yellow-400 text-sm font-semibold",style:t,children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",style:t,children:e.movieTitle}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs",style:r,children:[e.totalTickets," tickets  ",e.totalShows," shows"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-white text-sm font-medium",style:t,children:["",e.totalRevenue.toLocaleString("en-IN")]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(tF.A,{className:"w-3 h-3 text-yellow-400 fill-current"}),(0,a.jsxs)("span",{className:"text-yellow-400 text-xs",style:r,children:["Rank #",e.rank]})]})]})]},e.movieId))})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg text-white mb-4 flex items-center gap-2",style:t,children:[(0,a.jsx)(lo.A,{className:"w-5 h-5 text-blue-400"}),"Format Performance"]}),(0,a.jsx)("div",{className:"space-y-3",children:i.formatPerformance.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-blue-400 text-xs font-semibold",style:t,children:e.format})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-white font-medium",style:t,children:[e.format," Format"]}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs",style:r,children:[e.totalBookings," bookings"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-white text-sm",style:t,children:["",e.totalRevenue.toLocaleString("en-IN")]}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs",style:r,children:[e.marketShare.toFixed(1),"% share"]})]})]},e.format))})]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg text-white mb-4 flex items-center gap-2",style:t,children:[(0,a.jsx)(ld.A,{className:"w-5 h-5 text-green-400"}),"Language Performance"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.languagePerformance.map(e=>(0,a.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"text-white font-medium",style:t,children:e.language}),(0,a.jsxs)("span",{className:"text-green-400 text-sm",style:t,children:[e.marketShare.toFixed(1),"%"]})]}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm mb-1",style:r,children:["Revenue: ",e.totalRevenue.toLocaleString("en-IN")]}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs",style:r,children:[e.totalBookings," bookings  Avg: ",e.avgTicketPrice.toFixed(0)]})]},e.language))})]})]})};var lh=t(94498);let lu=e=>{let{dateRange:s,lexendMedium:t,lexendSmall:r}=e,[c,n]=(0,l.useState)(!0),[i,o]=(0,l.useState)(null);(0,l.useEffect)(()=>{s.startDate&&s.endDate&&d()},[s]);let d=async()=>{n(!0);try{let e=await (0,aW.O_)(s);o(e.data)}catch(e){console.error("Error fetching performance metrics:",e)}finally{n(!1)}};return c||!i?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,a.jsx)(aY,{},e))}),(0,a.jsx)(aY,{})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl text-white mb-2",style:t,children:"Performance Metrics"}),(0,a.jsx)("p",{className:"text-gray-400",style:r,children:"Track key performance indicators across your shows"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(aq,{title:"Occupancy Rate",value:"".concat(i.occupancy.occupancyPercentage.toFixed(1),"%"),subtitle:"".concat(i.occupancy.totalSeatsBooked.toLocaleString()," of ").concat(i.occupancy.totalSeatsAvailable.toLocaleString()," seats"),icon:lh.A,color:"blue",lexendMedium:t,lexendSmall:r}),(0,a.jsx)(aq,{title:"Average Ticket Price",value:"".concat(i.avgTicketPrice.toFixed(0)),subtitle:"Per ticket sold",icon:s0.A,color:"green",lexendMedium:t,lexendSmall:r}),(0,a.jsx)(aq,{title:"Total Shows",value:i.revenuePerShow.length,subtitle:"Active performances",icon:aH.A,color:"purple",lexendMedium:t,lexendSmall:r})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(lt,{dateRange:s,lexendMedium:t,lexendSmall:r})}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg text-white mb-4",style:t,children:"Performance by Time Slot"}),(0,a.jsx)("div",{className:"space-y-3",children:i.timeSlotPerformance.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:(0,a.jsx)(as.A,{className:"w-5 h-5 text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",style:t,children:e.timeSlot}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",style:r,children:[e.totalBookings," bookings"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-white text-sm",style:t,children:[e.avgOccupancy.toFixed(1),"% Occupancy"]}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs",style:r,children:[e.performance," performance"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-white text-sm",style:t,children:["",e.totalRevenue.toLocaleString("en-IN")]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(az.A,{className:"w-3 h-3 text-green-400"}),(0,a.jsx)("span",{className:"text-green-400 text-xs",style:r,children:"Revenue"})]})]})]})]},e.timeSlot))})]})]})},lg=e=>{let{startDate:s,endDate:t,timeframe:r,onStartDateChange:c,onEndDateChange:n,onTimeframeChange:i,lexendMedium:o,lexendSmall:d}=e,[x,m]=(0,l.useState)(""),h="custom"===r;return(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"".concat(d.className," text-gray-400 text-sm flex items-center gap-2"),children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),"Start Date"]}),(0,a.jsx)("input",{type:"date",value:s,onChange:e=>(e=>(m(""),e&&t&&e>t)?void m("Start date cannot be after end date"):e>new Date().toISOString().split("T")[0]?void m("Start date cannot be in the future"):void(c(e),"custom"!==r&&i("custom")))(e.target.value),disabled:!h,max:t||new Date().toISOString().split("T")[0],className:"".concat(o.className," w-full px-4 py-3 bg-white/10 border ").concat(x&&x.includes("Start")?"border-red-500":"border-gray-500/30"," rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 ").concat(h?"":"opacity-50 cursor-not-allowed")})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"".concat(d.className," text-gray-400 text-sm flex items-center gap-2"),children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),"End Date"]}),(0,a.jsx)("input",{type:"date",value:t,onChange:e=>(e=>(m(""),e&&s&&e<s)?void m("End date cannot be before start date"):e>new Date().toISOString().split("T")[0]?void m("End date cannot be in the future"):void(n(e),"custom"!==r&&i("custom")))(e.target.value),disabled:!h,min:s,max:new Date().toISOString().split("T")[0],className:"".concat(o.className," w-full px-4 py-3 bg-white/10 border ").concat(x&&x.includes("End")?"border-red-500":"border-gray-500/30"," rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 ").concat(h?"":"opacity-50 cursor-not-allowed")})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"".concat(d.className," text-gray-400 text-sm flex items-center gap-2"),children:"Timeframe"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:r,onChange:e=>(e=>{if(m(""),"custom"!==e){let s,t=new Date;switch(e){case"daily":s=new Date(t.getTime()-6048e5);break;case"weekly":s=new Date(t.getTime()-24192e5);break;case"monthly":s=new Date(t.getFullYear(),t.getMonth()-6,t.getDate());break;case"quarterly":s=new Date(t.getFullYear()-1,t.getMonth(),t.getDate());break;default:s=new Date(t.getTime()-2592e6)}c(s.toISOString().split("T")[0]),n(t.toISOString().split("T")[0])}i(e)})(e.target.value),className:"".concat(o.className," w-full px-4 py-3 bg-white/10 border border-gray-500/30 rounded-xl text-white focus:outline-none focus:border-white/50 focus:bg-white/15 transition-all duration-300 appearance-none"),children:[(0,a.jsx)("option",{value:"custom",className:"bg-gray-900",children:"Custom Range"}),(0,a.jsx)("option",{value:"daily",className:"bg-gray-900",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"weekly",className:"bg-gray-900",children:"Last 4 Weeks"}),(0,a.jsx)("option",{value:"monthly",className:"bg-gray-900",children:"Last 6 Months"}),(0,a.jsx)("option",{value:"quarterly",className:"bg-gray-900",children:"Last Year"})]}),(0,a.jsx)(aj.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),h&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"".concat(d.className," text-gray-400 text-sm"),children:"Quick Select"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("button",{onClick:()=>{m("");let e=new Date;c(new Date(e.getFullYear(),e.getMonth()-1,e.getDate()).toISOString().split("T")[0]),n(e.toISOString().split("T")[0])},className:"".concat(d.className," px-3 py-2 bg-white/10 border border-gray-500/30 rounded-lg text-white text-xs hover:bg-white/20 transition-all duration-300 text-center"),children:"Last 30 Days"}),(0,a.jsx)("button",{onClick:()=>{m("");let e=new Date;c(new Date(e.getTime()-6048e5).toISOString().split("T")[0]),n(e.toISOString().split("T")[0])},className:"".concat(d.className," px-3 py-2 bg-white/10 border border-gray-500/30 rounded-lg text-white text-xs hover:bg-white/20 transition-all duration-300 text-center"),children:"Last 7 Days"})]})]})]}),x&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"w-4 h-4 text-red-400"}),(0,a.jsx)("p",{className:"".concat(d.className," text-red-400 text-sm"),children:x})]})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-500/30",children:(0,a.jsx)("p",{className:"".concat(d.className," text-gray-400 text-xs"),children:h?"Custom range: ".concat(s," to ").concat(t):"Preset range: ".concat(r," (").concat(s," to ").concat(t,")")})})]})},lb={fontFamily:"Lexend",fontWeight:"500"},lp={fontFamily:"Lexend",fontWeight:"400"},lN=()=>{let[e,s]=(0,l.useState)("overview"),[t,r]=(0,l.useState)(()=>{let e=new Date;return e.setMonth(e.getMonth()-1),e.toISOString().split("T")[0]}),[c,n]=(0,l.useState)(()=>new Date().toISOString().split("T")[0]),[i,o]=(0,l.useState)("monthly"),[d,x]=(0,l.useState)(null),m={startDate:t,endDate:c,timeframe:i};(0,l.useEffect)(()=>{h()},[t,c]);let h=async()=>{try{let e=await (0,aW.dW)({startDate:t,endDate:c});x(e.data)}catch(e){console.error("Error fetching summary data:",e)}},u=[{id:"overview",label:"Overview",icon:sZ.A},{id:"revenue",label:"Revenue",icon:s0.A},{id:"performance",label:"Performance",icon:az.A},{id:"movies",label:"Movies",icon:s7.A},{id:"financial",label:"Financial KPIs",icon:s0.A},{id:"operational",label:"Operations",icon:sZ.A}];return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl text-white mb-2",style:lb,children:"Analytics Dashboard"}),(0,a.jsx)("p",{className:"text-gray-400",style:lp,children:"Comprehensive insights into your theater's performance"})]}),(0,a.jsx)(lg,{startDate:t,endDate:c,timeframe:i,onStartDateChange:r,onEndDateChange:n,onTimeframeChange:o,lexendMedium:lb,lexendSmall:lp}),d&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("div",{className:"p-3 bg-green-500/20 rounded-xl",children:(0,a.jsx)(s0.A,{className:"w-6 h-6 text-green-400"})})}),(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lp,children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl text-white font-semibold",style:lb,children:["",d.totalRevenue.toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:(0,a.jsx)(D.A,{className:"w-6 h-6 text-blue-400"})})}),(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lp,children:"Total Bookings"}),(0,a.jsx)("p",{className:"text-2xl text-white font-semibold",style:lb,children:d.totalBookings.toLocaleString()})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("div",{className:"p-3 bg-purple-500/20 rounded-xl",children:(0,a.jsx)(az.A,{className:"w-6 h-6 text-purple-400"})})}),(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lp,children:"Avg Occupancy"}),(0,a.jsxs)("p",{className:"text-2xl text-white font-semibold",style:lb,children:[d.avgOccupancy.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("div",{className:"p-3 bg-yellow-500/20 rounded-xl",children:(0,a.jsx)(s7.A,{className:"w-6 h-6 text-yellow-400"})})}),(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lp,children:"Top Theater"}),(0,a.jsx)("p",{className:"text-lg text-white font-semibold",style:lb,children:d.topPerformingTheater})]})]}),(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-2",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map(t=>{let l=t.icon;return(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"flex items-center gap-2 px-4 py-3 rounded-xl transition-all duration-300 ".concat(e===t.id?"bg-white/20 text-white border border-white/30":"text-gray-400 hover:text-white hover:bg-white/10"),children:[(0,a.jsx)(l,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",style:lb,children:t.label})]},t.id)})})}),(0,a.jsx)("div",{className:"min-h-[600px]",children:(()=>{switch(e){case"overview":return(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsx)(la,{dateRange:m,lexendMedium:lb,lexendSmall:lp})});case"revenue":default:return(0,a.jsx)(la,{dateRange:m,lexendMedium:lb,lexendSmall:lp});case"performance":return(0,a.jsx)(lu,{dateRange:m,lexendMedium:lb,lexendSmall:lp});case"movies":return(0,a.jsx)(lm,{dateRange:m,lexendMedium:lb,lexendSmall:lp});case"financial":return(0,a.jsx)(li,{dateRange:m,lexendMedium:lb,lexendSmall:lp});case"operational":return(0,a.jsx)(aK,{dateRange:m,lexendMedium:lb,lexendSmall:lp})}})()})]})})},lj=e=>{let{onDateRangeChange:s,defaultPeriod:t="today"}=e,[r,c]=(0,l.useState)(t),[n,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)(""),[x,m]=(0,l.useState)("");return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["today","week","month","custom"].map(e=>(0,a.jsxs)("button",{onClick:()=>(e=>{c(e),i("custom"===e),"custom"!==e&&s((e=>{let s=new Date,t=e=>e.toISOString().split("T")[0];switch(e){case"today":return{startDate:t(s),endDate:t(s)};case"week":let a=new Date(s);return a.setDate(s.getDate()-7),{startDate:t(a),endDate:t(s)};case"month":let l=new Date(s);return l.setMonth(s.getMonth()-1),{startDate:t(l),endDate:t(s)};default:return{startDate:o,endDate:x}}})(e))})(e),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ".concat(r===e?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-500/20 text-gray-400 border border-gray-500/30 hover:border-gray-400/30"),children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),"custom"===e?"Custom Range":e.charAt(0).toUpperCase()+e.slice(1)]},e))}),n&&(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-400 text-sm block mb-2"),children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:o,onChange:e=>d(e.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"".concat(tr().className," text-gray-400 text-sm block mb-2"),children:"End Date"}),(0,a.jsx)("input",{type:"date",value:x,onChange:e=>m(e.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none"})]})]}),(0,a.jsx)("button",{onClick:()=>{o&&x&&s({startDate:o,endDate:x})},disabled:!o||!x,className:"mt-4 px-4 py-2 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded-lg text-sm font-medium hover:bg-blue-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Apply Date Range"})]})]})};var ly=t(64261);let lw={fontFamily:"Lexend",fontWeight:"500"},lv={fontFamily:"Lexend",fontWeight:"400"},lf=e=>{var s;let{theaterId:t,dateRange:r}=e,[c,n]=(0,l.useState)(null),[i,o]=(0,l.useState)(!0),[d,x]=(0,l.useState)(null);if((0,l.useEffect)(()=>{(async()=>{try{o(!0);let e={theaterId:t,...r&&{startDate:r.startDate,endDate:r.endDate}},s=await (0,aW.i6)(e);console.log(s),n(s)}catch(e){console.error("Error fetching theater revenue:",e),x("Failed to load theater revenue")}finally{o(!1)}})()},[t,r]),i)return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"p-3 bg-gray-700/30 rounded-xl w-fit",children:(0,a.jsx)("div",{className:"w-6 h-6 bg-gray-600 rounded"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"w-20 h-4 bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"w-32 h-8 bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"w-24 h-3 bg-gray-700 rounded"})]})]})},s))});if(d||!c)return(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-red-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-red-500/20 rounded-xl",children:(0,a.jsx)(aX.A,{className:"w-6 h-6 text-red-400"})}),(0,a.jsx)("p",{className:"text-red-400",style:lv,children:d})]})});let m=null==(s=c.data)?void 0:s[0];if(!m)return(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-yellow-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-yellow-500/20 rounded-xl",children:(0,a.jsx)(ln.A,{className:"w-6 h-6 text-yellow-400"})}),(0,a.jsx)("p",{className:"text-yellow-400",style:lv,children:"Oops No Revenue data found for this screen. Maybe no bookings for this date"})]})});let{totalRevenue:h,totalBookings:u,avgTicketPrice:g,marketShare:b}=m;return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl p-4 text-white mb-2 flex items-center gap-2",style:lw,children:"Statistics :"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:(0,a.jsx)(s0.A,{className:"w-6 h-6 text-blue-400"})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lv,children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl text-white",style:lw,children:["",(null==h?void 0:h.toLocaleString("en-IN"))||"0"]}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",style:lv,children:r?"".concat(r.startDate," to ").concat(r.endDate):"Current Period"})]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"p-3 bg-green-500/20 rounded-xl",children:(0,a.jsx)(s7.A,{className:"w-6 h-6 text-green-400"})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lv,children:"Total Bookings"}),(0,a.jsx)("p",{className:"text-2xl text-white",style:lw,children:(null==u?void 0:u.toLocaleString("en-IN"))||"0"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",style:lv,children:"Confirmed tickets"})]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"p-3 bg-purple-500/20 rounded-xl",children:(0,a.jsx)(s4.A,{className:"w-6 h-6 text-purple-400"})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lv,children:"Avg Ticket Price"}),(0,a.jsxs)("p",{className:"text-2xl text-white",style:lw,children:["",(null==g?void 0:g.toFixed(2))||"0"]}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",style:lv,children:"Per ticket sold"})]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-3 bg-orange-500/20 rounded-xl",children:(0,a.jsx)(ln.A,{className:"w-6 h-6 text-orange-400"})}),b&&(0,a.jsxs)("div",{className:"flex items-center gap-1 px-3 py-2 rounded-xl bg-orange-500/20 border border-orange-500/30",children:[(0,a.jsx)(az.A,{className:"w-3 h-3 text-orange-400"}),(0,a.jsxs)("span",{className:"text-xs text-orange-400",style:lv,children:[b,"%"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lv,children:"Market Share"}),(0,a.jsxs)("p",{className:"text-2xl text-white",style:lw,children:[b||"0","%"]}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",style:lv,children:"Regional market"})]})]})]})]})},lk={fontFamily:"Lexend",fontWeight:"500"},lS={fontFamily:"Lexend",fontWeight:"400"},lA=e=>{let{onTheaterSelect:s}=e,[t,r]=(0,l.useState)([]),[c,n]=(0,l.useState)(!0),[i,o]=(0,l.useState)(null);return((0,l.useEffect)(()=>{(async()=>{try{n(!0);let e=await O({});console.log(e.data),r(e.data.theaters)}catch(e){console.error("Error fetching theaters:",e),o("Failed to load theaters")}finally{n(!1)}})()},[]),c)?(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:(0,a.jsx)(q.A,{className:"w-6 h-6 text-blue-400 animate-spin"})})})}):i?(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-red-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-red-500/20 rounded-xl",children:(0,a.jsx)(eP.A,{className:"w-6 h-6 text-red-400"})}),(0,a.jsx)("p",{className:"text-red-400",style:lS,children:i})]})}):t&&0!==t.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl p-4 text-white mb-2 flex items-center gap-2",style:lk,children:"Your Theaters"}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,a.jsxs)("button",{onClick:()=>s({id:e._id,name:e.name}),className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300 text-left group hover:bg-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-xl group-hover:bg-blue-500/30 transition-all duration-300",children:(0,a.jsx)(eP.A,{className:"w-6 h-6 text-blue-400"})}),(0,a.jsx)(ts.A,{className:"w-4 h-4 text-gray-500 group-hover:text-white transition-colors duration-300"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-white text-lg",style:lk,children:e.name}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",style:lS,children:"Click to view revenue details"})]})]},null==e?void 0:e._id))})]}):(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-8 text-center",children:[(0,a.jsx)("div",{className:"p-3 bg-gray-500/20 rounded-xl w-fit mx-auto mb-4",children:(0,a.jsx)(eP.A,{className:"w-6 h-6 text-gray-400"})}),(0,a.jsx)("p",{className:"text-white",style:lk,children:"No theaters found"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-2",style:lS,children:"Add your first theater to start managing revenue"})]})},lC={fontFamily:"Lexend",fontWeight:"500"},lD={fontFamily:"Lexend",fontWeight:"400"},lT=e=>{let{theaterId:s,onScreenSelect:t}=e,[r,c]=(0,l.useState)([]),[n,i]=(0,l.useState)(!0),[o,d]=(0,l.useState)(null);return((0,l.useEffect)(()=>{(async()=>{try{i(!0);let e=await to(s);c(e.data)}catch(e){console.error("Error fetching screens:",e),d("Failed to load screens")}finally{i(!1)}})()},[s]),n)?(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:(0,a.jsx)(q.A,{className:"w-6 h-6 text-blue-400 animate-spin"})})})}):o?(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-red-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-red-500/20 rounded-xl",children:(0,a.jsx)(s$.A,{className:"w-6 h-6 text-red-400"})}),(0,a.jsx)("p",{className:"text-red-400",style:lD,children:o})]})}):r&&0!==r.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl p-4 text-white mb-2 flex items-center gap-2",style:lC,children:"Your Screens :"}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(e=>(0,a.jsxs)("button",{onClick:()=>t({id:e._id,name:e.name,theaterId:s}),className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300 text-left group hover:bg-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-3 bg-purple-500/20 rounded-xl group-hover:bg-purple-500/30 transition-all duration-300",children:(0,a.jsx)(s$.A,{className:"w-6 h-6 text-purple-400"})}),(0,a.jsx)(ts.A,{className:"w-4 h-4 text-gray-500 group-hover:text-white transition-colors duration-300"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-white text-lg",style:lC,children:e.name}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",style:lD,children:"Click to view detailed revenue"})]})]},e._id))})]}):(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-8 text-center",children:[(0,a.jsx)("div",{className:"p-3 bg-gray-500/20 rounded-xl w-fit mx-auto mb-4",children:(0,a.jsx)(s$.A,{className:"w-6 h-6 text-gray-400"})}),(0,a.jsx)("p",{className:"text-white",style:lC,children:"No screens found in this theater"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-2",style:lD,children:"Add screens to this theater to view revenue data"})]})},lP={fontFamily:"Lexend",fontWeight:"500"},lI={fontFamily:"Lexend",fontWeight:"400"},lE=e=>{var s;let{screenId:t,screenName:r,theaterId:c,dateRange:n}=e,[i,o]=(0,l.useState)(null),[d,x]=(0,l.useState)(!0),[m,h]=(0,l.useState)(null),[u,g]=(0,l.useState)("today");if((0,l.useEffect)(()=>{(async()=>{try{x(!0);let e={screenId:t,theaterId:c};if(n)e.startDate=n.startDate,e.endDate=n.endDate;else{let s=(e=>{switch(e){case"today":case"week":default:return;case"month":return"monthly"}})(u);s&&(e.period=s)}let s=await (0,aW.bm)(e);o(s),console.log(s)}catch(e){console.error("Error fetching screen revenue:",e),h("Failed to load screen revenue")}finally{x(!1)}})()},[t,c,u,n]),d)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"w-64 h-8 bg-gray-600 rounded animate-pulse"}),(0,a.jsx)("div",{className:"w-48 h-8 bg-gray-600 rounded animate-pulse"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"p-3 bg-gray-700/30 rounded-xl w-fit",children:(0,a.jsx)("div",{className:"w-6 h-6 bg-gray-600 rounded"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"w-20 h-4 bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"w-32 h-8 bg-gray-600 rounded"}),(0,a.jsx)("div",{className:"w-24 h-3 bg-gray-700 rounded"})]})]})},s))})]});if(m||!i)return(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-red-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-red-500/20 rounded-xl",children:(0,a.jsx)(aX.A,{className:"w-6 h-6 text-red-400"})}),(0,a.jsx)("p",{className:"text-red-400",style:lI,children:m})]})});let b=null==(s=i.data)?void 0:s.find(e=>e.screenId===t);if(!b)return(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-yellow-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-yellow-500/20 rounded-xl",children:(0,a.jsx)(ll.A,{className:"w-6 h-6 text-yellow-400"})}),(0,a.jsx)("p",{className:"text-yellow-400",style:lI,children:"Oops No Revenue data found for this screen. Maybe no bookings for this date"})]})});let{totalRevenue:p,totalBookings:N,avgTicketPrice:j,utilizationRate:y}=b;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("h2",{className:"text-2xl text-white",style:lP,children:[r," Revenue Analytics"]}),!n&&(0,a.jsx)("div",{className:"flex gap-2",children:["today","week","month"].map(e=>(0,a.jsx)("button",{onClick:()=>g(e),className:"px-4 py-3 rounded-xl transition-all duration-300 ".concat(u===e?"bg-white/20 text-white border border-white/30":"hover:text-white hover:bg-white/10 text-gray-400 border border-gray-500/30"),style:lI,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),n&&(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-xl px-4 py-2",children:(0,a.jsxs)("p",{className:"text-gray-400 text-sm",style:lI,children:[n.startDate," to ",n.endDate]})})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:(0,a.jsx)(s0.A,{className:"w-6 h-6 text-blue-400"})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lI,children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl text-white",style:lP,children:["",(null==p?void 0:p.toLocaleString("en-IN"))||"0"]}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",style:lI,children:n?"".concat(n.startDate," to ").concat(n.endDate):"today"===u?"Today":"week"===u?"This Week":"This Month"})]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"p-3 bg-green-500/20 rounded-xl",children:(0,a.jsx)(D.A,{className:"w-6 h-6 text-green-400"})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lI,children:"Total Bookings"}),(0,a.jsx)("p",{className:"text-2xl text-white",style:lP,children:(null==N?void 0:N.toLocaleString("en-IN"))||"0"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",style:lI,children:"Confirmed tickets"})]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"p-3 bg-purple-500/20 rounded-xl",children:(0,a.jsx)(s4.A,{className:"w-6 h-6 text-purple-400"})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lI,children:"Avg Ticket Price"}),(0,a.jsxs)("p",{className:"text-2xl text-white",style:lP,children:["",(null==j?void 0:j.toFixed(2))||"0"]}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",style:lI,children:"Per ticket sold"})]})]}),(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6 hover:border-white/20 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-3 bg-orange-500/20 rounded-xl",children:(0,a.jsx)(ll.A,{className:"w-6 h-6 text-orange-400"})}),y&&(0,a.jsxs)("div",{className:"flex items-center gap-1 px-3 py-2 rounded-xl bg-orange-500/20 border border-orange-500/30",children:[(0,a.jsx)(az.A,{className:"w-3 h-3 text-orange-400"}),(0,a.jsxs)("span",{className:"text-xs text-orange-400",style:lI,children:[y,"%"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-1",style:lI,children:"Utilization Rate"}),(0,a.jsxs)("p",{className:"text-2xl text-white",style:lP,children:[y||"0","%"]}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",style:lI,children:"Seat occupancy"})]})]})]})]})},lL={fontFamily:"Lexend",fontWeight:"500"},lR={fontFamily:"Lexend",fontWeight:"400"},lF=()=>{let[e,s]=(0,l.useState)(null),[t,r]=(0,l.useState)(null),[c,n]=(0,l.useState)(null),[i,o]=(0,l.useState)(!1),[d,x]=(0,l.useState)([]),[m,h]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{(async()=>{try{h(!0);let e=await aB();console.log("Bookings data fetched:",e),e.success&&e.data&&x(e.data.bookings||[])}catch(e){console.error("Failed to fetch bookings data:",e)}finally{h(!1)}})()},[]),(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl text-white mb-2 flex items-center gap-2",style:lL,children:[(0,a.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:(0,a.jsx)(s0.A,{className:"w-6 h-6 text-blue-400"})}),"Revenue Management"]}),(0,a.jsx)("p",{className:"text-gray-400",style:lR,children:"View earnings, analyze trends and see your theater and screen revenue breakdown."})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{d.length>0&&(console.log("Exporting report with date range:",c),((e,s)=>{let{processedData:t,filteredBookingsCount:a,totalBookingsCount:l}=e,r=aD.Wp.book_new(),c=Object.values(t).reduce((e,s)=>({totalRevenue:e.totalRevenue+s.totalRevenue,totalBookings:e.totalBookings+s.totalBookings,totalTickets:e.totalTickets+s.totalTickets,totalTheaters:e.totalTheaters+1,totalScreens:e.totalScreens+Object.keys(s.screens).length}),{totalRevenue:0,totalBookings:0,totalTickets:0,totalTheaters:0,totalScreens:0}),n=(e=>{if(!e)return"All Time";let s=new Date(e.startDate).toLocaleDateString("en-IN"),t=new Date(e.endDate).toLocaleDateString("en-IN");return"".concat(s," to ").concat(t)})(s),i=(e=>{if(!e)return 0;let s=new Date(e.startDate);return Math.ceil(Math.abs(new Date(e.endDate).getTime()-s.getTime())/864e5)+1})(s),o=[{Metric:"\uD83D\uDCC5 REPORT PERIOD",Value:""},{Metric:"Date Range",Value:n},{Metric:"Duration (Days)",Value:s?"".concat(i," days"):"All Time"},{Metric:"Report Generated On",Value:new Date().toLocaleString("en-IN")},{Metric:"",Value:""},{Metric:"\uD83D\uDCB0 REVENUE METRICS",Value:""},{Metric:"Total Revenue",Value:"".concat(c.totalRevenue.toLocaleString("en-IN"))},{Metric:"Average Daily Revenue",Value:s?"".concat((c.totalRevenue/i).toFixed(2)):"N/A"},{Metric:"Average Revenue per Ticket",Value:"".concat((c.totalRevenue/c.totalTickets).toFixed(2))},{Metric:"Average Revenue per Theater",Value:"".concat((c.totalRevenue/c.totalTheaters).toFixed(2))},{Metric:"",Value:""},{Metric:"\uD83C\uDF9F BOOKING METRICS",Value:""},{Metric:"Total Bookings (Filtered)",Value:a.toLocaleString("en-IN")},{Metric:"Total Bookings (All Time)",Value:l.toLocaleString("en-IN")},{Metric:"Total Tickets Sold",Value:c.totalTickets.toLocaleString("en-IN")},{Metric:"Average Daily Bookings",Value:s?"".concat((a/i).toFixed(1)):"N/A"},{Metric:"Average Tickets per Booking",Value:"".concat((c.totalTickets/c.totalBookings).toFixed(1))},{Metric:"",Value:""},{Metric:"\uD83C\uDFE2 INFRASTRUCTURE METRICS",Value:""},{Metric:"Total Theaters",Value:c.totalTheaters},{Metric:"Total Screens",Value:c.totalScreens},{Metric:"Average Screens per Theater",Value:"".concat((c.totalScreens/c.totalTheaters).toFixed(1))}],d=aD.Wp.json_to_sheet(o);d["!cols"]=[{width:35},{width:30}],aD.Wp.book_append_sheet(r,d,"Executive Summary");let x=[{"S.No":"\uD83D\uDCC5 PERIOD: ".concat(n),"Theater Name":"","Total Revenue ()":"","Total Bookings":"","Total Tickets":"","Number of Screens":"","Avg Revenue per Screen ()":"","Market Share (%)":"","Daily Avg Revenue ()":""},{},...Object.values(t).map((e,t)=>({"S.No":t+1,"Theater Name":e.theaterName,"Total Revenue ()":e.totalRevenue.toLocaleString("en-IN"),"Total Bookings":e.totalBookings,"Total Tickets":e.totalTickets,"Number of Screens":Object.keys(e.screens).length,"Avg Revenue per Screen ()":(e.totalRevenue/Object.keys(e.screens).length).toFixed(2),"Market Share (%)":(e.totalRevenue/c.totalRevenue*100).toFixed(2)+"%","Daily Avg Revenue ()":s?(e.totalRevenue/i).toFixed(2):"N/A"}))],m=aD.Wp.json_to_sheet(x);m["!cols"]=[{width:8},{width:25},{width:18},{width:15},{width:15},{width:15},{width:20},{width:15},{width:18}],aD.Wp.book_append_sheet(r,m,"Theater Overview");let h=[];h.push({Theater:"\uD83D\uDCC5 REPORT PERIOD: ".concat(n),Screen:"Showing ".concat(a," of ").concat(l," total bookings"),"Booking ID":"",Movie:"","Customer Email":"",Seats:"",Tickets:"","Subtotal ()":"","Taxes ()":"","Convenience Fee ()":"","Discount ()":"","Final Amount ()":"","Coupon Used":"","Discount %":"","Booking Date":"","Show Date":"","Show Time":"","Payment Method":""}),h.push({}),Object.values(t).forEach(e=>{h.push({Theater:"\uD83C\uDFE2 ".concat(e.theaterName.toUpperCase()),Screen:"Revenue: ".concat(e.totalRevenue.toLocaleString("en-IN")," | Bookings: ").concat(e.totalBookings," | Tickets: ").concat(e.totalTickets),"Booking ID":"",Movie:"","Customer Email":"",Seats:"",Tickets:"","Subtotal ()":"","Taxes ()":"","Convenience Fee ()":"","Discount ()":"","Final Amount ()":"","Coupon Used":"","Discount %":"","Booking Date":"","Show Date":"","Show Time":"","Payment Method":""}),Object.values(e.screens).forEach(e=>{h.push({Theater:"",Screen:"\uD83D\uDCFA ".concat(e.screenName),"Booking ID":"Revenue: ".concat(e.totalRevenue.toLocaleString("en-IN")),Movie:"Bookings: ".concat(e.totalBookings),"Customer Email":"Tickets: ".concat(e.totalTickets),Seats:"Avg/Ticket: ".concat(e.avgTicketPrice.toFixed(2)),Tickets:"","Subtotal ()":"","Taxes ()":"","Convenience Fee ()":"","Discount ()":"","Final Amount ()":"","Coupon Used":"","Discount %":"","Booking Date":"","Show Date":"","Show Time":"","Payment Method":""}),e.bookings.forEach(e=>{h.push({Theater:"",Screen:"","Booking ID":e.bookingId,Movie:e.movieTitle,"Customer Email":e.userEmail,Seats:e.seats,Tickets:e.ticketCount,"Subtotal ()":e.subtotal,"Taxes ()":e.taxes,"Convenience Fee ()":e.convenienceFee,"Discount ()":e.discount,"Final Amount ()":e.finalAmount,"Coupon Used":e.couponUsed,"Discount %":e.discountPercentage,"Booking Date":e.bookingDate,"Show Date":e.showDate,"Show Time":e.showTime,"Payment Method":e.paymentMethod})}),h.push({Theater:"",Screen:" ".concat(e.screenName," TOTAL"),"Booking ID":"",Movie:"","Customer Email":"",Seats:"",Tickets:e.totalTickets,"Subtotal ()":"","Taxes ()":"","Convenience Fee ()":"","Discount ()":"","Final Amount ()":"".concat(e.totalRevenue.toLocaleString("en-IN")),"Coupon Used":"","Discount %":"","Booking Date":"","Show Date":"","Show Time":"","Payment Method":""}),h.push({})}),h.push({Theater:" ".concat(e.theaterName.toUpperCase()," TOTAL"),Screen:"","Booking ID":"",Movie:"","Customer Email":"",Seats:"",Tickets:e.totalTickets,"Subtotal ()":"","Taxes ()":"","Convenience Fee ()":"","Discount ()":"","Final Amount ()":"".concat(e.totalRevenue.toLocaleString("en-IN")),"Coupon Used":"","Discount %":"","Booking Date":"","Show Date":"","Show Time":"","Payment Method":""}),h.push({},{})}),h.push({Theater:" GRAND TOTAL - ".concat(n),Screen:"".concat(a," bookings in period"),"Booking ID":"",Movie:"","Customer Email":"",Seats:"",Tickets:c.totalTickets,"Subtotal ()":"","Taxes ()":"","Convenience Fee ()":"","Discount ()":"","Final Amount ()":"".concat(c.totalRevenue.toLocaleString("en-IN")),"Coupon Used":"","Discount %":"","Booking Date":"","Show Date":"","Show Time":"","Payment Method":""});let u=aD.Wp.json_to_sheet(h);u["!cols"]=[{width:25},{width:20},{width:18},{width:25},{width:25},{width:15},{width:10},{width:12},{width:10},{width:15},{width:12},{width:15},{width:20},{width:12},{width:15},{width:12},{width:12},{width:15}],aD.Wp.book_append_sheet(r,u,"Detailed Bookings");let g=new Date().toISOString().split("T")[0],b=s?"_".concat(s.startDate,"_to_").concat(s.endDate):"_AllTime",p="Theater_Revenue_Report".concat(b,"_").concat(g,".xlsx");aD._h(r,p,{compression:!0})})(((e,s)=>{let t=((e,s)=>{if(!s)return e;let t=new Date(s.startDate),a=new Date(s.endDate);return a.setHours(23,59,59,999),e.filter(e=>{let s=new Date(e.bookedAt);return s>=t&&s<=a})})(e,s),a={};return t.forEach(e=>{let s=e.theaterId._id,t=e.theaterId.name,l=e.screenId._id,r=e.screenId.name;a[s]||(a[s]={theaterName:t,theaterId:s,totalRevenue:0,totalBookings:0,totalTickets:0,screens:{}}),a[s].screens[l]||(a[s].screens[l]={screenName:r,totalRevenue:0,totalBookings:0,totalTickets:0,avgTicketPrice:0,bookings:[]});let c=e.selectedSeats.length,n=e.couponUsed?"".concat(e.couponUsed.couponName," (").concat(e.couponUsed.couponCode,")"):"No Coupon",i=e.couponUsed?"".concat(e.couponUsed.discountPercentage,"%"):"N/A",o={bookingId:e.bookingId,movieTitle:e.movieId.title,userEmail:e.userId.email,seats:e.selectedSeats.join(", "),ticketCount:c,subtotal:e.priceDetails.subtotal,taxes:e.priceDetails.taxes,convenienceFee:e.priceDetails.convenienceFee,discount:e.priceDetails.discount,finalAmount:e.priceDetails.total,couponUsed:n,discountPercentage:i,bookingDate:new Date(e.bookedAt).toLocaleDateString("en-IN"),showDate:new Date(e.showDate).toLocaleDateString("en-IN"),showTime:e.showTime,paymentMethod:e.paymentMethod};a[s].screens[l].bookings.push(o),a[s].screens[l].totalRevenue+=e.priceDetails.total,a[s].screens[l].totalBookings+=1,a[s].screens[l].totalTickets+=c,a[s].totalRevenue+=e.priceDetails.total,a[s].totalBookings+=1,a[s].totalTickets+=c}),Object.values(a).forEach(e=>{Object.values(e.screens).forEach(e=>{e.avgTicketPrice=e.totalTickets>0?e.totalRevenue/e.totalTickets:0})}),{processedData:a,filteredBookingsCount:t.length,totalBookingsCount:e.length}})(d,c),c))},disabled:!d.length||m,className:"flex items-center gap-2 px-4 py-3 rounded-xl bg-green-500/20 text-green-400 border border-green-500/30 hover:bg-green-500/30 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",style:lL,children:[m?(0,a.jsx)(q.A,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(ly.A,{className:"w-4 h-4"}),"Export Report"]}),(0,a.jsxs)("button",{onClick:()=>o(!i),className:"flex items-center gap-2 px-4 py-1 rounded-xl transition-all duration-300 ".concat(i?"bg-white/20 text-white border border-white/30":"hover:text-white hover:bg-white/10 text-gray-400 border border-gray-500/30"),style:lL,children:[(0,a.jsx)(L.A,{className:"w-4 h-4"}),"Filters"]})]})]}),m&&(0,a.jsx)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsx)(q.A,{className:"w-5 h-5 text-blue-400 animate-spin"}),(0,a.jsx)("p",{className:"text-gray-400",style:lR,children:"Loading booking data..."})]})}),i&&(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-xl text-white",style:lL,children:"Date Range Filter"}),c&&(0,a.jsx)("button",{onClick:()=>n(null),className:"text-sm text-red-400 hover:text-red-300 underline",style:lR,children:"Clear Filter"})]}),(0,a.jsx)(lj,{onDateRangeChange:e=>n(e)}),c&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:(0,a.jsxs)("p",{className:"text-blue-400 text-sm",style:lR,children:["\uD83D\uDCC5 Filtering from ",new Date(c.startDate).toLocaleDateString("en-IN")," to ",new Date(c.endDate).toLocaleDateString("en-IN")]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[e&&(0,a.jsxs)("button",{onClick:()=>{s(null),r(null)},className:"px-4 py-3 rounded-xl transition-all duration-300 bg-blue-500/20 text-blue-400 border border-blue-500/30 hover:bg-white/10",style:lR,children:[(0,a.jsx)(s9.A,{className:"inline w-4 h-4 mr-1"})," Theaters"]}),e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"/"}),(0,a.jsx)("button",{onClick:t?()=>r(null):void 0,className:"px-4 py-3 rounded-xl transition-all duration-300 ".concat(t?"text-blue-400 hover:bg-white/10":"text-white"),style:lR,children:e.name})]}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"/"}),(0,a.jsx)("span",{className:"text-white px-4 py-3",style:lR,children:t.name})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[e&&!t&&(0,a.jsx)(lf,{theaterId:e.id,dateRange:c}),e?t?(0,a.jsx)(lE,{screenId:t.id,screenName:t.name,theaterId:t.theaterId,dateRange:c}):(0,a.jsx)(lT,{theaterId:e.id,onScreenSelect:e=>r(e)}):(0,a.jsx)(lA,{onTheaterSelect:e=>{s(e),r(null)}})]})]})})},lM={WALLET:"/owner/wallet",TRANSACTIONS:"/owner/transaction"},l_=async()=>(await M.A.get(lM.WALLET)).data,lO=async()=>(await M.A.get(lM.TRANSACTIONS)).data;var lB=t(11518),lU=t.n(lB),lV=t(53904),lz=t(75525);let lW={CREATE_ORDER:"/owner/payout/create-order",CONFIRM_ORDER:"/owner/payout/confirm"},lH=async e=>(await M.A.post(lW.CREATE_ORDER,e)).data,lG=async e=>(await M.A.post(lW.CONFIRM_ORDER,e)).data,lY={fontFamily:"Lexend, sans-serif",fontWeight:500},lq={fontFamily:"Lexend, sans-serif",fontWeight:400},lK=e=>{let{isOpen:s,onClose:t,onConfirm:l,title:r,message:c,amount:n,mode:i,walletBalance:o}=e;if(!s)return null;let d=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e);return(0,a.jsx)("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/90 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"bg-black border border-gray-600 rounded-2xl shadow-2xl p-6 w-full max-w-md text-center relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("button",{onClick:()=>{console.log("Close clicked"),t()},className:"absolute top-0 right-0 p-2 hover:bg-gray-800 rounded-lg transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})}),(0,a.jsx)("h2",{className:"text-2xl text-white font-bold mb-3",style:lY,children:r}),(0,a.jsxs)("div",{className:"border border-white rounded-xl p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(s0.A,{className:"w-5 h-5 text-yellow-400"}),(0,a.jsx)("span",{className:"text-gray-400 text-sm",style:lq,children:"Transfer Amount"})]}),(0,a.jsx)("p",{className:"text-3xl text-white font-bold",style:lY,children:d(n)}),(0,a.jsxs)("p",{className:"text-yellow-400 text-sm mt-1",style:lq,children:["via ",i]})]}),(0,a.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-4 text-left",children:[(0,a.jsx)("h3",{className:"text-white font-medium mb-3 text-center",style:lY,children:"Wallet Changes"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400",style:lq,children:"Current Balance"}),(0,a.jsx)("span",{className:"text-white font-medium",style:lq,children:d(o)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400",style:lq,children:"Transfer Amount"}),(0,a.jsxs)("span",{className:"text-red-400 font-medium",style:lq,children:["-",d(n)]})]}),(0,a.jsx)("div",{className:"border-t border-gray-700 pt-2 mt-2",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-white font-medium",style:lY,children:"New Balance"}),(0,a.jsx)("span",{className:"text-green-400 font-bold",style:lY,children:d(o-n)})]})})]})]}),(0,a.jsx)("div",{className:"border border-gray-500 rounded-lg p-3 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-white text-xs",style:lq,children:[(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)(aP.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Money will be transferred to your registered bank account"})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)(aP.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"This action cannot be undone"})]})]})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",onMouseDown:()=>console.log("Cancel mousedown"),onClick:()=>{console.log("Cancel clicked!"),t()},className:"flex-1 px-6 py-3 border border-gray-600 text-gray-400 rounded-lg hover:bg-gray-800 transition-all duration-300 cursor-pointer",style:lY,children:"Cancel"}),(0,a.jsx)("button",{type:"button",onMouseDown:()=>console.log("Confirm mousedown"),onClick:()=>{console.log("Confirm clicked!"),l()},className:"flex-1 px-6 py-3 bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-600 hover:to-yellow-400 text-white rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-yellow-500/10 transform hover:scale-105 cursor-pointer",style:lY,children:"Confirm Transfer"})]})]})]})})},lX={fontFamily:"Lexend, sans-serif",fontWeight:500},lQ={fontFamily:"Lexend, sans-serif",fontWeight:400},l$=e=>{var s;let{isOpen:t,message:r,amount:c,mode:n}=e,[i,o]=(0,l.useState)(0),[d,x]=(0,l.useState)(0),[m,h]=(0,l.useState)(!1),u=[{label:"Validating transfer...",duration:2e3},{label:"Processing payment...",duration:2500},{label:"Contacting bank...",duration:2e3},{label:"Completing transfer...",duration:1e3}];return((0,l.useEffect)(()=>{if(!t){o(0),x(0),h(!1);return}let e=0,s=()=>{e<4500?(o(e/4500*60),e<2e3?x(0):e<4500&&x(1)):e<7500&&(x(2),o(60+(e-4500)/3e3*40),e>6500&&(x(3),h(!0))),(e+=100)<7500?setTimeout(s,100):(o(100),h(!0))};s()},[t]),t)?(0,a.jsxs)("div",{className:"jsx-77c20f84b1c37e76 fixed inset-0 z-[80] flex items-center justify-center bg-black/95 backdrop-blur-sm p-4",children:[(0,a.jsxs)("div",{className:"jsx-77c20f84b1c37e76 bg-black border border-gray-600 rounded-2xl shadow-2xl p-8 w-full max-w-md text-center relative overflow-hidden",children:[(0,a.jsx)("div",{className:"jsx-77c20f84b1c37e76 absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-green-500/10 animate-pulse"}),(0,a.jsxs)("div",{className:"jsx-77c20f84b1c37e76 relative z-10",children:[(0,a.jsxs)("div",{className:"jsx-77c20f84b1c37e76 relative mb-6",children:[(0,a.jsxs)("div",{className:"jsx-77c20f84b1c37e76 mx-auto w-24 h-24 relative",children:[(0,a.jsxs)("svg",{viewBox:"0 0 100 100",className:"jsx-77c20f84b1c37e76 w-24 h-24 transform -rotate-90",children:[(0,a.jsx)("circle",{cx:"50",cy:"50",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"jsx-77c20f84b1c37e76 text-gray-700"}),(0,a.jsx)("circle",{cx:"50",cy:"50",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:"".concat(2*Math.PI*40),strokeDashoffset:"".concat(2*Math.PI*40*(1-i/100)),style:{transitionDuration:i>60?"0.1s":"0.5s"},className:"jsx-77c20f84b1c37e76 "+"transition-all duration-300 ".concat(m?"text-green-400":"text-blue-400")})]}),(0,a.jsx)("div",{className:"jsx-77c20f84b1c37e76 absolute inset-0 flex items-center justify-center",children:m?(0,a.jsx)(aP.A,{className:"w-8 h-8 text-green-400"}):(0,a.jsxs)("span",{style:lX,className:"jsx-77c20f84b1c37e76 text-2xl font-bold text-white",children:[Math.round(i),"%"]})})]}),!m&&(0,a.jsx)("div",{className:"jsx-77c20f84b1c37e76 absolute inset-0 mx-auto w-24 h-24 border-2 border-blue-400/30 rounded-full"})]}),(0,a.jsxs)("div",{className:"jsx-77c20f84b1c37e76 mb-6",children:[(0,a.jsx)("h2",{style:lX,className:"jsx-77c20f84b1c37e76 text-2xl text-white font-bold mb-2",children:m?"Transfer Complete!":"Processing Transfer"}),(0,a.jsxs)("div",{className:"jsx-77c20f84b1c37e76  border border-white rounded-lg p-3 mb-4",children:[(0,a.jsx)("p",{style:lX,className:"jsx-77c20f84b1c37e76 text-3xl text-white font-bold",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(c)}),(0,a.jsxs)("p",{style:lQ,className:"jsx-77c20f84b1c37e76 text-blue-400 text-sm",children:["via ",n]})]})]}),(0,a.jsxs)("div",{className:"jsx-77c20f84b1c37e76 mb-6",children:[(0,a.jsx)("div",{className:"jsx-77c20f84b1c37e76 flex items-center justify-center gap-2 mb-3",children:u.map((e,s)=>(0,a.jsx)("div",{className:"jsx-77c20f84b1c37e76 "+"w-2 h-2 rounded-full transition-all duration-300 ".concat(s<=d?"bg-blue-400":"bg-gray-600")},s))}),(0,a.jsx)("p",{style:lQ,className:"jsx-77c20f84b1c37e76 text-gray-300 text-sm animate-pulse",children:(null==(s=u[d])?void 0:s.label)||"Finalizing..."})]}),!m&&(0,a.jsx)("div",{className:"jsx-77c20f84b1c37e76 border border-gray-200 rounded-lg p-3",children:(0,a.jsx)("p",{style:lQ,className:"jsx-77c20f84b1c37e76 text-white text-xs",children:"Secure transfer in progress. Please do not close this window."})}),m&&(0,a.jsx)("div",{className:"jsx-77c20f84b1c37e76 mt-4 p-3 border border-gray-200 rounded-lg animate-fadeIn",children:(0,a.jsx)("p",{style:lQ,className:"jsx-77c20f84b1c37e76 text-green-400 text-sm",children:"Money will appear in your bank account shortly!"})})]})]}),(0,a.jsx)(lU(),{id:"77c20f84b1c37e76",children:"@keyframes fadeIn{from{opacity:0;transform:translatey(10px)}to{opacity:1;transform:translatey(0)}}.animate-fadeIn.jsx-77c20f84b1c37e76{animation:fadeIn.5s ease-out}"})]}):null};var lJ=t(59362);let lZ={fontFamily:"Lexend, sans-serif",fontWeight:500},l0={fontFamily:"Lexend, sans-serif",fontWeight:400},l4=e=>{let{walletBalance:s,onClose:t,onSuccess:r,onShowResult:c}=e,[n,i]=(0,l.useState)(s),[o,d]=(0,l.useState)("IMPS"),[x,m]=(0,l.useState)(!1),[h,u]=(0,l.useState)(!1),[g,b]=(0,l.useState)(!1),[p,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{window.Razorpay?u(!0):new Promise(e=>{let s=document.createElement("script");s.src="https://checkout.razorpay.com/v1/checkout.js",s.onload=()=>{u(!0),e(!0)},s.onerror=()=>e(!1),document.body.appendChild(s)})},[]);let j=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e),y=async()=>{b(!0)},w=async()=>{console.log("Opening Razorpay for payout confirmation"),b(!1);try{m(!0);let e=await lH({amount:n,mode:o,purpose:"vendor_payment"});if(!e.success)throw Error(e.message);new window.Razorpay({key:"rzp_test_UfKgHw2DzvZjyn",amount:100*n,currency:"INR",name:"Theater Earnings Payout",description:"Transfer ".concat(n," to your bank account"),image:"/logo.png",handler:async s=>{try{console.log(" User confirmed payout in Razorpay UI:",s),N(!0),m(!0);let a=await lG({razorpay_payment_id:s.razorpay_payment_id,amount:n,mode:o,order_id:e.data.order_id});if(N(!1),m(!1),a.success)c("success","Your ".concat(n," earnings have been successfully transferred to your bank account via ").concat(o,"!"),n,o),r(),t();else throw Error(a.message)}catch(e){console.error(" Payout confirmation failed:",e),N(!1),m(!1),c("failure",e instanceof Error?e.message:"Transfer confirmation failed."),t()}},modal:{ondismiss:()=>{console.log("User cancelled payout"),m(!1)}},theme:{color:"#10b981"},prefill:{name:"Theater Owner",email:"owner@theater.com"}}).open()}catch(e){console.error("Payout initiation error:",e),m(!1),e instanceof lJ.pe&&c("failure",e.message||"Failed to initiate transfer. Please check your internet connection and try again."),t()}},v=[{mode:"IMPS",name:"IMPS",subtitle:"Instant Transfer",description:"30 minutes (24x7)",icon:tw.A,iconColor:"text-green-400"},{mode:"NEFT",name:"NEFT",subtitle:"Regular Transfer",description:"Next working day",icon:eP.A,iconColor:"text-blue-400"},{mode:"RTGS",name:"RTGS",subtitle:"High Value",description:"30 minutes (work hours)",icon:lz.A,iconColor:"text-purple-400"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"bg-black border border-gray-600 rounded-2xl shadow-2xl p-6 w-full max-w-4xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl text-white",style:lZ,children:"Transfer Earnings"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-1",style:l0,children:"Cash out your theater earnings to bank account"})]}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-900 rounded-lg transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gray-900 border border-gray-600 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-500/20 rounded-lg",children:(0,a.jsx)(se.A,{className:"w-5 h-5 text-green-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",style:l0,children:"Available Balance"}),(0,a.jsx)("p",{className:"text-2xl text-white font-bold",style:lZ,children:j(s)})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-400 text-sm mb-2",style:l0,children:"Cash Out Amount"}),(0,a.jsx)("input",{type:"number",min:"100",max:s,value:n,onChange:e=>i(Number(e.target.value)),className:"w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg",style:lZ,placeholder:"Enter amount"}),(0,a.jsxs)("p",{className:"text-gray-500 text-sm mt-2",style:l0,children:["Min: 100  Max: ",j(s)]})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-600 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-white font-medium mb-3",style:lZ,children:"Summary"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",style:l0,children:"Amount"}),(0,a.jsx)("span",{className:"text-white",style:lZ,children:j(n)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",style:l0,children:"Transfer Fee"}),(0,a.jsx)("span",{className:"text-white",style:lZ,children:"0"})]}),(0,a.jsx)("div",{className:"border-t border-gray-700 pt-2 mt-2",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-white font-medium",style:lZ,children:"You'll Receive"}),(0,a.jsx)("span",{className:"text-green-400 font-bold text-lg",style:lZ,children:j(n)})]})})]})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsx)("label",{className:"block text-gray-400 text-sm mb-4",style:l0,children:"Choose Transfer Method"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:v.map(e=>{let s=e.icon,t=o===e.mode,l="RTGS"===e.mode&&n<2e5;return(0,a.jsxs)("div",{className:"relative border rounded-xl p-4 cursor-pointer transition-all ".concat(t?"border-blue-500 bg-gray-900":l?"border-gray-700 bg-gray-900 cursor-not-allowed opacity-50":"border-gray-600 hover:border-gray-500 bg-gray-900"),onClick:()=>!l&&d(e.mode),children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-gray-700 rounded-xl flex items-center justify-center mb-3",children:(0,a.jsx)(s,{className:"w-6 h-6 ".concat(e.iconColor)})}),(0,a.jsx)("h3",{className:"text-white font-bold text-lg mb-1",style:lZ,children:e.name}),(0,a.jsx)("p",{className:"text-sm mb-2 ".concat(e.iconColor),style:l0,children:e.subtitle}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-2",style:l0,children:e.description}),l&&(0,a.jsx)("p",{className:"text-red-400 text-xs mt-2",style:l0,children:"Min 2L required"})]}),(0,a.jsx)("div",{className:"absolute top-2 left-2",children:(0,a.jsx)("input",{type:"radio",checked:t,onChange:()=>!l&&d(e.mode),className:"w-4 h-4 text-blue-500",disabled:l})})]},e.mode)})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:t,disabled:x,className:"flex-1 px-6 py-3 border border-gray-600 text-gray-400 rounded-lg hover:bg-gray-900 transition-colors",style:lZ,children:"Cancel"}),(0,a.jsxs)("button",{onClick:y,disabled:x||n<100||n>s||"RTGS"===o&&n<2e5||!h,className:"flex-2 px-8 py-3 bg-yellow-500 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2",style:lZ,children:[(0,a.jsx)(ss.A,{className:"w-4 h-4"}),"Cash Out ",j(n)]})]})]})]})]})}),(0,a.jsx)(lK,{isOpen:g,onClose:()=>{b(!1)},onConfirm:w,title:"Confirm Transfer ?",message:"Are you sure you want to transfer ".concat(j(n)," to your bank account? This action cannot be undone."),amount:n,mode:o,walletBalance:s}),(0,a.jsx)(l$,{isOpen:p,message:"Processing your transfer...",amount:n,mode:o})]})},l2={fontFamily:"Lexend, sans-serif",fontWeight:500},l3={fontFamily:"Lexend, sans-serif",fontWeight:400},l1=e=>{let{balance:s,onRefresh:t,onShowResult:r}=e,[c,n]=(0,l.useState)(!1),i=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("div",{className:"p-4 bg-green-500/20 rounded-2xl",children:(0,a.jsx)(s0.A,{className:"w-8 h-8 text-green-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-1",style:l3,children:"Current Balance"}),(0,a.jsx)("h2",{className:"text-4xl text-white font-bold",style:l2,children:i(s)}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(az.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"text-green-400 text-sm",style:l3,children:"Available for withdrawal"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:t,className:"flex items-center gap-2 px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/10 text-gray-400 hover:text-white border border-gray-500/30",style:l3,children:[(0,a.jsx)(lV.A,{className:"w-4 h-4"}),"Refresh"]}),(0,a.jsxs)("button",{onClick:()=>n(!0),disabled:s<100,style:{...l2,boxShadow:s>=100?"0 0 5px rgba(234, 179, 8, 0.6), 0 0 10px rgba(234, 179, 8, 0.4), 0 0 30px rgba(234, 179, 8, 0.2)":"none"},className:"jsx-38b40d4658376515 "+"relative cursor-pointer flex items-center gap-2 px-6 py-3 rounded-xl transition-all duration-300 overflow-hidden ".concat(s>=100?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:[(0,a.jsx)("div",{style:{background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.6) 50%, transparent 100%)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite",opacity:s>=100?1:.3},className:"jsx-38b40d4658376515 absolute inset-0"}),(0,a.jsxs)("div",{className:"jsx-38b40d4658376515 relative z-10 flex items-center gap-2",children:[(0,a.jsx)(s0.A,{className:"w-6 h-6"}),s>=100?"Transfer Earnings":"Min 100"]}),(0,a.jsx)(lU(),{id:"38b40d4658376515",children:"@keyframes shimmer{0%{background-position:-200%0}100%{background-position:200%0}}"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-700",children:[(0,a.jsxs)("div",{className:"bg-gray-800/50 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",style:l3,children:"This Month"}),(0,a.jsx)("p",{className:"text-xl text-white mt-1",style:l2,children:"0"})]}),(0,a.jsxs)("div",{className:"bg-gray-800/50 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",style:l3,children:"Last 30 Days"}),(0,a.jsx)("p",{className:"text-xl text-white mt-1",style:l2,children:"0"})]}),(0,a.jsxs)("div",{className:"bg-gray-800/50 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",style:l3,children:"Total Earnings"}),(0,a.jsx)("p",{className:"text-xl text-white mt-1",style:l2,children:i(s)})]})]})]}),c&&(0,a.jsx)(l4,{walletBalance:s,onClose:()=>n(!1),onSuccess:()=>{n(!1),t()},onShowResult:r})]})};var l5=t(7314),l6=t(24579);let l8={fontFamily:"Lexend, sans-serif",fontWeight:500},l9={fontFamily:"Lexend, sans-serif",fontWeight:400},l7=e=>{let{transactions:s}=e,[t,r]=(0,l.useState)(!1),c=t?s:s.slice(0,3);return(0,a.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-2xl text-white",style:l8,children:"Transaction History"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{style:l9,children:"Recent Activity"})]})]}),0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"p-4 bg-gray-800/50 rounded-2xl w-fit mx-auto mb-4",children:(0,a.jsx)(l5.A,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsx)("p",{className:"text-gray-400 text-lg",style:l8,children:"No transactions yet"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-2",style:l9,children:"Your transaction history will appear here"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"space-y-4",children:c.map(e=>{let s;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-800/50 rounded-xl hover:bg-gray-800/70 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-700/50 rounded-lg",children:"credit"===e.type?(0,a.jsx)(l5.A,{className:"w-5 h-5 text-green-400"}):(0,a.jsx)(l6.A,{className:"w-5 h-5 text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",style:l8,children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-lg border text-xs ".concat({revenue:"bg-green-500/20 text-green-400 border-green-500/30",refund:"bg-red-500/20 text-red-400 border-red-500/30",withdrawal:"bg-blue-500/20 text-blue-400 border-blue-500/30",topup:"bg-purple-500/20 text-purple-400 border-purple-500/30"}[e.category]||"bg-gray-500/20 text-gray-400 border-gray-500/30"),style:l9,children:e.category.toUpperCase()}),(0,a.jsx)("span",{className:"text-gray-400 text-sm",style:l9,children:new Date(e.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-lg font-semibold ".concat("credit"===e.type?"text-green-400":"text-red-400"),style:l8,children:["credit"===e.type?"+":"-",(s=e.amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(s))]}),(0,a.jsx)("span",{className:"text-gray-400 text-sm",style:l9,children:e.status})]})]},e._id)})}),s.length>3&&(0,a.jsx)("div",{className:"flex justify-center mt-6",children:(0,a.jsx)("button",{onClick:()=>r(!t),className:"flex items-center gap-2 px-6 py-3 rounded-xl transition-all duration-300 hover:bg-white/10 text-gray-400 hover:text-white border border-gray-500/30",style:l8,children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ay.A,{className:"w-4 h-4"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aj.A,{className:"w-4 h-4"}),"See More (",s.length-3," more)"]})})})]})]})},re={fontFamily:"Lexend, sans-serif",fontWeight:500},rs={fontFamily:"Lexend, sans-serif",fontWeight:400},rt=e=>{let{isOpen:s,onClose:t,type:l,amount:r,mode:c,message:n}=e;if(!s)return null;let i="success"===l;return(0,a.jsx)("div",{className:"fixed inset-0 z-[9999]  flex items-center justify-center bg-black/90 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"relative bg-black border border-gray-600 rounded-2xl shadow-2xl p-8 w-full max-w-md text-center",children:[(0,a.jsx)("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-gray-800 rounded-lg transition-colors",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 text-gray-400"})}),(0,a.jsx)("div",{className:"mb-6",children:i?(0,a.jsx)("div",{className:"mx-auto w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center animate-pulse",children:(0,a.jsx)(av.A,{className:"w-12 h-12 text-green-400"})}):(0,a.jsx)("div",{className:"mx-auto w-20 h-20 bg-red-500/20 rounded-full flex items-center justify-center animate-pulse",children:(0,a.jsx)(aw.A,{className:"w-12 h-12 text-red-400"})})}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2 ".concat(i?"text-green-400":"text-red-400"),style:re,children:i?"Transfer Successful!":"Transfer Failed"}),i&&r&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-1",style:rs,children:"Amount Transferred"}),(0,a.jsx)("p",{className:"text-3xl text-white font-bold",style:re,children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(r)}),c&&(0,a.jsxs)("p",{className:"text-green-400 text-sm mt-1",style:rs,children:["via ",c]})]}),(0,a.jsx)("p",{className:"text-gray-300 mb-6 leading-relaxed",style:rs,children:n||(i?"Your earnings have been successfully transferred to your registered bank account!":"Something went wrong with your transfer. Please check your details and try again.")}),i&&(0,a.jsx)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-4 mb-6 text-left",children:(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400",style:rs,children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-green-400 font-medium",style:rs,children:"Completed"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",style:rs,children:"Transfer Mode"}),(0,a.jsx)("span",{className:"text-white font-medium",style:rs,children:c})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",style:rs,children:"Expected Time"}),(0,a.jsx)("span",{className:"text-white font-medium",style:rs,children:"IMPS"===c?"Within 30 minutes":"NEFT"===c?"Next working day":"Within 30 minutes"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",style:rs,children:"Transaction Fee"}),(0,a.jsx)("span",{className:"text-green-400 font-medium",style:rs,children:"0 (Free)"})]})]})}),!i&&(0,a.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-6 text-left",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400",style:rs,children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),(0,a.jsx)("span",{className:"text-red-400 font-medium",style:rs,children:"Failed"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",style:rs,children:"Wallet Balance"}),(0,a.jsx)("span",{className:"text-white font-medium",style:rs,children:"Unchanged"})]})]})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[!i&&(0,a.jsx)("button",{onClick:t,className:"flex-1 px-6 py-3 border border-gray-600 text-gray-400 rounded-lg hover:bg-gray-800 transition-colors",style:re,children:"Cancel"}),(0,a.jsx)("button",{onClick:t,className:"".concat(!i?"flex-1":"w-full"," px-6 py-3 rounded-lg font-medium transition-all duration-300 ").concat(i?"bg-green-500 hover:bg-green-600 text-white shadow-lg hover:shadow-green-500/25":"bg-red-500 hover:bg-red-600 text-white shadow-lg hover:shadow-red-500/25"),style:re,children:i?"Awesome!":"Try Again"})]}),i&&(0,a.jsxs)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-2xl",children:[(0,a.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-green-400 rounded-full animate-ping opacity-75"}),(0,a.jsx)("div",{className:"absolute top-2 left-1/3 w-1 h-1 bg-yellow-400 rounded-full animate-ping opacity-60",style:{animationDelay:"0.5s"}}),(0,a.jsx)("div",{className:"absolute top-1 right-1/3 w-1 h-1 bg-blue-400 rounded-full animate-ping opacity-50",style:{animationDelay:"1s"}})]})]})})},ra={fontFamily:"Lexend, sans-serif",fontWeight:500},rl={fontFamily:"Lexend, sans-serif",fontWeight:400},rr=()=>{let[e,s]=(0,l.useState)({balance:0,transactions:[]}),[t,r]=(0,l.useState)(!0),[c,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)(!1),[d,x]=(0,l.useState)("success"),[m,h]=(0,l.useState)(""),[u,g]=(0,l.useState)(void 0),[b,p]=(0,l.useState)(void 0);(0,l.useEffect)(()=>{N()},[]);let N=async()=>{try{var e;r(!0),console.log("Fetching wallet data...");let t=await l_();console.log("Wallet data:",t.data);let a=await lO();console.log("Transaction data:",a),s({balance:(null==(e=t.data)?void 0:e.balance)||0,transactions:a.data||[]})}catch(e){console.error("Error fetching wallet data:",e)}finally{r(!1)}};return t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 p-6 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white text-xl",style:ra,children:"Loading wallet..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 p-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl text-white mb-2 flex items-center gap-2",style:ra,children:[(0,a.jsx)("div",{className:"p-3 bg-green-500/20 rounded-xl",children:(0,a.jsx)(sJ.A,{className:"w-6 h-6 text-green-400"})}),"Wallet Management"]}),(0,a.jsx)("p",{className:"text-gray-400",style:rl,children:"View your wallet balance, transaction history and manage your earnings."})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(l1,{balance:e.balance,onRefresh:N,onShowResult:(e,s,t,a)=>{x(e),h(s),g(t),p(a),o(!0)}}),(0,a.jsx)(l7,{transactions:e.transactions})]})]}),(0,a.jsx)(rt,{isOpen:i,onClose:()=>{o(!1),g(void 0),p(void 0),h("")},type:d,amount:u,mode:b,message:m})]})},rc={CREATE:"/owner/coupon",GET_ALL:"/owner/coupon",UPDATE:"/owner/coupon",DELETE:"/owner/coupon",TOGGLE_STATUS:"/owner/coupon"},rn=async e=>(await M.A.post(rc.CREATE,e)).data,ri=async e=>{let s=new URLSearchParams;(null==e?void 0:e.page)&&s.append("page",e.page.toString()),(null==e?void 0:e.limit)&&s.append("limit",e.limit.toString());let t=s.toString(),a=t?"".concat(rc.GET_ALL,"?").concat(t):rc.GET_ALL;return(await M.A.get(a)).data},ro=async(e,s)=>(await M.A.put("".concat(rc.UPDATE,"/").concat(e),s)).data,rd=async e=>(await M.A.delete("".concat(rc.DELETE,"/").concat(e))).data,rx=async(e,s)=>(await M.A.patch("".concat(rc.TOGGLE_STATUS,"/").concat(e),s)).data;var rm=t(81284),rh=t(43332),ru=t(90488);let rg=e=>{let{onEdit:s,refreshFlag:t}=e,[r,c]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)(null),[x,m]=(0,l.useState)(1),[h]=(0,l.useState)(6),[u,g]=(0,l.useState)(1),b=async e=>{i(!0),d(null);try{let s=await ri({page:e,limit:h});console.log("the rspo cooupon",s),c(s.data.data),g(s.data.totalPages),m(s.data.currentPage)}catch(e){d("Failed to fetch coupons")}finally{i(!1)}};(0,l.useEffect)(()=>{b(x)},[x,t]);let p=async e=>{if(await (0,T.f)({title:"Delete Movie?",message:'Are you sure you want to delete coupon"?',confirmText:"Delete",cancelText:"Cancel"}))try{await rd(e),b(x)}catch(e){eh.Ay.error("Failed to delete coupon")}},N=async(e,s)=>{if(await (0,T.f)({title:"Delete Movie?",message:"Are you sure you want to ".concat(s?"Disable":"Enable",' coupon"?'),confirmText:"Confirm",cancelText:"Cancel"}))try{let t=await rx(e,{isActive:!s});console.log(t),b(x)}catch(e){eh.Ay.error("Failed to delete coupon")}};return n?(0,a.jsx)("div",{className:"bg-black/40 backdrop-blur-lg border border-white/10 rounded-3xl p-12 text-white flex justify-center items-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-400"}),(0,a.jsx)("p",{className:"text-lg text-gray-300",children:"Loading coupons..."})]})}):o?(0,a.jsxs)("div",{className:"bg-black/40 backdrop-blur-lg border border-red-500/30 rounded-3xl p-8 text-red-400 text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(rm.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Error"})]}),o]}):0===r.length?(0,a.jsxs)("div",{className:"bg-black/40 backdrop-blur-lg border border-white/10 rounded-3xl p-16 text-center",children:[(0,a.jsx)(rh.A,{className:"mx-auto mb-6 w-16 h-16 text-gray-500"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No Coupons Found"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Create your first coupon to get started with promotional offers."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(e=>{var t;return(0,a.jsxs)("div",{className:"bg-black/40 backdrop-blur-lg border border-white/10 rounded-3xl p-6 hover:border-blue-500/30 transition-all duration-300 group",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl",children:(0,a.jsx)(rh.A,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-xl text-white",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-400 font-mono",children:e.uniqueId})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-gradient-to-r from-green-500/20 to-blue-500/20 px-3 py-1 rounded-full border border-green-500/30",children:[(0,a.jsx)(lr.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsxs)("span",{className:"text-green-400 font-bold",children:[e.discountPercentage,"%"]})]})]}),e.description&&(0,a.jsx)("p",{className:"text-gray-300 text-sm mb-4 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Expires ",new Date(e.expiryDate).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[(0,a.jsx)(s7.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[e.currentUsageCount,"/",e.maxUsageCount," used"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[(0,a.jsx)(A.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[(null==(t=e.theaterIds)?void 0:t.length)||0," theaters"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[(0,a.jsx)(as.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:e.isActive?"text-green-400":"text-red-400",children:e.isActive?"Active":"Inactive"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-white/10",children:[(0,a.jsxs)("button",{className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-xl bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 border border-blue-500/30 transition-all duration-300",onClick:()=>s(e),"aria-label":"Edit Coupon",children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),"Edit"]}),(0,a.jsxs)("button",{className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-xl bg-red-600/20 hover:bg-red-600/30 text-red-400 border border-red-500/30 transition-all duration-300",onClick:()=>p(e._id),"aria-label":"Delete Coupon",children:[(0,a.jsx)(S.A,{className:"w-4 h-4"}),"Delete"]}),(0,a.jsxs)("button",{className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-xl ".concat(e.isActive?"bg-red-600/20 hover:bg-red-600/30 text-red-400 border-red-500/30":"bg-green-600/20 hover:bg-green-600/30 text-green-400 border-green-500/30","  border  transition-all duration-300"),onClick:()=>N(e._id,e.isActive),"aria-label":"toggle Coupon",children:[(0,a.jsx)(ru.A,{className:"w-4 h-4 ".concat(e.isActive?"text-red-500":"text-green-400")}),"Toggle"]})]})]},e._id)})}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-6 mt-8 bg-black/40 backdrop-blur-lg rounded-2xl p-4 border border-white/10",children:[(0,a.jsx)("button",{className:"px-6 py-2 border border-white/20 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10 transition-all duration-300 text-white",disabled:1===x,onClick:()=>m(x-1),children:"Previous"}),(0,a.jsxs)("span",{className:"text-gray-300 font-medium",children:["Page ",x," of ",u]}),(0,a.jsx)("button",{className:"px-6 py-2 border border-white/20 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10 transition-all duration-300 text-white",disabled:x===u,onClick:()=>m(x+1),children:"Next"})]})]})},rb=e=>{let{initialData:s,theaterOptions:t,onSubmit:r,onCancel:c,saving:n,isEditing:i=!1}=e,[o,d]=(0,l.useState)((null==s?void 0:s.name)||""),[x,m]=(0,l.useState)((null==s?void 0:s.uniqueId)||""),[h,u]=(0,l.useState)((null==s?void 0:s.theaterIds)||[]),[g,b]=(0,l.useState)((null==s?void 0:s.discountPercentage)||10),[p,N]=(0,l.useState)((null==s?void 0:s.description)||""),[j,y]=(0,l.useState)(()=>{if(null==s?void 0:s.expiryDate)return s.expiryDate;let e=new Date;return e.setDate(e.getDate()+30),e.toISOString().substring(0,10)}),[w,v]=(0,l.useState)((null==s?void 0:s.maxUsageCount)||1),[f,k]=(0,l.useState)((null==s?void 0:s.minAmount)||1),[S,C]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{C(o.trim().length>0&&x.trim().length>0&&j.length>0&&h.length>0&&g>=1&&g<=100&&w>=1&&p.trim().length>0)},[o,x,j,h,g,w,p]),(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 via-black to-gray-900 border border-white/20 rounded-3xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl",children:(0,a.jsx)(rh.A,{className:"w-6 h-6 text-white"})}),(0,a.jsx)("h3",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:i?"Edit Coupon":"Create New Coupon"})]}),(0,a.jsx)("button",{onClick:c,disabled:n,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,a.jsx)(Y.A,{className:"w-6 h-6 text-gray-400"})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),S&&r({name:o.trim(),uniqueId:x.trim().toUpperCase(),theaterIds:h,discountPercentage:g,description:p.trim(),expiryDate:new Date(j).toISOString(),maxUsageCount:w,minAmount:f})},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-gray-300 font-medium flex items-center gap-2",children:[(0,a.jsx)(rm.A,{className:"w-4 h-4 text-blue-400"}),"Coupon Name*"]}),(0,a.jsx)("input",{type:"text",maxLength:100,value:o,onChange:e=>d(e.target.value),placeholder:"e.g., Summer Special Discount",className:"w-full p-4 rounded-xl bg-white/5 border border-white/20 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-white placeholder-gray-500 transition-all"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-gray-300 font-medium flex items-center gap-2",children:[(0,a.jsx)(rh.A,{className:"w-4 h-4 text-blue-400"}),"Unique Code*"]}),(0,a.jsx)("input",{type:"text",maxLength:20,value:x,onChange:e=>m(e.target.value.toUpperCase()),placeholder:"SUMMER2024",className:"w-full p-4 rounded-xl bg-white/5 border border-white/20 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-white placeholder-gray-500 transition-all uppercase font-mono"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-gray-300 font-medium flex items-center gap-2",children:[(0,a.jsx)(lr.A,{className:"w-4 h-4 text-green-400"}),"Discount %*"]}),(0,a.jsx)("input",{type:"number",min:1,max:100,value:g,onChange:e=>b(Number(e.target.value)),className:"w-full p-4 rounded-xl bg-white/5 border border-white/20 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none text-white transition-all"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-gray-300 font-medium flex items-center gap-2",children:[(0,a.jsx)(s0.A,{className:"w-4 h-4 text-yellow-400"}),"Max Usage Count"]}),(0,a.jsx)("input",{type:"number",min:1,value:w,onChange:e=>v(Number(e.target.value)),className:"w-full p-4 rounded-xl bg-white/5 border border-white/20 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 outline-none text-white transition-all"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-gray-300 font-medium flex items-center gap-2",children:[(0,a.jsx)(s0.A,{className:"w-4 h-4 text-yellow-400"}),"Minimum Spend Amount"]}),(0,a.jsx)("input",{type:"number",min:200,value:f,onChange:e=>k(Number(e.target.value)),className:"w-full p-4 rounded-xl bg-white/5 border border-white/20 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 outline-none text-white transition-all"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-gray-300 font-medium flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"w-4 h-4 text-purple-400"}),"Expiry Date*"]}),(0,a.jsx)("input",{type:"date",value:j,min:new Date().toISOString().substring(0,10),onChange:e=>y(e.target.value),className:"w-full p-4 rounded-xl bg-white/5 border border-white/20 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none text-white transition-all"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"text-gray-300 font-medium flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 text-red-400"}),"Select Theaters* (",h.length," selected)"]}),(0,a.jsx)("div",{className:"bg-white/5 border border-white/20 rounded-xl p-4 max-h-48 overflow-y-auto",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 cursor-pointer transition-colors group",children:[(0,a.jsx)("input",{type:"checkbox",checked:h.includes(e._id),onChange:()=>(e=>{h.includes(e)?u(h.filter(s=>s!==e)):u([...h,e])})(e._id),className:"h-4 w-4 rounded border-gray-600 text-blue-500 focus:ring-blue-500 focus:ring-2"}),(0,a.jsx)("span",{className:"text-gray-300 group-hover:text-white transition-colors",children:e.name})]},e.id))})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-gray-300 font-medium flex items-center gap-2",children:[(0,a.jsx)(rm.A,{className:"w-4 h-4 text-gray-400"}),"Description*"]}),(0,a.jsx)("textarea",{rows:4,value:p,onChange:e=>N(e.target.value),maxLength:500,placeholder:"Add a detailed description of this coupon offer...",className:"w-full p-4 rounded-xl bg-white/5 border border-white/20 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-white placeholder-gray-500 transition-all resize-none"}),(0,a.jsxs)("div",{className:"text-right text-xs text-gray-500",children:[p.length,"/500 characters"]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t border-white/10",children:[(0,a.jsx)("button",{type:"button",onClick:c,disabled:n,className:"px-6 py-3 rounded-xl border border-white/20 text-gray-300 hover:text-white hover:bg-white/5 transition-all duration-300 disabled:opacity-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:n||!S,className:"px-8 py-3 rounded-xl border text-white font-semibold transition-all duration-300 flex items-center gap-2 ".concat(S?"border-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700":"border-white/30 bg-white/10 cursor-not-allowed"," disabled:opacity-70"),children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sN.A,{className:"w-4 h-4"}),i?"Update Coupon":"Create Coupon"]})})]})]})]})})},rp=()=>{var e;let[s,t]=(0,l.useState)(null),[r,c]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)([]),x=async e=>{c(!0);try{console.log(e),console.log(await rn(e)),t(null),i(e=>!e)}catch(e){alert(),eh.Ay.error("Failed to create coupon!"),console.log(e)}finally{c(!1)}};(0,l.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=await O();d(e.data.theaters)}catch(e){console.log(e)}},h=async e=>{if(s){c(!0);try{await ro(s._id,e),t(null),i(e=>!e)}catch(e){alert("Failed to update coupon!")}finally{c(!1)}}};return(0,a.jsx)("div",{className:"min-h-screen bg-black p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8 bg-black/40 backdrop-blur-lg rounded-3xl p-8 border border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl",children:(0,a.jsx)(s4.A,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h1",{className:"text-4xl font-bold bg-white bg-clip-text text-transparent",children:"Coupon Management"})]}),!s&&(0,a.jsx)("button",{className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 rounded-2xl text-white font-semibold transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105",onClick:()=>{t({_id:"",name:"",uniqueId:"",theaterIds:[],discountPercentage:10,description:"",expiryDate:new Date(Date.now()+2592e6),isActive:!0,isUsed:!1,maxUsageCount:1,currentUsageCount:0,createdBy:"",createdAt:new Date,updatedAt:new Date})},children:"+ Create New Coupon"})]}),s?(0,a.jsx)(rb,{initialData:{name:s.name,uniqueId:s.uniqueId,theaterIds:(null==(e=s.theaterIds)?void 0:e.map(e=>"string"==typeof e?e:e._id))||[],discountPercentage:s.discountPercentage,description:s.description,expiryDate:s.expiryDate instanceof Date?s.expiryDate.toISOString().split("T")[0]:new Date(s.expiryDate).toISOString().split("T")[0],maxUsageCount:s.maxUsageCount,minAmount:s.minAmount},theaterOptions:o,onSubmit:s._id?h:x,onCancel:()=>{t(null)},saving:r,isEditing:!!s._id}):(0,a.jsx)(rg,{onEdit:t,refreshFlag:n})]})})},rN=()=>{let[e,s]=(0,l.useState)("theaters");return(0,a.jsx)(s8.A,{allowedRoles:["owner"],children:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(s6,{activeTab:e,setActiveTab:s}),(0,a.jsx)("div",{className:"flex-1 ml-64",children:(0,a.jsx)("div",{className:"p-8",children:(()=>{switch(e){case"theaters":default:return(0,a.jsx)(eF,{});case"screens":return(0,a.jsx)(ae,{});case"shows":return(0,a.jsx)(aA,{lexendMedium:ta(),lexendSmall:tr()});case"bookings":return(0,a.jsx)(aV,{lexendMedium:ta(),lexendSmall:tr()});case"wallet":return(0,a.jsx)(rr,{});case"analytics":return(0,a.jsx)(lN,{});case"coupons":return(0,a.jsx)(rp,{});case"revenue":return(0,a.jsx)(lF,{});case"account":return(0,a.jsx)(sY,{})}})()})})]})})})}}},e=>{e.O(0,[7271,7293,2601,6833,1198,7230,4303,972,3524,9268,9772,3568,1256,2645,1384,11,231,7440,4149,8441,5964,7358],()=>e(e.s=6188)),_N_E=e.O()}]);