(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{797:(e,a,t)=>{Promise.resolve().then(t.bind(t,72607)),Promise.resolve().then(t.bind(t,5079)),Promise.resolve().then(t.bind(t,95502)),Promise.resolve().then(t.bind(t,81534)),Promise.resolve().then(t.bind(t,87081)),Promise.resolve().then(t.bind(t,48109)),Promise.resolve().then(t.bind(t,67670)),Promise.resolve().then(t.bind(t,20183))},12764:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s={LOGIN:"/auth/login",FORGOT_PASSWORD_SEND_OTP:"/auth/forgot-password/send-otp",VERIFY_OTP:"/auth/forgot-password/verify-otp",RESET_PASSWORD:"/auth/forgot-password/reset-password",GOOGLE_AUTH:"/auth/google",LOGOUT:"/auth/logout",REFRESH:"/auth/refresh"}},14186:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},17580:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},19072:(e,a,t)=>{"use strict";t.d(a,{BD:()=>l,Ky:()=>i,ZO:()=>n,ri:()=>c,xw:()=>o});var s=t(12764),r=t(77567);let l=async e=>(await r.A.post(s.A.FORGOT_PASSWORD_SEND_OTP,{email:e})).data,n=async(e,a)=>(await r.A.post(s.A.VERIFY_OTP,{email:e,otp:a})).data,o=async(e,a,t)=>(await r.A.post(s.A.RESET_PASSWORD,{email:e,otp:a,newPassword:t})).data,i=async e=>(await r.A.post(s.A.GOOGLE_AUTH,{credential:e.credential})).data,c=async()=>{try{var e;let a=await r.A.post(s.A.LOGOUT,{});return localStorage.removeItem("authToken"),(null==(e=a.data)?void 0:e.success)||!1}catch(e){return localStorage.removeItem("authToken"),!1}}},20183:(e,a,t)=>{"use strict";t.d(a,{default:()=>m});var s=t(95155);t(12115);var r=t(40646),l=t(69074),n=t(14186),o=t(17580),i=t(92138),c=t(35695);let d={className:"font-bold"},u={className:"font-medium"},h={className:"font-normal text-sm"},m=e=>{let{bookingDetails:a}=e,t=(0,c.useRouter)();return(0,s.jsx)("div",{className:"min-h-screen bg-transparent p-6 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"mx-auto w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center",children:(0,s.jsx)(r.A,{className:"w-12 h-12 text-green-400"})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h1",{className:"".concat(d.className," text-3xl text-white"),children:"Payment Successful!"}),(0,s.jsx)("p",{className:"".concat(h.className," text-gray-400"),children:"Your booking has been confirmed"})]})]}),a&&(0,s.jsxs)("div",{className:"backdrop-blur-sm bg-black/20 rounded-2xl p-6 border border-gray-500/30 space-y-4",children:[(0,s.jsx)("h3",{className:"".concat(u.className," text-white text-lg mb-4"),children:"Booking Details"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center",children:(0,s.jsx)(l.A,{className:"w-4 h-4 text-gray-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"".concat(h.className," text-gray-400"),children:"Movie & Theater"}),(0,s.jsx)("p",{className:"".concat(u.className," text-white text-sm"),children:a.movieTitle}),(0,s.jsxs)("p",{className:"".concat(h.className," text-gray-300 text-xs"),children:[a.theaterName," - ",a.screenName]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center",children:(0,s.jsx)(n.A,{className:"w-4 h-4 text-gray-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"".concat(h.className," text-gray-400"),children:"Show Time"}),(0,s.jsxs)("p",{className:"".concat(u.className," text-white text-sm"),children:[a.showDate," at ",a.showTime]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center",children:(0,s.jsx)(o.A,{className:"w-4 h-4 text-gray-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"".concat(h.className," text-gray-400"),children:"Seats"}),(0,s.jsx)("p",{className:"".concat(u.className," text-white text-sm"),children:a.seats.join(", ")})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl border border-gray-500/20 mt-4",children:[(0,s.jsx)("span",{className:"".concat(d.className," text-white text-lg"),children:"TOTAL PAID"}),(0,s.jsxs)("span",{className:"".concat(d.className," text-white text-xl"),children:["â‚¹",a.totalAmount]})]}),(0,s.jsxs)("div",{className:"text-center pt-2",children:[(0,s.jsx)("p",{className:"".concat(h.className," text-gray-400"),children:"Booking ID"}),(0,s.jsx)("p",{className:"".concat(u.className," text-white font-mono text-sm"),children:a.bookingId})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{onClick:()=>{t.push("/user/account"),localStorage.setItem("selectedTab","viewTicket")},className:"".concat(u.className," w-full bg-white text-black px-6 py-4 rounded-xl hover:bg-gradient-to-tr hover:from-violet-300 hover:to-yellow-100 transition-all duration-200 transform hover:scale-[1.02] flex items-center justify-center gap-2"),children:"View Ticket"}),(0,s.jsxs)("button",{onClick:()=>{t.push("/search/movies")},className:"".concat(u.className," w-full bg-transparent text-white border border-white px-6 py-4 rounded-xl hover:bg-gradient-to-tr  transition-all duration-200 transform hover:scale-[1.02] flex items-center justify-center gap-2"),children:["Browse More Movies",(0,s.jsx)(i.A,{className:"w-4 h-4"})]})]}),(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("p",{className:"".concat(h.className," text-gray-400"),children:"Confirmation details have been sent to your email"}),(0,s.jsx)("p",{className:"".concat(h.className," text-gray-500"),children:"Thank you for choosing Cineora!"})]})]})})}},30464:(e,a,t)=>{"use strict";t.d(a,{VM:()=>c,iD:()=>i,LK:()=>o,xw:()=>d,uV:()=>u,$5:()=>l,Dl:()=>h,vJ:()=>n});let s={SIGNUP:"/auth/signup",VERIFY_OTP:"/auth/verify-otp",RESEND_OTP:"/auth/resend-otp",LOGIN:"/auth/login",PROFILE:"/users/profile",RESET_PASSWORD:"/users/reset-password",EMAIL_CHANGE_OTP_SEND:"/users/email/change",EMAIL_CHANGE_OTP_VERIFY:"/users/email/verify"};var r=t(77567);let l=async e=>(await r.A.post(s.SIGNUP,e)).data,n=async(e,a)=>(await r.A.post(s.VERIFY_OTP,{email:e,otp:a})).data,o=async e=>(await r.A.post(s.RESEND_OTP,{email:e})).data,i=async(e,a)=>(await r.A.post(s.LOGIN,{email:e,password:a})).data,c=async()=>(await r.A.get(s.PROFILE)).data,d=async(e,a)=>(await r.A.patch(s.RESET_PASSWORD,{newPassword:e,oldpassword:a})).data,u=async e=>(await r.A.post(s.EMAIL_CHANGE_OTP_SEND,{newEmail:e.newEmail,password:e.password})).data,h=async e=>(await r.A.post(s.EMAIL_CHANGE_OTP_VERIFY,{email:e.email,otp:e.otp})).data},33208:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>N,ET:()=>x,Lx:()=>i,RY:()=>o,p3:()=>c,y4:()=>u});var s=t(5710),r=t(30464),l=t(19072),n=t(59362);let o=(0,s.zD)("auth/verifyOtp",async(e,a)=>{let{email:t,otp:s}=e,{rejectWithValue:l}=a;try{let e=await (0,r.vJ)(t,s);if(e.success)return{user:e.data.user,role:e.data.role,redirectTo:e.data.redirectTo};return l(e.message)}catch(a){let e="OTP verification failed";if(a instanceof n.pe){var o,i,c,d,u;(null==(i=a.response)||null==(o=i.data)?void 0:o.message)?e=a.response.data.message:(null==(c=a.response)?void 0:c.status)===401?e="Invalid OTP":(null==(d=a.response)?void 0:d.status)&&(null==(u=a.response)?void 0:u.status)>=500?e="Server error. Please try again later.":a.request&&(e="Network error. Please check your connection.")}return l(e)}}),i=(0,s.zD)("auth/loginUser",async(e,a)=>{let{email:t,password:s}=e,{rejectWithValue:l}=a;try{let e=await (0,r.iD)(t,s);if(console.log("auth slice result is :",e),e.success)return{user:e.data.user,role:e.data.role,redirectTo:e.data.redirectTo};return l(e.message)}catch(a){let e="Login failed";if(a instanceof n.pe){var o,i,c,d,u;(null==(i=a.response)||null==(o=i.data)?void 0:o.message)?e=a.response.data.message:(null==(c=a.response)?void 0:c.status)===401?e="Invalid email or password":(null==(d=a.response)?void 0:d.status)&&(null==(u=a.response)?void 0:u.status)>=500?e="Server error. Please try again later.":a.request&&(e="Network error. Please check your connection.")}return l(e)}}),c=(0,s.zD)("auth/googleLogin",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await (0,l.Ky)(e);if(a.success)return{user:a.data.user,role:a.data.user.role||"user",isNewUser:a.data.isNewUser,redirectTo:a.data.redirectTo||"/dashboard"};return t(a.message||"Google authentication failed")}catch(e){if(e instanceof n.pe){var s,r,o,i;let a="Google Sign-In failed";return(null==(r=e.response)||null==(s=r.data)?void 0:s.message)?a=e.response.data.message:(null==(o=e.response)?void 0:o.status)&&(null==(i=e.response)?void 0:i.status)>=500?a="Server error. Please try again later.":e.request&&(a="Network error. Please check your connection."),t(a)}}}),d=(0,s.zD)("auth/checkStatus",async(e,a)=>{let{rejectWithValue:t}=a;try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let a=await e.json();return{user:a.data.user,role:a.data.user.role}}throw Error("Not authenticated")}catch(e){return t("Authentication check failed")}}),u=(0,s.zD)("auth/logout",async(e,a)=>{let{rejectWithValue:t}=a;try{return await (0,l.ri)(),null}catch(e){return null}}),h=(0,s.Z0)({name:"auth",initialState:{user:null,role:null,isAuthenticated:!1,loading:!1,error:null},reducers:{setUser:(e,a)=>{e.user=a.payload.user,e.role=a.payload.role,e.isAuthenticated=!0,e.error=null},clearUser:e=>{e.loading=!1,e.user=null,e.role=null,e.isAuthenticated=!1,e.error=null},setLoading:(e,a)=>{e.loading=a.payload},setError:(e,a)=>{e.error=a.payload},clearError:e=>{e.error=null},updateUser:(e,a)=>{e.user&&(e.user={...e.user,...a.payload})}},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.role=a.payload.role,e.isAuthenticated=!0,e.error=null}).addCase(i.rejected,(e,a)=>{e.loading=!1,e.error=a.payload,e.isAuthenticated=!1}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload&&a.payload.user,e.role=a.payload&&a.payload.role,e.isAuthenticated=!0,e.error=null}).addCase(c.rejected,(e,a)=>{e.loading=!1,e.error=a.payload,e.isAuthenticated=!1}).addCase(d.pending,e=>{e.loading=!0}).addCase(d.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.role=a.payload.role,e.isAuthenticated=!0,e.error=null}).addCase(d.rejected,e=>{e.loading=!1,e.user=null,e.role=null,e.isAuthenticated=!1,e.error=null}).addCase(u.fulfilled,e=>{e.loading=!1,e.user=null,e.role=null,e.isAuthenticated=!1,e.error=null}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.role=a.payload.role,e.isAuthenticated=!0,e.error=null}).addCase(o.rejected,(e,a)=>{e.loading=!1,e.error=a.payload,e.isAuthenticated=!1})}}),{setUser:m,clearUser:p,setLoading:y,setError:g,clearError:x,updateUser:v}=h.actions,N=h.reducer},40646:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},69074:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},77567:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var s=t(23464),r=t(12764);let l=s.A.create({baseURL:"https://cineora.fun/api",headers:{"Content-Type":"application/json"},withCredentials:!0}),n=!1,o=[],i=e=>{o.forEach(a=>{let{resolve:t,reject:s}=a;e?s(e):t()}),o=[],n=!1};l.interceptors.response.use(e=>e,async e=>{var a,t,s;let c=e.config;if(null==(a=c.url)?void 0:a.includes(r.A.REFRESH))return Promise.reject(e);if((null==(t=e.response)?void 0:t.status)===401&&!c._retry){if(n)return new Promise((e,a)=>{o.push({resolve:e,reject:a})}).then(()=>l(c)).catch(e=>Promise.reject(e));c._retry=!0,n=!0;try{return await l.post(r.A.REFRESH),i(null),l(c)}catch(e){return console.error(" Refresh failed:",e),i(e),window.location.href="/login",Promise.reject(e)}}return(null==(s=e.response)?void 0:s.status)===401&&(window.location.href="/login"),Promise.reject(e)});let c=l},92138:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])}},e=>{e.O(0,[730,4303,2601,9268,1410,9772,5947,2686,8441,5964,7358],()=>e(e.s=797)),_N_E=e.O()}]);